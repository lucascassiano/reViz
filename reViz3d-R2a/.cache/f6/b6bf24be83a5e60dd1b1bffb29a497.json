{"id":"viewer/shaders/SAO.js","dependencies":[{"name":"/Users/lucascassiano/Documents/GitHub/reViz3d/reViz3d-R2/.babelrc","includedInParent":true,"mtime":1539457513418},{"name":"/Users/lucascassiano/Documents/GitHub/reViz3d/reViz3d-R2/package.json","includedInParent":true,"mtime":1539457522507}],"generated":{"js":"\"use strict\";\n\nTHREE.SAOShader = {\n  defines: {\n    'NUM_SAMPLES': 7,\n    'NUM_RINGS': 4,\n    'NORMAL_TEXTURE': 0,\n    'DIFFUSE_TEXTURE': 0,\n    'DEPTH_PACKING': 1,\n    'PERSPECTIVE_CAMERA': 1\n  },\n  uniforms: {\n    'tDepth': {\n      type: 't',\n      value: null\n    },\n    'tDiffuse': {\n      type: 't',\n      value: null\n    },\n    'tNormal': {\n      type: 't',\n      value: null\n    },\n    'size': {\n      type: 'v2',\n      value: new THREE.Vector2(512, 512)\n    },\n    'cameraNear': {\n      type: 'f',\n      value: 1\n    },\n    'cameraFar': {\n      type: 'f',\n      value: 100\n    },\n    'cameraProjectionMatrix': {\n      type: 'm4',\n      value: new THREE.Matrix4()\n    },\n    'cameraInverseProjectionMatrix': {\n      type: 'm4',\n      value: new THREE.Matrix4()\n    },\n    'scale': {\n      type: 'f',\n      value: 1.0\n    },\n    'intensity': {\n      type: 'f',\n      value: 0.1\n    },\n    'bias': {\n      type: 'f',\n      value: 0.5\n    },\n    'minResolution': {\n      type: 'f',\n      value: 0.0\n    },\n    'kernelRadius': {\n      type: 'f',\n      value: 100.0\n    },\n    'randomSeed': {\n      type: 'f',\n      value: 0.0\n    }\n  },\n  vertexShader: [\"varying vec2 vUv;\", \"void main() {\", \"\tvUv = uv;\", \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\", \"}\"].join(\"\\n\"),\n  fragmentShader: [\"#include <common>\", \"varying vec2 vUv;\", \"#if DIFFUSE_TEXTURE == 1\", \"uniform sampler2D tDiffuse;\", \"#endif\", \"uniform sampler2D tDepth;\", \"#if NORMAL_TEXTURE == 1\", \"uniform sampler2D tNormal;\", \"#endif\", \"uniform float cameraNear;\", \"uniform float cameraFar;\", \"uniform mat4 cameraProjectionMatrix;\", \"uniform mat4 cameraInverseProjectionMatrix;\", \"uniform float scale;\", \"uniform float intensity;\", \"uniform float bias;\", \"uniform float kernelRadius;\", \"uniform float minResolution;\", \"uniform vec2 size;\", \"uniform float randomSeed;\", \"// RGBA depth\", \"#include <packing>\", \"vec4 getDefaultColor( const in vec2 screenPosition ) {\", \"\t#if DIFFUSE_TEXTURE == 1\", \"\treturn texture2D( tDiffuse, vUv );\", \"\t#else\", \"\treturn vec4( 1.0 );\", \"\t#endif\", \"}\", \"float getDepth( const in vec2 screenPosition ) {\", \"\t#if DEPTH_PACKING == 1\", \"\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );\", \"\t#else\", \"\treturn texture2D( tDepth, screenPosition ).x;\", \"\t#endif\", \"}\", \"float getViewZ( const in float depth ) {\", \"\t#if PERSPECTIVE_CAMERA == 1\", \"\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\", \"\t#else\", \"\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\", \"\t#endif\", \"}\", \"vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {\", \"\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];\", \"\tvec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );\", \"\tclipPosition *= clipW; // unprojection.\", \"\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;\", \"}\", \"vec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {\", \"\t#if NORMAL_TEXTURE == 1\", \"\treturn unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );\", \"\t#else\", \"\treturn normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );\", \"\t#endif\", \"}\", \"float scaleDividedByCameraFar;\", \"float minResolutionMultipliedByCameraFar;\", \"float getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {\", \"\tvec3 viewDelta = sampleViewPosition - centerViewPosition;\", \"\tfloat viewDistance = length( viewDelta );\", \"\tfloat scaledScreenDistance = scaleDividedByCameraFar * viewDistance;\", \"\treturn max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - bias) / (1.0 + pow2( scaledScreenDistance ) );\", \"}\", \"// moving costly divides into consts\", \"const float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );\", \"const float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );\", \"float getAmbientOcclusion( const in vec3 centerViewPosition ) {\", \"\t// precompute some variables require in getOcclusion.\", \"\tscaleDividedByCameraFar = scale / cameraFar;\", \"\tminResolutionMultipliedByCameraFar = minResolution * cameraFar;\", \"\tvec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );\", \"\t// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/\", \"\tfloat angle = rand( vUv + randomSeed ) * PI2;\", \"\tvec2 radius = vec2( kernelRadius * INV_NUM_SAMPLES ) / size;\", \"\tvec2 radiusStep = radius;\", \"\tfloat occlusionSum = 0.0;\", \"\tfloat weightSum = 0.0;\", \"\tfor( int i = 0; i < NUM_SAMPLES; i ++ ) {\", \"\t\tvec2 sampleUv = vUv + vec2( cos( angle ), sin( angle ) ) * radius;\", \"\t\tradius += radiusStep;\", \"\t\tangle += ANGLE_STEP;\", \"\t\tfloat sampleDepth = getDepth( sampleUv );\", \"\t\tif( sampleDepth >= ( 1.0 - EPSILON ) ) {\", \"\t\t\tcontinue;\", \"\t\t}\", \"\t\tfloat sampleViewZ = getViewZ( sampleDepth );\", \"\t\tvec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );\", \"\t\tocclusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );\", \"\t\tweightSum += 1.0;\", \"\t}\", \"\tif( weightSum == 0.0 ) discard;\", \"\treturn occlusionSum * ( intensity / weightSum );\", \"}\", \"void main() {\", \"\tfloat centerDepth = getDepth( vUv );\", \"\tif( centerDepth >= ( 1.0 - EPSILON ) ) {\", \"\t\tdiscard;\", \"\t}\", \"\tfloat centerViewZ = getViewZ( centerDepth );\", \"\tvec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );\", \"\tfloat ambientOcclusion = getAmbientOcclusion( viewPosition );\", \"\tgl_FragColor = getDefaultColor( vUv );\", \"\tgl_FragColor.xyz *=  1.0 - ambientOcclusion;\", \"}\"].join(\"\\n\")\n};","map":{"mappings":[{"name":"THREE","generated":{"line":3,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":1,"column":0}},{"generated":{"line":3,"column":5},"source":"viewer/shaders/SAO.js","original":{"line":1,"column":5}},{"name":"SAOShader","generated":{"line":3,"column":6},"source":"viewer/shaders/SAO.js","original":{"line":1,"column":6}},{"generated":{"line":3,"column":15},"source":"viewer/shaders/SAO.js","original":{"line":1,"column":0}},{"generated":{"line":3,"column":18},"source":"viewer/shaders/SAO.js","original":{"line":1,"column":18}},{"name":"defines","generated":{"line":4,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":2,"column":1}},{"name":"defines","generated":{"line":4,"column":2},"source":"viewer/shaders/SAO.js","original":{"line":2,"column":1}},{"generated":{"line":4,"column":9},"source":"viewer/shaders/SAO.js","original":{"line":2,"column":8}},{"generated":{"line":4,"column":11},"source":"viewer/shaders/SAO.js","original":{"line":2,"column":10}},{"generated":{"line":5,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":3,"column":2}},{"generated":{"line":5,"column":19},"source":"viewer/shaders/SAO.js","original":{"line":3,"column":17}},{"generated":{"line":5,"column":20},"source":"viewer/shaders/SAO.js","original":{"line":2,"column":10}},{"generated":{"line":6,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":4,"column":2}},{"generated":{"line":6,"column":17},"source":"viewer/shaders/SAO.js","original":{"line":4,"column":15}},{"generated":{"line":6,"column":18},"source":"viewer/shaders/SAO.js","original":{"line":2,"column":10}},{"generated":{"line":7,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":5,"column":2}},{"generated":{"line":7,"column":22},"source":"viewer/shaders/SAO.js","original":{"line":5,"column":20}},{"generated":{"line":7,"column":23},"source":"viewer/shaders/SAO.js","original":{"line":2,"column":10}},{"generated":{"line":8,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":6,"column":2}},{"generated":{"line":8,"column":23},"source":"viewer/shaders/SAO.js","original":{"line":6,"column":21}},{"generated":{"line":8,"column":24},"source":"viewer/shaders/SAO.js","original":{"line":2,"column":10}},{"generated":{"line":9,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":7,"column":2}},{"generated":{"line":9,"column":21},"source":"viewer/shaders/SAO.js","original":{"line":7,"column":19}},{"generated":{"line":9,"column":22},"source":"viewer/shaders/SAO.js","original":{"line":2,"column":10}},{"generated":{"line":10,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":8,"column":2}},{"generated":{"line":10,"column":26},"source":"viewer/shaders/SAO.js","original":{"line":8,"column":24}},{"generated":{"line":11,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":2,"column":10}},{"generated":{"line":11,"column":3},"source":"viewer/shaders/SAO.js","original":{"line":1,"column":18}},{"name":"uniforms","generated":{"line":12,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":10,"column":1}},{"name":"uniforms","generated":{"line":12,"column":2},"source":"viewer/shaders/SAO.js","original":{"line":10,"column":1}},{"generated":{"line":12,"column":10},"source":"viewer/shaders/SAO.js","original":{"line":10,"column":9}},{"generated":{"line":12,"column":12},"source":"viewer/shaders/SAO.js","original":{"line":10,"column":11}},{"generated":{"line":13,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":12,"column":2}},{"generated":{"line":13,"column":14},"source":"viewer/shaders/SAO.js","original":{"line":12,"column":12}},{"name":"type","generated":{"line":14,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":12,"column":14}},{"name":"type","generated":{"line":14,"column":6},"source":"viewer/shaders/SAO.js","original":{"line":12,"column":14}},{"generated":{"line":14,"column":10},"source":"viewer/shaders/SAO.js","original":{"line":12,"column":18}},{"generated":{"line":14,"column":12},"source":"viewer/shaders/SAO.js","original":{"line":12,"column":20}},{"generated":{"line":14,"column":15},"source":"viewer/shaders/SAO.js","original":{"line":12,"column":12}},{"name":"value","generated":{"line":15,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":12,"column":25}},{"name":"value","generated":{"line":15,"column":6},"source":"viewer/shaders/SAO.js","original":{"line":12,"column":25}},{"generated":{"line":15,"column":11},"source":"viewer/shaders/SAO.js","original":{"line":12,"column":30}},{"generated":{"line":15,"column":13},"source":"viewer/shaders/SAO.js","original":{"line":12,"column":32}},{"generated":{"line":16,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":12,"column":12}},{"generated":{"line":16,"column":5},"source":"viewer/shaders/SAO.js","original":{"line":10,"column":11}},{"generated":{"line":17,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":13,"column":2}},{"generated":{"line":17,"column":16},"source":"viewer/shaders/SAO.js","original":{"line":13,"column":14}},{"name":"type","generated":{"line":18,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":13,"column":16}},{"name":"type","generated":{"line":18,"column":6},"source":"viewer/shaders/SAO.js","original":{"line":13,"column":16}},{"generated":{"line":18,"column":10},"source":"viewer/shaders/SAO.js","original":{"line":13,"column":20}},{"generated":{"line":18,"column":12},"source":"viewer/shaders/SAO.js","original":{"line":13,"column":22}},{"generated":{"line":18,"column":15},"source":"viewer/shaders/SAO.js","original":{"line":13,"column":14}},{"name":"value","generated":{"line":19,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":13,"column":27}},{"name":"value","generated":{"line":19,"column":6},"source":"viewer/shaders/SAO.js","original":{"line":13,"column":27}},{"generated":{"line":19,"column":11},"source":"viewer/shaders/SAO.js","original":{"line":13,"column":32}},{"generated":{"line":19,"column":13},"source":"viewer/shaders/SAO.js","original":{"line":13,"column":34}},{"generated":{"line":20,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":13,"column":14}},{"generated":{"line":20,"column":5},"source":"viewer/shaders/SAO.js","original":{"line":10,"column":11}},{"generated":{"line":21,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":14,"column":2}},{"generated":{"line":21,"column":15},"source":"viewer/shaders/SAO.js","original":{"line":14,"column":13}},{"name":"type","generated":{"line":22,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":14,"column":15}},{"name":"type","generated":{"line":22,"column":6},"source":"viewer/shaders/SAO.js","original":{"line":14,"column":15}},{"generated":{"line":22,"column":10},"source":"viewer/shaders/SAO.js","original":{"line":14,"column":19}},{"generated":{"line":22,"column":12},"source":"viewer/shaders/SAO.js","original":{"line":14,"column":21}},{"generated":{"line":22,"column":15},"source":"viewer/shaders/SAO.js","original":{"line":14,"column":13}},{"name":"value","generated":{"line":23,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":14,"column":26}},{"name":"value","generated":{"line":23,"column":6},"source":"viewer/shaders/SAO.js","original":{"line":14,"column":26}},{"generated":{"line":23,"column":11},"source":"viewer/shaders/SAO.js","original":{"line":14,"column":31}},{"generated":{"line":23,"column":13},"source":"viewer/shaders/SAO.js","original":{"line":14,"column":33}},{"generated":{"line":24,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":14,"column":13}},{"generated":{"line":24,"column":5},"source":"viewer/shaders/SAO.js","original":{"line":10,"column":11}},{"generated":{"line":25,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":15,"column":2}},{"generated":{"line":25,"column":12},"source":"viewer/shaders/SAO.js","original":{"line":15,"column":10}},{"name":"type","generated":{"line":26,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":15,"column":12}},{"name":"type","generated":{"line":26,"column":6},"source":"viewer/shaders/SAO.js","original":{"line":15,"column":12}},{"generated":{"line":26,"column":10},"source":"viewer/shaders/SAO.js","original":{"line":15,"column":16}},{"generated":{"line":26,"column":12},"source":"viewer/shaders/SAO.js","original":{"line":15,"column":18}},{"generated":{"line":26,"column":16},"source":"viewer/shaders/SAO.js","original":{"line":15,"column":10}},{"name":"value","generated":{"line":27,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":15,"column":24}},{"name":"value","generated":{"line":27,"column":6},"source":"viewer/shaders/SAO.js","original":{"line":15,"column":24}},{"generated":{"line":27,"column":11},"source":"viewer/shaders/SAO.js","original":{"line":15,"column":29}},{"generated":{"line":27,"column":13},"source":"viewer/shaders/SAO.js","original":{"line":15,"column":31}},{"name":"THREE","generated":{"line":27,"column":17},"source":"viewer/shaders/SAO.js","original":{"line":15,"column":35}},{"generated":{"line":27,"column":22},"source":"viewer/shaders/SAO.js","original":{"line":15,"column":40}},{"name":"Vector2","generated":{"line":27,"column":23},"source":"viewer/shaders/SAO.js","original":{"line":15,"column":41}},{"generated":{"line":27,"column":30},"source":"viewer/shaders/SAO.js","original":{"line":15,"column":31}},{"generated":{"line":27,"column":31},"source":"viewer/shaders/SAO.js","original":{"line":15,"column":50}},{"generated":{"line":27,"column":34},"source":"viewer/shaders/SAO.js","original":{"line":15,"column":31}},{"generated":{"line":27,"column":36},"source":"viewer/shaders/SAO.js","original":{"line":15,"column":55}},{"generated":{"line":27,"column":39},"source":"viewer/shaders/SAO.js","original":{"line":15,"column":31}},{"generated":{"line":28,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":15,"column":10}},{"generated":{"line":28,"column":5},"source":"viewer/shaders/SAO.js","original":{"line":10,"column":11}},{"generated":{"line":29,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":17,"column":2}},{"generated":{"line":29,"column":18},"source":"viewer/shaders/SAO.js","original":{"line":17,"column":16}},{"name":"type","generated":{"line":30,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":17,"column":18}},{"name":"type","generated":{"line":30,"column":6},"source":"viewer/shaders/SAO.js","original":{"line":17,"column":18}},{"generated":{"line":30,"column":10},"source":"viewer/shaders/SAO.js","original":{"line":17,"column":22}},{"generated":{"line":30,"column":12},"source":"viewer/shaders/SAO.js","original":{"line":17,"column":24}},{"generated":{"line":30,"column":15},"source":"viewer/shaders/SAO.js","original":{"line":17,"column":16}},{"name":"value","generated":{"line":31,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":17,"column":29}},{"name":"value","generated":{"line":31,"column":6},"source":"viewer/shaders/SAO.js","original":{"line":17,"column":29}},{"generated":{"line":31,"column":11},"source":"viewer/shaders/SAO.js","original":{"line":17,"column":34}},{"generated":{"line":31,"column":13},"source":"viewer/shaders/SAO.js","original":{"line":17,"column":36}},{"generated":{"line":32,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":17,"column":16}},{"generated":{"line":32,"column":5},"source":"viewer/shaders/SAO.js","original":{"line":10,"column":11}},{"generated":{"line":33,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":18,"column":2}},{"generated":{"line":33,"column":17},"source":"viewer/shaders/SAO.js","original":{"line":18,"column":15}},{"name":"type","generated":{"line":34,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":18,"column":17}},{"name":"type","generated":{"line":34,"column":6},"source":"viewer/shaders/SAO.js","original":{"line":18,"column":17}},{"generated":{"line":34,"column":10},"source":"viewer/shaders/SAO.js","original":{"line":18,"column":21}},{"generated":{"line":34,"column":12},"source":"viewer/shaders/SAO.js","original":{"line":18,"column":23}},{"generated":{"line":34,"column":15},"source":"viewer/shaders/SAO.js","original":{"line":18,"column":15}},{"name":"value","generated":{"line":35,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":18,"column":28}},{"name":"value","generated":{"line":35,"column":6},"source":"viewer/shaders/SAO.js","original":{"line":18,"column":28}},{"generated":{"line":35,"column":11},"source":"viewer/shaders/SAO.js","original":{"line":18,"column":33}},{"generated":{"line":35,"column":13},"source":"viewer/shaders/SAO.js","original":{"line":18,"column":35}},{"generated":{"line":36,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":18,"column":15}},{"generated":{"line":36,"column":5},"source":"viewer/shaders/SAO.js","original":{"line":10,"column":11}},{"generated":{"line":37,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":19,"column":2}},{"generated":{"line":37,"column":30},"source":"viewer/shaders/SAO.js","original":{"line":19,"column":28}},{"name":"type","generated":{"line":38,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":19,"column":30}},{"name":"type","generated":{"line":38,"column":6},"source":"viewer/shaders/SAO.js","original":{"line":19,"column":30}},{"generated":{"line":38,"column":10},"source":"viewer/shaders/SAO.js","original":{"line":19,"column":34}},{"generated":{"line":38,"column":12},"source":"viewer/shaders/SAO.js","original":{"line":19,"column":36}},{"generated":{"line":38,"column":16},"source":"viewer/shaders/SAO.js","original":{"line":19,"column":28}},{"name":"value","generated":{"line":39,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":19,"column":42}},{"name":"value","generated":{"line":39,"column":6},"source":"viewer/shaders/SAO.js","original":{"line":19,"column":42}},{"generated":{"line":39,"column":11},"source":"viewer/shaders/SAO.js","original":{"line":19,"column":47}},{"generated":{"line":39,"column":13},"source":"viewer/shaders/SAO.js","original":{"line":19,"column":49}},{"name":"THREE","generated":{"line":39,"column":17},"source":"viewer/shaders/SAO.js","original":{"line":19,"column":53}},{"generated":{"line":39,"column":22},"source":"viewer/shaders/SAO.js","original":{"line":19,"column":58}},{"name":"Matrix4","generated":{"line":39,"column":23},"source":"viewer/shaders/SAO.js","original":{"line":19,"column":59}},{"generated":{"line":39,"column":30},"source":"viewer/shaders/SAO.js","original":{"line":19,"column":49}},{"generated":{"line":40,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":19,"column":28}},{"generated":{"line":40,"column":5},"source":"viewer/shaders/SAO.js","original":{"line":10,"column":11}},{"generated":{"line":41,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":20,"column":2}},{"generated":{"line":41,"column":37},"source":"viewer/shaders/SAO.js","original":{"line":20,"column":35}},{"name":"type","generated":{"line":42,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":20,"column":37}},{"name":"type","generated":{"line":42,"column":6},"source":"viewer/shaders/SAO.js","original":{"line":20,"column":37}},{"generated":{"line":42,"column":10},"source":"viewer/shaders/SAO.js","original":{"line":20,"column":41}},{"generated":{"line":42,"column":12},"source":"viewer/shaders/SAO.js","original":{"line":20,"column":43}},{"generated":{"line":42,"column":16},"source":"viewer/shaders/SAO.js","original":{"line":20,"column":35}},{"name":"value","generated":{"line":43,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":20,"column":49}},{"name":"value","generated":{"line":43,"column":6},"source":"viewer/shaders/SAO.js","original":{"line":20,"column":49}},{"generated":{"line":43,"column":11},"source":"viewer/shaders/SAO.js","original":{"line":20,"column":54}},{"generated":{"line":43,"column":13},"source":"viewer/shaders/SAO.js","original":{"line":20,"column":56}},{"name":"THREE","generated":{"line":43,"column":17},"source":"viewer/shaders/SAO.js","original":{"line":20,"column":60}},{"generated":{"line":43,"column":22},"source":"viewer/shaders/SAO.js","original":{"line":20,"column":65}},{"name":"Matrix4","generated":{"line":43,"column":23},"source":"viewer/shaders/SAO.js","original":{"line":20,"column":66}},{"generated":{"line":43,"column":30},"source":"viewer/shaders/SAO.js","original":{"line":20,"column":56}},{"generated":{"line":44,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":20,"column":35}},{"generated":{"line":44,"column":5},"source":"viewer/shaders/SAO.js","original":{"line":10,"column":11}},{"generated":{"line":45,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":22,"column":2}},{"generated":{"line":45,"column":13},"source":"viewer/shaders/SAO.js","original":{"line":22,"column":11}},{"name":"type","generated":{"line":46,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":22,"column":13}},{"name":"type","generated":{"line":46,"column":6},"source":"viewer/shaders/SAO.js","original":{"line":22,"column":13}},{"generated":{"line":46,"column":10},"source":"viewer/shaders/SAO.js","original":{"line":22,"column":17}},{"generated":{"line":46,"column":12},"source":"viewer/shaders/SAO.js","original":{"line":22,"column":19}},{"generated":{"line":46,"column":15},"source":"viewer/shaders/SAO.js","original":{"line":22,"column":11}},{"name":"value","generated":{"line":47,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":22,"column":24}},{"name":"value","generated":{"line":47,"column":6},"source":"viewer/shaders/SAO.js","original":{"line":22,"column":24}},{"generated":{"line":47,"column":11},"source":"viewer/shaders/SAO.js","original":{"line":22,"column":29}},{"generated":{"line":47,"column":13},"source":"viewer/shaders/SAO.js","original":{"line":22,"column":31}},{"generated":{"line":48,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":22,"column":11}},{"generated":{"line":48,"column":5},"source":"viewer/shaders/SAO.js","original":{"line":10,"column":11}},{"generated":{"line":49,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":23,"column":2}},{"generated":{"line":49,"column":17},"source":"viewer/shaders/SAO.js","original":{"line":23,"column":15}},{"name":"type","generated":{"line":50,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":23,"column":17}},{"name":"type","generated":{"line":50,"column":6},"source":"viewer/shaders/SAO.js","original":{"line":23,"column":17}},{"generated":{"line":50,"column":10},"source":"viewer/shaders/SAO.js","original":{"line":23,"column":21}},{"generated":{"line":50,"column":12},"source":"viewer/shaders/SAO.js","original":{"line":23,"column":23}},{"generated":{"line":50,"column":15},"source":"viewer/shaders/SAO.js","original":{"line":23,"column":15}},{"name":"value","generated":{"line":51,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":23,"column":28}},{"name":"value","generated":{"line":51,"column":6},"source":"viewer/shaders/SAO.js","original":{"line":23,"column":28}},{"generated":{"line":51,"column":11},"source":"viewer/shaders/SAO.js","original":{"line":23,"column":33}},{"generated":{"line":51,"column":13},"source":"viewer/shaders/SAO.js","original":{"line":23,"column":35}},{"generated":{"line":52,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":23,"column":15}},{"generated":{"line":52,"column":5},"source":"viewer/shaders/SAO.js","original":{"line":10,"column":11}},{"generated":{"line":53,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":24,"column":2}},{"generated":{"line":53,"column":12},"source":"viewer/shaders/SAO.js","original":{"line":24,"column":10}},{"name":"type","generated":{"line":54,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":24,"column":12}},{"name":"type","generated":{"line":54,"column":6},"source":"viewer/shaders/SAO.js","original":{"line":24,"column":12}},{"generated":{"line":54,"column":10},"source":"viewer/shaders/SAO.js","original":{"line":24,"column":16}},{"generated":{"line":54,"column":12},"source":"viewer/shaders/SAO.js","original":{"line":24,"column":18}},{"generated":{"line":54,"column":15},"source":"viewer/shaders/SAO.js","original":{"line":24,"column":10}},{"name":"value","generated":{"line":55,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":24,"column":23}},{"name":"value","generated":{"line":55,"column":6},"source":"viewer/shaders/SAO.js","original":{"line":24,"column":23}},{"generated":{"line":55,"column":11},"source":"viewer/shaders/SAO.js","original":{"line":24,"column":28}},{"generated":{"line":55,"column":13},"source":"viewer/shaders/SAO.js","original":{"line":24,"column":30}},{"generated":{"line":56,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":24,"column":10}},{"generated":{"line":56,"column":5},"source":"viewer/shaders/SAO.js","original":{"line":10,"column":11}},{"generated":{"line":57,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":26,"column":2}},{"generated":{"line":57,"column":21},"source":"viewer/shaders/SAO.js","original":{"line":26,"column":19}},{"name":"type","generated":{"line":58,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":26,"column":21}},{"name":"type","generated":{"line":58,"column":6},"source":"viewer/shaders/SAO.js","original":{"line":26,"column":21}},{"generated":{"line":58,"column":10},"source":"viewer/shaders/SAO.js","original":{"line":26,"column":25}},{"generated":{"line":58,"column":12},"source":"viewer/shaders/SAO.js","original":{"line":26,"column":27}},{"generated":{"line":58,"column":15},"source":"viewer/shaders/SAO.js","original":{"line":26,"column":19}},{"name":"value","generated":{"line":59,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":26,"column":32}},{"name":"value","generated":{"line":59,"column":6},"source":"viewer/shaders/SAO.js","original":{"line":26,"column":32}},{"generated":{"line":59,"column":11},"source":"viewer/shaders/SAO.js","original":{"line":26,"column":37}},{"generated":{"line":59,"column":13},"source":"viewer/shaders/SAO.js","original":{"line":26,"column":39}},{"generated":{"line":60,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":26,"column":19}},{"generated":{"line":60,"column":5},"source":"viewer/shaders/SAO.js","original":{"line":10,"column":11}},{"generated":{"line":61,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":27,"column":2}},{"generated":{"line":61,"column":20},"source":"viewer/shaders/SAO.js","original":{"line":27,"column":18}},{"name":"type","generated":{"line":62,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":27,"column":20}},{"name":"type","generated":{"line":62,"column":6},"source":"viewer/shaders/SAO.js","original":{"line":27,"column":20}},{"generated":{"line":62,"column":10},"source":"viewer/shaders/SAO.js","original":{"line":27,"column":24}},{"generated":{"line":62,"column":12},"source":"viewer/shaders/SAO.js","original":{"line":27,"column":26}},{"generated":{"line":62,"column":15},"source":"viewer/shaders/SAO.js","original":{"line":27,"column":18}},{"name":"value","generated":{"line":63,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":27,"column":31}},{"name":"value","generated":{"line":63,"column":6},"source":"viewer/shaders/SAO.js","original":{"line":27,"column":31}},{"generated":{"line":63,"column":11},"source":"viewer/shaders/SAO.js","original":{"line":27,"column":36}},{"generated":{"line":63,"column":13},"source":"viewer/shaders/SAO.js","original":{"line":27,"column":38}},{"generated":{"line":64,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":27,"column":18}},{"generated":{"line":64,"column":5},"source":"viewer/shaders/SAO.js","original":{"line":10,"column":11}},{"generated":{"line":65,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":28,"column":2}},{"generated":{"line":65,"column":18},"source":"viewer/shaders/SAO.js","original":{"line":28,"column":16}},{"name":"type","generated":{"line":66,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":28,"column":18}},{"name":"type","generated":{"line":66,"column":6},"source":"viewer/shaders/SAO.js","original":{"line":28,"column":18}},{"generated":{"line":66,"column":10},"source":"viewer/shaders/SAO.js","original":{"line":28,"column":22}},{"generated":{"line":66,"column":12},"source":"viewer/shaders/SAO.js","original":{"line":28,"column":24}},{"generated":{"line":66,"column":15},"source":"viewer/shaders/SAO.js","original":{"line":28,"column":16}},{"name":"value","generated":{"line":67,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":28,"column":29}},{"name":"value","generated":{"line":67,"column":6},"source":"viewer/shaders/SAO.js","original":{"line":28,"column":29}},{"generated":{"line":67,"column":11},"source":"viewer/shaders/SAO.js","original":{"line":28,"column":34}},{"generated":{"line":67,"column":13},"source":"viewer/shaders/SAO.js","original":{"line":28,"column":36}},{"generated":{"line":68,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":28,"column":16}},{"generated":{"line":69,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":10,"column":11}},{"generated":{"line":69,"column":3},"source":"viewer/shaders/SAO.js","original":{"line":1,"column":18}},{"name":"vertexShader","generated":{"line":70,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":30,"column":1}},{"name":"vertexShader","generated":{"line":70,"column":2},"source":"viewer/shaders/SAO.js","original":{"line":30,"column":1}},{"generated":{"line":70,"column":14},"source":"viewer/shaders/SAO.js","original":{"line":30,"column":13}},{"generated":{"line":70,"column":16},"source":"viewer/shaders/SAO.js","original":{"line":30,"column":15}},{"generated":{"line":70,"column":17},"source":"viewer/shaders/SAO.js","original":{"line":31,"column":2}},{"generated":{"line":70,"column":36},"source":"viewer/shaders/SAO.js","original":{"line":30,"column":15}},{"generated":{"line":70,"column":38},"source":"viewer/shaders/SAO.js","original":{"line":33,"column":2}},{"generated":{"line":70,"column":53},"source":"viewer/shaders/SAO.js","original":{"line":30,"column":15}},{"generated":{"line":70,"column":55},"source":"viewer/shaders/SAO.js","original":{"line":34,"column":2}},{"generated":{"line":70,"column":67},"source":"viewer/shaders/SAO.js","original":{"line":30,"column":15}},{"generated":{"line":70,"column":69},"source":"viewer/shaders/SAO.js","original":{"line":35,"column":2}},{"generated":{"line":70,"column":145},"source":"viewer/shaders/SAO.js","original":{"line":30,"column":15}},{"generated":{"line":70,"column":147},"source":"viewer/shaders/SAO.js","original":{"line":36,"column":2}},{"generated":{"line":70,"column":150},"source":"viewer/shaders/SAO.js","original":{"line":30,"column":15}},{"name":"join","generated":{"line":70,"column":152},"source":"viewer/shaders/SAO.js","original":{"line":38,"column":3}},{"generated":{"line":70,"column":156},"source":"viewer/shaders/SAO.js","original":{"line":30,"column":15}},{"generated":{"line":70,"column":157},"source":"viewer/shaders/SAO.js","original":{"line":38,"column":9}},{"generated":{"line":70,"column":161},"source":"viewer/shaders/SAO.js","original":{"line":30,"column":15}},{"generated":{"line":70,"column":162},"source":"viewer/shaders/SAO.js","original":{"line":1,"column":18}},{"name":"fragmentShader","generated":{"line":71,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":1}},{"name":"fragmentShader","generated":{"line":71,"column":2},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":1}},{"generated":{"line":71,"column":16},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":15}},{"generated":{"line":71,"column":18},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":19},"source":"viewer/shaders/SAO.js","original":{"line":40,"column":2}},{"generated":{"line":71,"column":38},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":40},"source":"viewer/shaders/SAO.js","original":{"line":42,"column":2}},{"generated":{"line":71,"column":59},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":61},"source":"viewer/shaders/SAO.js","original":{"line":44,"column":2}},{"generated":{"line":71,"column":87},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":89},"source":"viewer/shaders/SAO.js","original":{"line":45,"column":2}},{"generated":{"line":71,"column":118},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":120},"source":"viewer/shaders/SAO.js","original":{"line":46,"column":2}},{"generated":{"line":71,"column":128},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":130},"source":"viewer/shaders/SAO.js","original":{"line":48,"column":2}},{"generated":{"line":71,"column":157},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":159},"source":"viewer/shaders/SAO.js","original":{"line":50,"column":2}},{"generated":{"line":71,"column":184},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":186},"source":"viewer/shaders/SAO.js","original":{"line":51,"column":2}},{"generated":{"line":71,"column":214},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":216},"source":"viewer/shaders/SAO.js","original":{"line":52,"column":2}},{"generated":{"line":71,"column":224},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":226},"source":"viewer/shaders/SAO.js","original":{"line":54,"column":2}},{"generated":{"line":71,"column":253},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":255},"source":"viewer/shaders/SAO.js","original":{"line":55,"column":2}},{"generated":{"line":71,"column":281},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":283},"source":"viewer/shaders/SAO.js","original":{"line":56,"column":2}},{"generated":{"line":71,"column":321},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":323},"source":"viewer/shaders/SAO.js","original":{"line":57,"column":2}},{"generated":{"line":71,"column":368},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":370},"source":"viewer/shaders/SAO.js","original":{"line":59,"column":2}},{"generated":{"line":71,"column":392},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":394},"source":"viewer/shaders/SAO.js","original":{"line":60,"column":2}},{"generated":{"line":71,"column":420},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":422},"source":"viewer/shaders/SAO.js","original":{"line":61,"column":2}},{"generated":{"line":71,"column":443},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":445},"source":"viewer/shaders/SAO.js","original":{"line":62,"column":2}},{"generated":{"line":71,"column":474},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":476},"source":"viewer/shaders/SAO.js","original":{"line":63,"column":2}},{"generated":{"line":71,"column":506},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":508},"source":"viewer/shaders/SAO.js","original":{"line":64,"column":2}},{"generated":{"line":71,"column":528},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":530},"source":"viewer/shaders/SAO.js","original":{"line":65,"column":2}},{"generated":{"line":71,"column":557},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":559},"source":"viewer/shaders/SAO.js","original":{"line":67,"column":2}},{"generated":{"line":71,"column":574},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":576},"source":"viewer/shaders/SAO.js","original":{"line":69,"column":2}},{"generated":{"line":71,"column":596},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":598},"source":"viewer/shaders/SAO.js","original":{"line":71,"column":2}},{"generated":{"line":71,"column":654},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":656},"source":"viewer/shaders/SAO.js","original":{"line":72,"column":2}},{"generated":{"line":71,"column":683},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":685},"source":"viewer/shaders/SAO.js","original":{"line":73,"column":2}},{"generated":{"line":71,"column":722},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":724},"source":"viewer/shaders/SAO.js","original":{"line":74,"column":2}},{"generated":{"line":71,"column":732},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":734},"source":"viewer/shaders/SAO.js","original":{"line":75,"column":2}},{"generated":{"line":71,"column":756},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":758},"source":"viewer/shaders/SAO.js","original":{"line":76,"column":2}},{"generated":{"line":71,"column":767},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":769},"source":"viewer/shaders/SAO.js","original":{"line":77,"column":2}},{"generated":{"line":71,"column":772},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":774},"source":"viewer/shaders/SAO.js","original":{"line":79,"column":2}},{"generated":{"line":71,"column":824},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":826},"source":"viewer/shaders/SAO.js","original":{"line":80,"column":2}},{"generated":{"line":71,"column":851},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":853},"source":"viewer/shaders/SAO.js","original":{"line":81,"column":2}},{"generated":{"line":71,"column":920},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":922},"source":"viewer/shaders/SAO.js","original":{"line":82,"column":2}},{"generated":{"line":71,"column":930},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":932},"source":"viewer/shaders/SAO.js","original":{"line":83,"column":2}},{"generated":{"line":71,"column":980},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":982},"source":"viewer/shaders/SAO.js","original":{"line":84,"column":2}},{"generated":{"line":71,"column":991},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":993},"source":"viewer/shaders/SAO.js","original":{"line":85,"column":2}},{"generated":{"line":71,"column":996},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":998},"source":"viewer/shaders/SAO.js","original":{"line":87,"column":2}},{"generated":{"line":71,"column":1040},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":1042},"source":"viewer/shaders/SAO.js","original":{"line":88,"column":2}},{"generated":{"line":71,"column":1072},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":1074},"source":"viewer/shaders/SAO.js","original":{"line":89,"column":2}},{"generated":{"line":71,"column":1140},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":1142},"source":"viewer/shaders/SAO.js","original":{"line":90,"column":2}},{"generated":{"line":71,"column":1150},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":1152},"source":"viewer/shaders/SAO.js","original":{"line":91,"column":2}},{"generated":{"line":71,"column":1219},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":1221},"source":"viewer/shaders/SAO.js","original":{"line":92,"column":2}},{"generated":{"line":71,"column":1230},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":1232},"source":"viewer/shaders/SAO.js","original":{"line":93,"column":2}},{"generated":{"line":71,"column":1235},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":1237},"source":"viewer/shaders/SAO.js","original":{"line":95,"column":2}},{"generated":{"line":71,"column":1337},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":1339},"source":"viewer/shaders/SAO.js","original":{"line":96,"column":2}},{"generated":{"line":71,"column":1424},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":1426},"source":"viewer/shaders/SAO.js","original":{"line":97,"column":2}},{"generated":{"line":71,"column":1508},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":1510},"source":"viewer/shaders/SAO.js","original":{"line":98,"column":2}},{"generated":{"line":71,"column":1552},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":1554},"source":"viewer/shaders/SAO.js","original":{"line":100,"column":2}},{"generated":{"line":71,"column":1617},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":1619},"source":"viewer/shaders/SAO.js","original":{"line":101,"column":2}},{"generated":{"line":71,"column":1622},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":1624},"source":"viewer/shaders/SAO.js","original":{"line":103,"column":2}},{"generated":{"line":71,"column":1706},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":1708},"source":"viewer/shaders/SAO.js","original":{"line":104,"column":2}},{"generated":{"line":71,"column":1734},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":1736},"source":"viewer/shaders/SAO.js","original":{"line":105,"column":2}},{"generated":{"line":71,"column":1808},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":1810},"source":"viewer/shaders/SAO.js","original":{"line":106,"column":2}},{"generated":{"line":71,"column":1818},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":1820},"source":"viewer/shaders/SAO.js","original":{"line":107,"column":2}},{"generated":{"line":71,"column":1895},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":1897},"source":"viewer/shaders/SAO.js","original":{"line":108,"column":2}},{"generated":{"line":71,"column":1906},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":1908},"source":"viewer/shaders/SAO.js","original":{"line":109,"column":2}},{"generated":{"line":71,"column":1911},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":1913},"source":"viewer/shaders/SAO.js","original":{"line":111,"column":2}},{"generated":{"line":71,"column":1945},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":1947},"source":"viewer/shaders/SAO.js","original":{"line":112,"column":2}},{"generated":{"line":71,"column":1990},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":1992},"source":"viewer/shaders/SAO.js","original":{"line":114,"column":2}},{"generated":{"line":71,"column":2116},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":2118},"source":"viewer/shaders/SAO.js","original":{"line":115,"column":2}},{"generated":{"line":71,"column":2178},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":2180},"source":"viewer/shaders/SAO.js","original":{"line":116,"column":2}},{"generated":{"line":71,"column":2224},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":2226},"source":"viewer/shaders/SAO.js","original":{"line":117,"column":2}},{"generated":{"line":71,"column":2297},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":2299},"source":"viewer/shaders/SAO.js","original":{"line":119,"column":2}},{"generated":{"line":71,"column":2461},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":2463},"source":"viewer/shaders/SAO.js","original":{"line":120,"column":2}},{"generated":{"line":71,"column":2466},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":2468},"source":"viewer/shaders/SAO.js","original":{"line":122,"column":2}},{"generated":{"line":71,"column":2506},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":2508},"source":"viewer/shaders/SAO.js","original":{"line":123,"column":2}},{"generated":{"line":71,"column":2583},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":2585},"source":"viewer/shaders/SAO.js","original":{"line":124,"column":2}},{"generated":{"line":71,"column":2644},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":2646},"source":"viewer/shaders/SAO.js","original":{"line":126,"column":2}},{"generated":{"line":71,"column":2711},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":2713},"source":"viewer/shaders/SAO.js","original":{"line":127,"column":2}},{"generated":{"line":71,"column":2769},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":2771},"source":"viewer/shaders/SAO.js","original":{"line":128,"column":2}},{"generated":{"line":71,"column":2818},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":2820},"source":"viewer/shaders/SAO.js","original":{"line":129,"column":2}},{"generated":{"line":71,"column":2886},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":2888},"source":"viewer/shaders/SAO.js","original":{"line":130,"column":2}},{"generated":{"line":71,"column":2956},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":2958},"source":"viewer/shaders/SAO.js","original":{"line":132,"column":2}},{"generated":{"line":71,"column":3030},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":3032},"source":"viewer/shaders/SAO.js","original":{"line":133,"column":2}},{"generated":{"line":71,"column":3080},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":3082},"source":"viewer/shaders/SAO.js","original":{"line":134,"column":2}},{"generated":{"line":71,"column":3145},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":3147},"source":"viewer/shaders/SAO.js","original":{"line":135,"column":2}},{"generated":{"line":71,"column":3175},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":3177},"source":"viewer/shaders/SAO.js","original":{"line":137,"column":2}},{"generated":{"line":71,"column":3205},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":3207},"source":"viewer/shaders/SAO.js","original":{"line":138,"column":2}},{"generated":{"line":71,"column":3232},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":3234},"source":"viewer/shaders/SAO.js","original":{"line":140,"column":2}},{"generated":{"line":71,"column":3278},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":3280},"source":"viewer/shaders/SAO.js","original":{"line":141,"column":2}},{"generated":{"line":71,"column":3350},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":3352},"source":"viewer/shaders/SAO.js","original":{"line":142,"column":2}},{"generated":{"line":71,"column":3377},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":3379},"source":"viewer/shaders/SAO.js","original":{"line":143,"column":2}},{"generated":{"line":71,"column":3403},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":3405},"source":"viewer/shaders/SAO.js","original":{"line":145,"column":2}},{"generated":{"line":71,"column":3450},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":3452},"source":"viewer/shaders/SAO.js","original":{"line":146,"column":2}},{"generated":{"line":71,"column":3496},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":3498},"source":"viewer/shaders/SAO.js","original":{"line":147,"column":2}},{"generated":{"line":71,"column":3512},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":3514},"source":"viewer/shaders/SAO.js","original":{"line":148,"column":2}},{"generated":{"line":71,"column":3519},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":3521},"source":"viewer/shaders/SAO.js","original":{"line":150,"column":2}},{"generated":{"line":71,"column":3569},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":3571},"source":"viewer/shaders/SAO.js","original":{"line":151,"column":2}},{"generated":{"line":71,"column":3655},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":3657},"source":"viewer/shaders/SAO.js","original":{"line":152,"column":2}},{"generated":{"line":71,"column":3750},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":3752},"source":"viewer/shaders/SAO.js","original":{"line":153,"column":2}},{"generated":{"line":71,"column":3773},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":3775},"source":"viewer/shaders/SAO.js","original":{"line":154,"column":2}},{"generated":{"line":71,"column":3779},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":3781},"source":"viewer/shaders/SAO.js","original":{"line":156,"column":2}},{"generated":{"line":71,"column":3815},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":3817},"source":"viewer/shaders/SAO.js","original":{"line":158,"column":2}},{"generated":{"line":71,"column":3868},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":3870},"source":"viewer/shaders/SAO.js","original":{"line":159,"column":2}},{"generated":{"line":71,"column":3873},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":3875},"source":"viewer/shaders/SAO.js","original":{"line":162,"column":2}},{"generated":{"line":71,"column":3890},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":3892},"source":"viewer/shaders/SAO.js","original":{"line":163,"column":2}},{"generated":{"line":71,"column":3931},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":3933},"source":"viewer/shaders/SAO.js","original":{"line":164,"column":2}},{"generated":{"line":71,"column":3976},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":3978},"source":"viewer/shaders/SAO.js","original":{"line":165,"column":2}},{"generated":{"line":71,"column":3990},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":3992},"source":"viewer/shaders/SAO.js","original":{"line":166,"column":2}},{"generated":{"line":71,"column":3996},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":3998},"source":"viewer/shaders/SAO.js","original":{"line":168,"column":2}},{"generated":{"line":71,"column":4045},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":4047},"source":"viewer/shaders/SAO.js","original":{"line":169,"column":2}},{"generated":{"line":71,"column":4119},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":4121},"source":"viewer/shaders/SAO.js","original":{"line":171,"column":2}},{"generated":{"line":71,"column":4185},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":4187},"source":"viewer/shaders/SAO.js","original":{"line":173,"column":2}},{"generated":{"line":71,"column":4228},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":4230},"source":"viewer/shaders/SAO.js","original":{"line":174,"column":2}},{"generated":{"line":71,"column":4277},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":4279},"source":"viewer/shaders/SAO.js","original":{"line":175,"column":2}},{"generated":{"line":71,"column":4282},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"name":"join","generated":{"line":71,"column":4284},"source":"viewer/shaders/SAO.js","original":{"line":176,"column":3}},{"generated":{"line":71,"column":4288},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":71,"column":4289},"source":"viewer/shaders/SAO.js","original":{"line":176,"column":9}},{"generated":{"line":71,"column":4293},"source":"viewer/shaders/SAO.js","original":{"line":39,"column":17}},{"generated":{"line":72,"column":0},"source":"viewer/shaders/SAO.js","original":{"line":1,"column":18}},{"generated":{"line":72,"column":1},"source":"viewer/shaders/SAO.js","original":{"line":1,"column":0}}],"sources":{"viewer/shaders/SAO.js":"THREE.SAOShader = {\n\tdefines: {\n\t\t'NUM_SAMPLES': 7,\n\t\t'NUM_RINGS': 4,\n\t\t'NORMAL_TEXTURE': 0,\n\t\t'DIFFUSE_TEXTURE': 0,\n\t\t'DEPTH_PACKING': 1,\n\t\t'PERSPECTIVE_CAMERA': 1\n\t},\n\tuniforms: {\n\n\t\t'tDepth': { type: 't', value: null },\n\t\t'tDiffuse': { type: 't', value: null },\n\t\t'tNormal': { type: 't', value: null },\n\t\t'size': { type: 'v2', value: new THREE.Vector2( 512, 512 ) },\n\n\t\t'cameraNear': { type: 'f', value: 1 },\n\t\t'cameraFar': { type: 'f', value: 100 },\n\t\t'cameraProjectionMatrix': { type: 'm4', value: new THREE.Matrix4() },\n\t\t'cameraInverseProjectionMatrix': { type: 'm4', value: new THREE.Matrix4() },\n\n\t\t'scale': { type: 'f', value: 1.0 },\n\t\t'intensity': { type: 'f', value: 0.1 },\n\t\t'bias': { type: 'f', value: 0.5 },\n\n\t\t'minResolution': { type: 'f', value: 0.0 },\n\t\t'kernelRadius': { type: 'f', value: 100.0 },\n\t\t'randomSeed': { type: 'f', value: 0.0 }\n\t},\n\tvertexShader: [\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\t\t\"\tvUv = uv;\",\n\t\t\"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\t\t\"}\"\n\n\t].join( \"\\n\" ),\n\tfragmentShader: [\n\t\t\"#include <common>\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"#if DIFFUSE_TEXTURE == 1\",\n\t\t\"uniform sampler2D tDiffuse;\",\n\t\t\"#endif\",\n\n\t\t\"uniform sampler2D tDepth;\",\n\n\t\t\"#if NORMAL_TEXTURE == 1\",\n\t\t\"uniform sampler2D tNormal;\",\n\t\t\"#endif\",\n\n\t\t\"uniform float cameraNear;\",\n\t\t\"uniform float cameraFar;\",\n\t\t\"uniform mat4 cameraProjectionMatrix;\",\n\t\t\"uniform mat4 cameraInverseProjectionMatrix;\",\n\n\t\t\"uniform float scale;\",\n\t\t\"uniform float intensity;\",\n\t\t\"uniform float bias;\",\n\t\t\"uniform float kernelRadius;\",\n\t\t\"uniform float minResolution;\",\n\t\t\"uniform vec2 size;\",\n\t\t\"uniform float randomSeed;\",\n\n\t\t\"// RGBA depth\",\n\n\t\t\"#include <packing>\",\n\n\t\t\"vec4 getDefaultColor( const in vec2 screenPosition ) {\",\n\t\t\"\t#if DIFFUSE_TEXTURE == 1\",\n\t\t\"\treturn texture2D( tDiffuse, vUv );\",\n\t\t\"\t#else\",\n\t\t\"\treturn vec4( 1.0 );\",\n\t\t\"\t#endif\",\n\t\t\"}\",\n\n\t\t\"float getDepth( const in vec2 screenPosition ) {\",\n\t\t\"\t#if DEPTH_PACKING == 1\",\n\t\t\"\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );\",\n\t\t\"\t#else\",\n\t\t\"\treturn texture2D( tDepth, screenPosition ).x;\",\n\t\t\"\t#endif\",\n\t\t\"}\",\n\n\t\t\"float getViewZ( const in float depth ) {\",\n\t\t\"\t#if PERSPECTIVE_CAMERA == 1\",\n\t\t\"\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\",\n\t\t\"\t#else\",\n\t\t\"\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\",\n\t\t\"\t#endif\",\n\t\t\"}\",\n\n\t\t\"vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {\",\n\t\t\"\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];\",\n\t\t\"\tvec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );\",\n\t\t\"\tclipPosition *= clipW; // unprojection.\",\n\n\t\t\"\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;\",\n\t\t\"}\",\n\n\t\t\"vec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {\",\n\t\t\"\t#if NORMAL_TEXTURE == 1\",\n\t\t\"\treturn unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );\",\n\t\t\"\t#else\",\n\t\t\"\treturn normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );\",\n\t\t\"\t#endif\",\n\t\t\"}\",\n\n\t\t\"float scaleDividedByCameraFar;\",\n\t\t\"float minResolutionMultipliedByCameraFar;\",\n\n\t\t\"float getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {\",\n\t\t\"\tvec3 viewDelta = sampleViewPosition - centerViewPosition;\",\n\t\t\"\tfloat viewDistance = length( viewDelta );\",\n\t\t\"\tfloat scaledScreenDistance = scaleDividedByCameraFar * viewDistance;\",\n\n\t\t\"\treturn max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - bias) / (1.0 + pow2( scaledScreenDistance ) );\",\n\t\t\"}\",\n\n\t\t\"// moving costly divides into consts\",\n\t\t\"const float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );\",\n\t\t\"const float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );\",\n\n\t\t\"float getAmbientOcclusion( const in vec3 centerViewPosition ) {\",\n\t\t\"\t// precompute some variables require in getOcclusion.\",\n\t\t\"\tscaleDividedByCameraFar = scale / cameraFar;\",\n\t\t\"\tminResolutionMultipliedByCameraFar = minResolution * cameraFar;\",\n\t\t\"\tvec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );\",\n\n\t\t\"\t// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/\",\n\t\t\"\tfloat angle = rand( vUv + randomSeed ) * PI2;\",\n\t\t\"\tvec2 radius = vec2( kernelRadius * INV_NUM_SAMPLES ) / size;\",\n\t\t\"\tvec2 radiusStep = radius;\",\n\n\t\t\"\tfloat occlusionSum = 0.0;\",\n\t\t\"\tfloat weightSum = 0.0;\",\n\n\t\t\"\tfor( int i = 0; i < NUM_SAMPLES; i ++ ) {\",\n\t\t\"\t\tvec2 sampleUv = vUv + vec2( cos( angle ), sin( angle ) ) * radius;\",\n\t\t\"\t\tradius += radiusStep;\",\n\t\t\"\t\tangle += ANGLE_STEP;\",\n\n\t\t\"\t\tfloat sampleDepth = getDepth( sampleUv );\",\n\t\t\"\t\tif( sampleDepth >= ( 1.0 - EPSILON ) ) {\",\n\t\t\"\t\t\tcontinue;\",\n\t\t\"\t\t}\",\n\n\t\t\"\t\tfloat sampleViewZ = getViewZ( sampleDepth );\",\n\t\t\"\t\tvec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );\",\n\t\t\"\t\tocclusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );\",\n\t\t\"\t\tweightSum += 1.0;\",\n\t\t\"\t}\",\n\n\t\t\"\tif( weightSum == 0.0 ) discard;\",\n\n\t\t\"\treturn occlusionSum * ( intensity / weightSum );\",\n\t\t\"}\",\n\n\n\t\t\"void main() {\",\n\t\t\"\tfloat centerDepth = getDepth( vUv );\",\n\t\t\"\tif( centerDepth >= ( 1.0 - EPSILON ) ) {\",\n\t\t\"\t\tdiscard;\",\n\t\t\"\t}\",\n\n\t\t\"\tfloat centerViewZ = getViewZ( centerDepth );\",\n\t\t\"\tvec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );\",\n\n\t\t\"\tfloat ambientOcclusion = getAmbientOcclusion( viewPosition );\",\n\n\t\t\"\tgl_FragColor = getDefaultColor( vUv );\",\n\t\t\"\tgl_FragColor.xyz *=  1.0 - ambientOcclusion;\",\n\t\t\"}\"\n\t].join( \"\\n\" )\n};"},"lineCount":null}},"hash":"9f88c924a8bd1e63b366bfb3c965f4d9","cacheData":{"env":{}}}