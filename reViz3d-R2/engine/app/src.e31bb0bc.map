{"version":3,"sources":["store/index.js","App.js","viewer/sky.js","viewer/utils/OrbitControls.js","viewer/viewerHelper.js","viewer/viewer.js","index.js","../node_modules/parcel-bundler/src/builtins/bundle-url.js","../node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["defaultState","menuIsOpen","project","name","path","environment","selectedObject","scene","rootStore","state","action","type","Object","assign","object","store","toggleMenu","dispatch","updateScene","updateSelectedObject","App","console","log","props","Component","mapStateToProps","menu","mapDispatchToProps","open","Sky","vertexShader","fragmentShader","uniforms","topColor","value","THREE","Color","bottomColor","offset","exponent","skyGeo","SphereBufferGeometry","skyMat","ShaderMaterial","side","BackSide","sky","Mesh","module","exports","require","OrbitControls","domElement","updateExternal","undefined","document","enabled","target","Vector3","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","Math","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ORBIT","MOUSE","ZOOM","MIDDLE","PAN","target0","clone","position0","position","zoom0","zoom","isExternallyControlled","setExternalControl","scope","changeEvent","startEvent","endEvent","STATE","NONE","ROTATE","DOLLY","TOUCH_ROTATE","TOUCH_DOLLY","TOUCH_PAN","EPS","spherical","Spherical","sphericalDelta","scale","panOffset","zoomChanged","theta","phi","phiDelta","thetaDelta","getAngles","getPolarAngle","getAzimuthalAngle","setPolarAngle","angle","forceUpdate","setAzimuthalAngle","setPolarAngleNoForcing","update","setAzimuthalAngleNoForcing","setSyncRotationObject","syncObject","syncRotation","setAngles","updateControls","force","_phi","_theta","rotateLeft","rotateUp","setPhiDelta","setThetaDelta","panLeft","v","distance","te","matrix","elements","set","multiplyScalar","add","panUp","pan","deltaX","deltaY","screenWidth","screenHeight","PerspectiveCamera","sub","targetDistance","length","tan","fov","OrthographicCamera","right","left","top","bottom","warn","dollyIn","dollyScale","max","min","updateProjectionMatrix","dollyOut","reset","copy","dispatchEvent","quat","Quaternion","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","applyQuaternion","radius","x","sin","y","cos","z","lookAt","distanceToSquared","dot","quaternion","setFromVector3","getAutoRotationAngle","makeSafe","setFromSpherical","dispose","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","onKeyDown","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","objectMatrix","setFromMatrixColumn","element","body","clientHeight","clientWidth","handleMouseDownRotate","event","clientX","clientY","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","subVectors","handleMouseMoveDolly","handleMouseMovePan","handleMouseUp","handleMouseWheel","handleKeyDown","keyCode","handleTouchStartRotate","touches","pageX","pageY","handleTouchStartDolly","dx","dy","sqrt","handleTouchStartPan","handleTouchMoveRotate","handleTouchMoveDolly","handleTouchMovePan","handleTouchEnd","preventDefault","button","addEventListener","stopPropagation","prototype","create","EventDispatcher","constructor","defineProperties","center","get","noZoom","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor","viewerHelper","_canvas_id","_controls","canvas","getElementById","externalControls","Scene","camera","offsetWidth","offsetHeight","renderer","WebGLRenderer","antialias","alpha","setSize","setClearColor","setPixelRatio","window","devicePixelRatio","controls","cubeScale","geometry","BoxGeometry","material","MeshBasicMaterial","color","cube","CylinderGeometry","cylinder","animate","bind","requestAnimationFrame","render","OBJLoader","innerWidth","innerHeight","interactiveObjects","Group","getObject","ViewerHelper","gridHelper","GridHelper","raycaster","Raycaster","mouse","INTERSECTED","INTERSECTED_box","INTERSECTED_selected","getState","remove","BoxHelper","setFromCamera","intersects","intersectObjects","children","loader","ReactDOM","hot","accept","focus","remote","Menu","MenuItem","append","label","click","checked","e","popup","getCurrentWindow"],"mappings":"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","file":"src.e31bb0bc.map","sourceRoot":"../../src","sourcesContent":["/* ------------\n\n--------------- */\n\nlet defaultState = {\n    menuIsOpen: true,\n    project: {\n        name: null,\n        path: null\n    },\n    environment: {\n        selectedObject: null,\n        scene: null\n    }\n}\n\nlet rootStore = (state = defaultState, action) => {\n    switch (action.type) {\n        case 'TOGGLE_MENU':\n            let menuIsOpen = !state.menuIsOpen;\n            return Object.assign({}, state, { menuIsOpen });\n\n        case 'UPDATE_SCENE':\n            var environment = Object.assign({}, state.environment, { scene: action.scene });\n            return Object.assign({}, state, { environment });\n\n        case 'UPDATE_SELECTED_OBJECT':\n            var environment = Object.assign({}, state.environment, { selectedObject: action.object });\n            return Object.assign({}, state, { environment });\n        default:\n            return state\n    }\n}\n\nimport { createStore } from \"redux\";\nlet store = createStore(rootStore);\n\n\n/*actions*/\nexport let toggleMenu = () => {\n    store.dispatch({ type: 'TOGGLE_MENU' });\n}\n\nexport let updateScene = (scene) => {\n    store.dispatch({ type: 'UPDATE_SCENE', scene });\n}\n\nexport let updateSelectedObject = (object) => {\n    store.dispatch({ type: 'UPDATE_SELECTED_OBJECT', object });\n}\n//export the store at the end\nexport default store;","import React, { Component } from \"react\";\nimport ReactDOM from 'react-dom';\nimport { AppContainer } from 'react-hot-loader';\nimport logo from \"./icons/logo.svg\";\nimport github from \"./icons/github.svg\";\nimport { shell } from 'electron';\n\nimport \"./app.css\";\nimport { connect } from 'react-redux';\nimport { toggleMenu } from \"./store\";\n\n//import Menu from \"./components/Menu\";\n\nclass App extends Component {\n    /*\n    onClick = () => {\n        toggleMenu();\n    }*/\n\n    render() {\n        console.log('props', this.props);\n        return (\n            <div >\n                \n            </div >\n        );\n    }\n}\n\nconst mapStateToProps = state => {\n    return { menu: state.menuIsOpen }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        toggleMenu: () => {\n            dispatch({ type: 'TOGGLE_MENU', open: null });\n        }\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(App)\n\n","import * as THREE from 'three';\n\nexport default class Sky {\n\n    getObject() {\n    \n        // SKYDOME\n        var vertexShader = `\n        varying vec3 vWorldPosition;\n\t\t\tvoid main() {\n\t\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\t\t\t\tvWorldPosition = worldPosition.xyz;\n\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n            }\n            `;\n        var fragmentShader = `\n        uniform vec3 topColor;\n\t\t\tuniform vec3 bottomColor;\n\t\t\tuniform float offset;\n\t\t\tuniform float exponent;\n\t\t\tvarying vec3 vWorldPosition;\n\t\t\tvoid main() {\n\t\t\t\tfloat h = normalize( vWorldPosition + offset ).y;\n\t\t\t\tgl_FragColor = vec4( mix( bottomColor, topColor, max( pow( max( h, 0.0 ), exponent ), 0.0 ) ), 1.0 );\n            }\n            `;\n        var uniforms = {\n            topColor: { type: \"c\", value: new THREE.Color(0x606060) },\n            bottomColor: { type: \"c\", value: new THREE.Color(0x212121) },\n            offset: { type: \"f\", value: 400 },\n            exponent: { type: \"f\", value: 1.0 }\n        };\n\n        var skyGeo = new THREE.SphereBufferGeometry(1000, 32, 15);\n\n        var skyMat = new THREE.ShaderMaterial({\n            uniforms: uniforms,\n            vertexShader: vertexShader,\n            fragmentShader: fragmentShader,\n            side: THREE.BackSide\n        });\n\n        var sky = new THREE.Mesh(skyGeo, skyMat);\n        return sky;\n    }\n}","module.exports = function () {\n    /**\n     * @author qiao / https://github.com/qiao\n     * @author mrdoob / http://mrdoob.com\n     * @author alteredq / http://alteredqualia.com/\n     * @author WestLangley / http://github.com/WestLangley\n     * @author erich666 / http://erichaines.com\n     * @author lucascassiano / http://github.com/lucascassiano\n     */\n\n    // This set of controls performs orbiting, dollying (zooming), and panning.\n    // Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by\n    // default).\n    //\n    //    Orbit - left mouse / touch: one finger move    Zoom - middle mouse, or\n    // mousewheel / touch: two finger spread or squish    Pan - right mouse, or\n    // arrow keys / touch: three finter swipe\n\n    /* -- last edit comments\n    this script was changed to support better gets and sets of angles\n    */\n    const THREE = require(\"three\");\n\n    function OrbitControls(object, domElement, updateExternal) {\n\n        this.object = object;\n\n        this.domElement = (domElement !== undefined) ?\n            domElement :\n            document;\n\n        // Set to false to disable this control\n        this.enabled = true;\n\n        // \"target\" sets the location of focus, where the object orbits around\n        this.target = new THREE.Vector3();\n\n        // How far you can dolly in and out ( PerspectiveCamera only )\n        this.minDistance = 0;\n        this.maxDistance = Infinity;\n\n        // How far you can zoom in and out ( OrthographicCamera only )\n        this.minZoom = 0;\n        this.maxZoom = Infinity;\n\n        // How far you can orbit vertically, upper and lower limits. Range is 0 to\n        // Math.PI radians.\n        this.minPolarAngle = 0; // radians\n        this.maxPolarAngle = Math.PI; // radians\n\n        // How far you can orbit horizontally, upper and lower limits. If set, must be a\n        // sub-interval of the interval [ - Math.PI, Math.PI ].\n        this.minAzimuthAngle = -Infinity; // radians\n        this.maxAzimuthAngle = Infinity; // radians\n\n        // Set to true to enable damping (inertia) If damping is enabled, you must call\n        // controls.update() in your animation loop\n        this.enableDamping = false;\n        this.dampingFactor = 0.25;\n\n        // This option actually enables dollying in and out; left as \"zoom\" for\n        // backwards compatibility. Set to false to disable zooming\n        this.enableZoom = true;\n        this.zoomSpeed = 1.0;\n\n        // Set to false to disable rotating\n        this.enableRotate = true;\n        this.rotateSpeed = 1.0;\n\n        // Set to false to disable panning\n        this.enablePan = true;\n        this.keyPanSpeed = 7.0; // pixels moved per arrow key push\n\n        // Set to true to automatically rotate around the target If auto-rotate is\n        // enabled, you must call controls.update() in your animation loop\n        this.autoRotate = false;\n        this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n        // Set to false to disable use of the keys\n        this.enableKeys = true;\n\n        // The four arrow keys\n        this.keys = {\n            LEFT: 37,\n            UP: 38,\n            RIGHT: 39,\n            BOTTOM: 40\n        };\n\n        // Mouse buttons\n        this.mouseButtons = {\n            ORBIT: THREE.MOUSE.LEFT,\n            ZOOM: THREE.MOUSE.MIDDLE,\n            PAN: THREE.MOUSE.RIGHT\n        };\n\n        // for reset\n        this.target0 = this\n            .target\n            .clone();\n        this.position0 = this\n            .object\n            .position\n            .clone();\n        this.zoom0 = this.object.zoom;\n\n        this.updateExternal = updateExternal;\n        this.isExternallyControlled = false;\n\n        this.setExternalControl = function (value = false) {\n            this.isExternallyControlled = value;\n        }\n        //\n        // internals\n        //\n\n        var scope = this;\n\n        var changeEvent = {\n            type: 'change'\n        };\n        var startEvent = {\n            type: 'start'\n        };\n        var endEvent = {\n            type: 'end'\n        };\n\n        var STATE = {\n            NONE: -1,\n            ROTATE: 0,\n            DOLLY: 1,\n            PAN: 2,\n            TOUCH_ROTATE: 3,\n            TOUCH_DOLLY: 4,\n            TOUCH_PAN: 5\n        };\n\n        var state = STATE.NONE;\n\n        var EPS = 0.000001;\n\n        // current position in spherical coordinates\n        var spherical = new THREE.Spherical();\n        var sphericalDelta = new THREE.Spherical();\n\n        var scale = 1;\n        var panOffset = new THREE.Vector3();\n        var zoomChanged = false;\n\n        // Current position in spherical coordinate system.\n        var theta = 0;\n        var phi = 0;\n\n        // Pending changes\n        var phiDelta = 0;\n        var thetaDelta = 0;\n        var scale = 1;\n        var panOffset = new THREE.Vector3();\n        var zoomChanged = false;\n        //---\n        //\n        // public methods\n        //\n\n        this.getAngles = function () {\n            return { phi: spherical.phi, theta: spherical.theta };\n        }\n        \n        this.getPolarAngle = function () {\n            return spherical.phi;\n        };\n\n        this.getAzimuthalAngle = function () {\n            return spherical.theta;\n        };\n\n        this.setPolarAngle = function (angle) {\n            phi = angle;\n            this.forceUpdate();\n        };\n\n        this.setAzimuthalAngle = function (angle) {\n            theta = angle;\n            this.forceUpdate();\n        };\n\n        this.setPolarAngleNoForcing = function (angle) {\n            phi = angle;\n            this.update();\n            //this.forceUpdate();\n        };\n\n        this.setAzimuthalAngleNoForcing = function (angle) {\n            theta = angle;\n            this.update();\n            //this.forceUpdate();\n        };\n\n        this.setSyncRotationObject = function (syncObject) {\n            this.syncObject;\n            if (this.syncObject.syncRotation) {\n                this.syncObject.syncRotation(this.setAngles);\n            }\n        }\n\n        /**\n         * update Orbit Controls\n         * @param {*} force \n         */\n        this.updateControls = function (force = false) {\n            if (force)\n                this.forceUpdate();\n            else\n                this.update();\n        }\n\n        this.setAngles = function (_phi, _theta) {\n            phi = _phi;\n            theta = _theta;\n            this.forceUpdate();\n        }\n\n        this.rotateLeft = function (angle) {\n\n            thetaDelta -= angle;\n        };\n\n        this.rotateUp = function (angle) {\n\n            phiDelta = angle;\n\n        };\n\n        this.setPhiDelta = function (angle) {\n            phiDelta = angle;\n            //this.forceUpdate();\n        };\n\n        this.setThetaDelta = function (angle) {\n            thetaDelta -= angle;\n            //this.forceUpdate();\n        };\n\n        // pass in distance in world space to move left\n        this.panLeft = function () {\n\n            var v = new THREE.Vector3();\n\n            return function panLeft(distance) {\n\n                var te = this.object.matrix.elements;\n\n                // get X column of matrix\n                v.set(te[0], te[1], te[2]);\n                v.multiplyScalar(-distance);\n\n                panOffset.add(v);\n\n            };\n\n        }();\n\n        // pass in distance in world space to move up\n        this.panUp = function () {\n\n            var v = new THREE.Vector3();\n\n            return function panUp(distance) {\n\n                var te = this.object.matrix.elements;\n\n                // get Y column of matrix\n                v.set(te[4], te[5], te[6]);\n                v.multiplyScalar(distance);\n\n                panOffset.add(v);\n\n            };\n\n        }();\n\n        // pass in x,y of change desired in pixel space, right and down are positive\n        this.pan = function (deltaX, deltaY, screenWidth, screenHeight) {\n\n            if (scope.object instanceof THREE.PerspectiveCamera) {\n\n                // perspective\n                var position = scope.object.position;\n                var offset = position\n                    .clone()\n                    .sub(scope.target);\n                var targetDistance = offset.length();\n\n                // half of the fov is center to top of screen\n                targetDistance *= Math.tan((scope.object.fov / 2) * Math.PI / 180.0);\n\n                // we actually don't use screenWidth, since perspective camera is fixed to\n                // screen height\n                scope.panLeft(2 * deltaX * targetDistance / screenHeight);\n                scope.panUp(2 * deltaY * targetDistance / screenHeight);\n\n            } else if (scope.object instanceof THREE.OrthographicCamera) {\n\n                // orthographic\n                scope.panLeft(deltaX * (scope.object.right - scope.object.left) / screenWidth);\n                scope.panUp(deltaY * (scope.object.top - scope.object.bottom) / screenHeight);\n\n            } else {\n\n                // camera neither orthographic or perspective\n                console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\n\n            }\n\n        };\n\n        this.dollyIn = function (dollyScale) {\n\n            if (scope.object instanceof THREE.PerspectiveCamera) {\n\n                scale /= dollyScale;\n\n            } else if (scope.object instanceof THREE.OrthographicCamera) {\n\n                scope.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom * dollyScale));\n                scope\n                    .object\n                    .updateProjectionMatrix();\n                zoomChanged = true;\n\n            } else {\n\n                console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabl' +\n                    'ed.');\n\n            }\n\n        };\n\n        this.dollyOut = function (dollyScale) {\n\n            if (scope.object instanceof THREE.PerspectiveCamera) {\n\n                scale *= dollyScale;\n\n            } else if (scope.object instanceof THREE.OrthographicCamera) {\n\n                scope.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom / dollyScale));\n                scope\n                    .object\n                    .updateProjectionMatrix();\n                zoomChanged = true;\n\n            } else {\n\n                console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabl' +\n                    'ed.');\n\n            }\n\n        };\n\n        this.reset = function () {\n\n            scope\n                .target\n                .copy(scope.target0);\n            scope\n                .object\n                .position\n                .copy(scope.position0);\n            scope.object.zoom = scope.zoom0;\n\n            scope\n                .object\n                .updateProjectionMatrix();\n            scope.dispatchEvent(changeEvent);\n\n            scope.update();\n\n            state = STATE.NONE;\n\n        };\n\n        this.forceUpdate = function () {\n\n            var offset = new THREE.Vector3();\n\n            // so camera.up is the orbit axis\n            var quat = new THREE\n                .Quaternion()\n                .setFromUnitVectors(object.up, new THREE.Vector3(0, 1, 0));\n            var quatInverse = quat\n                .clone()\n                .inverse();\n\n            var lastPosition = new THREE.Vector3();\n            var lastQuaternion = new THREE.Quaternion();\n\n            return function () {\n\n                var position = this.object.position;\n\n                offset\n                    .copy(position)\n                    .sub(this.target);\n\n                // rotate offset to \"y-axis-is-up\" space\n                offset.applyQuaternion(quat);\n\n                // restrict theta to be between desired limits\n                theta = Math.max(this.minAzimuthAngle, Math.min(this.maxAzimuthAngle, theta));\n\n                // restrict phi to be between desired limits\n                phi = Math.max(this.minPolarAngle, Math.min(this.maxPolarAngle, phi));\n\n                // restrict phi to be betwee EPS and PI-EPS\n                phi = Math.max(EPS, Math.min(Math.PI - EPS, phi));\n\n                var radius = offset.length() * scale;\n\n                // restrict radius to be between desired limits\n                radius = Math.max(this.minDistance, Math.min(this.maxDistance, radius));\n\n                // move target to panned location\n                this\n                    .target\n                    .add(panOffset);\n\n                offset.x = radius * Math.sin(phi) * Math.sin(theta);\n                offset.y = radius * Math.cos(phi);\n                offset.z = radius * Math.sin(phi) * Math.cos(theta);\n\n                // rotate offset back to \"camera-up-vector-is-up\" space\n                offset.applyQuaternion(quatInverse);\n\n                position\n                    .copy(this.target)\n                    .add(offset);\n\n                this\n                    .object\n                    .lookAt(this.target);\n\n                if (this.enableDamping === true) {\n\n                    thetaDelta *= (1 - this.dampingFactor);\n                    phiDelta *= (1 - this.dampingFactor);\n\n                } else {\n\n                    thetaDelta = 0;\n                    phiDelta = 0;\n\n                }\n\n                scale = 1;\n                panOffset.set(0, 0, 0);\n\n                //new\n                if (scope.updateExternal && !scope.isExternallyControlled) {\n                    scope.updateExternal(phi, theta);\n                }\n\n                // update condition is: min(camera displacement, camera rotation in radians)^2 >\n                // EPS using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n                if (zoomChanged || lastPosition.distanceToSquared(this.object.position) > EPS || 8 * (1 - lastQuaternion.dot(this.object.quaternion)) > EPS) {\n\n                    lastPosition.copy(this.object.position);\n                    lastQuaternion.copy(this.object.quaternion);\n                    zoomChanged = false;\n\n                    return true;\n\n                }\n\n                return false;\n\n            };\n\n        }();\n\n        // this method is exposed, but perhaps it would be better if we can make it\n        // private...\n        this.update = function () {\n\n            var offset = new THREE.Vector3();\n\n            // so camera.up is the orbit axis\n            var quat = new THREE\n                .Quaternion()\n                .setFromUnitVectors(object.up, new THREE.Vector3(0, 1, 0));\n            var quatInverse = quat\n                .clone()\n                .inverse();\n\n            var lastPosition = new THREE.Vector3();\n            var lastQuaternion = new THREE.Quaternion();\n\n            return function update() {\n\n                var position = scope.object.position;\n\n                offset\n                    .copy(position)\n                    .sub(scope.target);\n\n                // rotate offset to \"y-axis-is-up\" space\n                offset.applyQuaternion(quat);\n\n                // angle from z-axis around y-axis\n                spherical.setFromVector3(offset);\n\n                if (scope.autoRotate && state === STATE.NONE) {\n\n                    rotateLeft(getAutoRotationAngle());\n\n                }\n\n                spherical.theta += sphericalDelta.theta;\n                spherical.phi += sphericalDelta.phi;\n\n                // restrict theta to be between desired limits\n                spherical.theta = Math.max(scope.minAzimuthAngle, Math.min(scope.maxAzimuthAngle, spherical.theta));\n\n                // restrict phi to be between desired limits\n                spherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));\n\n                spherical.makeSafe();\n\n                spherical.radius *= scale;\n\n                // restrict radius to be between desired limits\n                spherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius));\n\n                // move target to panned location\n                scope\n                    .target\n                    .add(panOffset);\n\n                offset.setFromSpherical(spherical);\n\n                // rotate offset back to \"camera-up-vector-is-up\" space\n                offset.applyQuaternion(quatInverse);\n\n                position\n                    .copy(scope.target)\n                    .add(offset);\n\n                scope\n                    .object\n                    .lookAt(scope.target);\n\n                if (scope.enableDamping === true) {\n\n                    sphericalDelta.theta *= (1 - scope.dampingFactor);\n                    sphericalDelta.phi *= (1 - scope.dampingFactor);\n\n                } else {\n\n                    sphericalDelta.set(0, 0, 0);\n\n                }\n\n                scale = 1;\n                panOffset.set(0, 0, 0);\n\n                //new\n                if (scope.updateExternal && !scope.isExternallyControlled) {\n                    scope.updateExternal(spherical.phi, spherical.theta);\n                }\n\n                // update condition is: min(camera displacement, camera rotation in radians)^2 >\n                // EPS using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n                if (zoomChanged || lastPosition.distanceToSquared(scope.object.position) > EPS || 8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\n\n                    scope.dispatchEvent(changeEvent);\n\n                    lastPosition.copy(scope.object.position);\n                    lastQuaternion.copy(scope.object.quaternion);\n                    zoomChanged = false;\n\n                    return true;\n\n                }\n\n                return false;\n\n            };\n\n        }();\n\n        this.dispose = function () {\n\n            scope\n                .domElement\n                .removeEventListener('contextmenu', onContextMenu, false);\n            scope\n                .domElement\n                .removeEventListener('mousedown', onMouseDown, false);\n            scope\n                .domElement\n                .removeEventListener('wheel', onMouseWheel, false);\n\n            scope\n                .domElement\n                .removeEventListener('touchstart', onTouchStart, false);\n            scope\n                .domElement\n                .removeEventListener('touchend', onTouchEnd, false);\n            scope\n                .domElement\n                .removeEventListener('touchmove', onTouchMove, false);\n\n            scope\n                .domElement\n                .removeEventListener('mousemove', onMouseMove, false);\n            scope\n                .domElement\n                .removeEventListener('mouseup', onMouseUp, false);\n\n            scope\n                .domElement\n                .removeEventListener('keydown', onKeyDown, false);\n\n\n            //scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n        };\n\n        var rotateStart = new THREE.Vector2();\n        var rotateEnd = new THREE.Vector2();\n        var rotateDelta = new THREE.Vector2();\n\n        var panStart = new THREE.Vector2();\n        var panEnd = new THREE.Vector2();\n        var panDelta = new THREE.Vector2();\n\n        var dollyStart = new THREE.Vector2();\n        var dollyEnd = new THREE.Vector2();\n        var dollyDelta = new THREE.Vector2();\n\n        function getAutoRotationAngle() {\n\n            return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n        }\n\n        function getZoomScale() {\n\n            return Math.pow(0.95, scope.zoomSpeed);\n\n        }\n\n        function rotateLeft(angle) {\n\n            sphericalDelta.theta -= angle;\n            //new\n            if (scope.updateExternal && !scope.isExternallyControlled) {\n                scope.updateExternal(phi, theta);\n            }\n        }\n\n        function rotateUp(angle) {\n\n            sphericalDelta.phi -= angle;\n            //new\n            if (scope.updateExternal && !scope.isExternallyControlled) {\n                scope.updateExternal(phi, theta);\n            }\n        }\n\n        var panLeft = function () {\n\n            var v = new THREE.Vector3();\n\n            return function panLeft(distance, objectMatrix) {\n\n                v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\n                v.multiplyScalar(-distance);\n\n                panOffset.add(v);\n\n            };\n\n        }();\n\n        var panUp = function () {\n\n            var v = new THREE.Vector3();\n\n            return function panUp(distance, objectMatrix) {\n\n                v.setFromMatrixColumn(objectMatrix, 1); // get Y column of objectMatrix\n                v.multiplyScalar(distance);\n\n                panOffset.add(v);\n\n            };\n\n        }();\n\n        // deltaX and deltaY are in pixels; right and down are positive\n        var pan = function () {\n\n            var offset = new THREE.Vector3();\n\n            return function pan(deltaX, deltaY) {\n\n                var element = scope.domElement === document ?\n                    scope.domElement.body :\n                    scope.domElement;\n\n                if (scope.object instanceof THREE.PerspectiveCamera) {\n\n                    // perspective\n                    var position = scope.object.position;\n                    offset\n                        .copy(position)\n                        .sub(scope.target);\n                    var targetDistance = offset.length();\n\n                    // half of the fov is center to top of screen\n                    targetDistance *= Math.tan((scope.object.fov / 2) * Math.PI / 180.0);\n\n                    // we actually don't use screenWidth, since perspective camera is fixed to\n                    // screen height\n                    panLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);\n                    panUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);\n\n                } else if (scope.object instanceof THREE.OrthographicCamera) {\n\n                    // orthographic\n                    panLeft(deltaX * (scope.object.right - scope.object.left) / scope.object.zoom / element.clientWidth, scope.object.matrix);\n                    panUp(deltaY * (scope.object.top - scope.object.bottom) / scope.object.zoom / element.clientHeight, scope.object.matrix);\n\n                } else {\n\n                    // camera neither orthographic nor perspective\n                    console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\n                    scope.enablePan = false;\n\n                }\n\n            };\n\n        }();\n\n        function dollyIn(dollyScale) {\n\n            if (scope.object instanceof THREE.PerspectiveCamera) {\n\n                scale /= dollyScale;\n\n            } else if (scope.object instanceof THREE.OrthographicCamera) {\n\n                scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\n                scope\n                    .object\n                    .updateProjectionMatrix();\n                zoomChanged = true;\n\n            } else {\n\n                console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabl' +\n                    'ed.');\n                scope.enableZoom = false;\n\n            }\n\n        }\n\n        function dollyOut(dollyScale) {\n\n            if (scope.object instanceof THREE.PerspectiveCamera) {\n\n                scale *= dollyScale;\n\n            } else if (scope.object instanceof THREE.OrthographicCamera) {\n\n                scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\n                scope\n                    .object\n                    .updateProjectionMatrix();\n                zoomChanged = true;\n\n            } else {\n\n                console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabl' +\n                    'ed.');\n                scope.enableZoom = false;\n\n            }\n\n        }\n\n        //\n        // event callbacks - update the object state\n        //\n\n        function handleMouseDownRotate(event) {\n\n            //console.log( 'handleMouseDownRotate' );\n\n            rotateStart.set(event.clientX, event.clientY);\n\n        }\n\n        function handleMouseDownDolly(event) {\n\n            //console.log( 'handleMouseDownDolly' );\n\n            dollyStart.set(event.clientX, event.clientY);\n\n        }\n\n        function handleMouseDownPan(event) {\n\n            //console.log( 'handleMouseDownPan' );\n\n            panStart.set(event.clientX, event.clientY);\n\n        }\n\n        function handleMouseMoveRotate(event) {\n\n            //console.log( 'handleMouseMoveRotate' );\n\n            rotateEnd.set(event.clientX, event.clientY);\n            rotateDelta.subVectors(rotateEnd, rotateStart);\n\n            var element = scope.domElement === document ?\n                scope.domElement.body :\n                scope.domElement;\n\n            // rotating across whole screen goes 360 degrees around\n            rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\n            // rotating up and down along whole screen attempts to go 360, but limited to\n            // 180\n            rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\n            rotateStart.copy(rotateEnd);\n\n            scope.update();\n\n        }\n\n        function handleMouseMoveDolly(event) {\n\n            //console.log( 'handleMouseMoveDolly' );\n\n            dollyEnd.set(event.clientX, event.clientY);\n\n            dollyDelta.subVectors(dollyEnd, dollyStart);\n\n            if (dollyDelta.y > 0) {\n\n                dollyIn(getZoomScale());\n\n            } else if (dollyDelta.y < 0) {\n\n                dollyOut(getZoomScale());\n\n            }\n\n            dollyStart.copy(dollyEnd);\n\n            scope.update();\n\n        }\n\n        function handleMouseMovePan(event) {\n\n            //console.log( 'handleMouseMovePan' );\n\n            panEnd.set(event.clientX, event.clientY);\n\n            panDelta.subVectors(panEnd, panStart);\n\n            pan(panDelta.x, panDelta.y);\n\n            panStart.copy(panEnd);\n\n            scope.update();\n\n        }\n\n        function handleMouseUp(event) {\n\n            //console.log( 'handleMouseUp' );\n\n        }\n\n        function handleMouseWheel(event) {\n\n            //console.log( 'handleMouseWheel' );\n\n            if (event.deltaY < 0) {\n\n                dollyOut(getZoomScale());\n\n            } else if (event.deltaY > 0) {\n\n                dollyIn(getZoomScale());\n\n            }\n\n            scope.update();\n\n        }\n\n        function handleKeyDown(event) {\n\n            //console.log( 'handleKeyDown' );\n\n            switch (event.keyCode) {\n\n                case scope.keys.UP:\n                    pan(0, scope.keyPanSpeed);\n                    scope.update();\n                    break;\n\n                case scope.keys.BOTTOM:\n                    pan(0, -scope.keyPanSpeed);\n                    scope.update();\n                    break;\n\n                case scope.keys.LEFT:\n                    pan(scope.keyPanSpeed, 0);\n                    scope.update();\n                    break;\n\n                case scope.keys.RIGHT:\n                    pan(-scope.keyPanSpeed, 0);\n                    scope.update();\n                    break;\n\n            }\n\n        }\n\n        function handleTouchStartRotate(event) {\n\n            //console.log( 'handleTouchStartRotate' );\n\n            rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n\n        }\n\n        function handleTouchStartDolly(event) {\n\n            //console.log( 'handleTouchStartDolly' );\n\n            var dx = event.touches[0].pageX - event.touches[1].pageX;\n            var dy = event.touches[0].pageY - event.touches[1].pageY;\n\n            var distance = Math.sqrt(dx * dx + dy * dy);\n\n            dollyStart.set(0, distance);\n\n        }\n\n        function handleTouchStartPan(event) {\n\n            //console.log( 'handleTouchStartPan' );\n\n            panStart.set(event.touches[0].pageX, event.touches[0].pageY);\n\n        }\n\n        function handleTouchMoveRotate(event) {\n\n            //console.log( 'handleTouchMoveRotate' );\n\n            rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n            rotateDelta.subVectors(rotateEnd, rotateStart);\n\n            var element = scope.domElement === document ?\n                scope.domElement.body :\n                scope.domElement;\n\n            // rotating across whole screen goes 360 degrees around\n            rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\n            // rotating up and down along whole screen attempts to go 360, but limited to\n            // 180\n            rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\n            rotateStart.copy(rotateEnd);\n\n            scope.update();\n\n        }\n\n        function handleTouchMoveDolly(event) {\n\n            //console.log( 'handleTouchMoveDolly' );\n\n            var dx = event.touches[0].pageX - event.touches[1].pageX;\n            var dy = event.touches[0].pageY - event.touches[1].pageY;\n\n            var distance = Math.sqrt(dx * dx + dy * dy);\n\n            dollyEnd.set(0, distance);\n\n            dollyDelta.subVectors(dollyEnd, dollyStart);\n\n            if (dollyDelta.y > 0) {\n\n                dollyOut(getZoomScale());\n\n            } else if (dollyDelta.y < 0) {\n\n                dollyIn(getZoomScale());\n\n            }\n\n            dollyStart.copy(dollyEnd);\n\n            scope.update();\n\n        }\n\n        function handleTouchMovePan(event) {\n\n            //console.log( 'handleTouchMovePan' );\n\n            panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n\n            panDelta.subVectors(panEnd, panStart);\n\n            pan(panDelta.x, panDelta.y);\n\n            panStart.copy(panEnd);\n\n            scope.update();\n\n        }\n\n        function handleTouchEnd(event) {\n\n            //console.log( 'handleTouchEnd' );\n\n        }\n\n        //\n        // event handlers - FSM: listen for events and reset state\n        //\n\n        function onMouseDown(event) {\n\n            if (scope.enabled === false)\n                return;\n\n            event.preventDefault();\n\n            if (event.button === scope.mouseButtons.ORBIT) {\n\n                if (scope.enableRotate === false)\n                    return;\n\n                handleMouseDownRotate(event);\n\n                state = STATE.ROTATE;\n\n            } else if (event.button === scope.mouseButtons.ZOOM) {\n\n                if (scope.enableZoom === false)\n                    return;\n\n                handleMouseDownDolly(event);\n\n                state = STATE.DOLLY;\n\n            } else if (event.button === scope.mouseButtons.PAN) {\n\n                if (scope.enablePan === false)\n                    return;\n\n                handleMouseDownPan(event);\n\n                state = STATE.PAN;\n\n            }\n\n            if (state !== STATE.NONE) {\n\n                scope\n                    .domElement\n                    .addEventListener('mousemove', onMouseMove, false);\n                scope\n                    .domElement\n                    .addEventListener('mouseup', onMouseUp, false);\n\n                scope.dispatchEvent(startEvent);\n\n            }\n\n        }\n\n        function onMouseMove(event) {\n\n            if (scope.enabled === false)\n                return;\n\n            event.preventDefault();\n\n            if (state === STATE.ROTATE) {\n\n                if (scope.enableRotate === false)\n                    return;\n\n                handleMouseMoveRotate(event);\n\n            } else if (state === STATE.DOLLY) {\n\n                if (scope.enableZoom === false)\n                    return;\n\n                handleMouseMoveDolly(event);\n\n            } else if (state === STATE.PAN) {\n\n                if (scope.enablePan === false)\n                    return;\n\n                handleMouseMovePan(event);\n\n            }\n\n        }\n\n        function onMouseUp(event) {\n\n            if (scope.enabled === false)\n                return;\n\n            handleMouseUp(event);\n\n            document.removeEventListener('mousemove', onMouseMove, false);\n            document.removeEventListener('mouseup', onMouseUp, false);\n\n            scope.dispatchEvent(endEvent);\n\n            state = STATE.NONE;\n\n        }\n\n        function onMouseWheel(event) {\n\n            if (scope.enabled === false || scope.enableZoom === false || (state !== STATE.NONE && state !== STATE.ROTATE))\n                return;\n\n            event.preventDefault();\n            event.stopPropagation();\n\n            handleMouseWheel(event);\n\n            scope.dispatchEvent(startEvent); // not sure why these are here...\n            scope.dispatchEvent(endEvent);\n\n        }\n\n        function onKeyDown(event) {\n\n            if (scope.enabled === false || scope.enableKeys === false || scope.enablePan === false)\n                return;\n\n            handleKeyDown(event);\n\n        }\n\n        function onTouchStart(event) {\n\n            if (scope.enabled === false)\n                return;\n\n            switch (event.touches.length) {\n\n                case 1: // one-fingered touch: rotate\n\n                    if (scope.enableRotate === false)\n                        return;\n\n                    handleTouchStartRotate(event);\n\n                    state = STATE.TOUCH_ROTATE;\n\n                    break;\n\n                case 2: // two-fingered touch: dolly\n\n                    if (scope.enableZoom === false)\n                        return;\n\n                    handleTouchStartDolly(event);\n\n                    state = STATE.TOUCH_DOLLY;\n\n                    break;\n\n                case 3: // three-fingered touch: pan\n\n                    if (scope.enablePan === false)\n                        return;\n\n                    handleTouchStartPan(event);\n\n                    state = STATE.TOUCH_PAN;\n\n                    break;\n\n                default:\n\n                    state = STATE.NONE;\n\n            }\n\n            if (state !== STATE.NONE) {\n\n                scope.dispatchEvent(startEvent);\n\n            }\n\n        }\n\n        function onTouchMove(event) {\n\n            if (scope.enabled === false)\n                return;\n\n            event.preventDefault();\n            event.stopPropagation();\n\n            switch (event.touches.length) {\n\n                case 1: // one-fingered touch: rotate\n\n                    if (scope.enableRotate === false)\n                        return;\n                    if (state !== STATE.TOUCH_ROTATE)\n                        return; // is this needed?...\n\n                    handleTouchMoveRotate(event);\n\n                    break;\n\n                case 2: // two-fingered touch: dolly\n\n                    if (scope.enableZoom === false)\n                        return;\n                    if (state !== STATE.TOUCH_DOLLY)\n                        return; // is this needed?...\n\n                    handleTouchMoveDolly(event);\n\n                    break;\n\n                case 3: // three-fingered touch: pan\n\n                    if (scope.enablePan === false)\n                        return;\n                    if (state !== STATE.TOUCH_PAN)\n                        return; // is this needed?...\n\n                    handleTouchMovePan(event);\n\n                    break;\n\n                default:\n\n                    state = STATE.NONE;\n\n            }\n\n        }\n\n        function onTouchEnd(event) {\n\n            if (scope.enabled === false)\n                return;\n\n            handleTouchEnd(event);\n\n            scope.dispatchEvent(endEvent);\n\n            state = STATE.NONE;\n\n        }\n\n        function onContextMenu(event) {\n\n            event.preventDefault();\n\n        }\n\n        //\n\n        scope\n            .domElement\n            .addEventListener('contextmenu', onContextMenu, false);\n\n        scope\n            .domElement\n            .addEventListener('mousedown', onMouseDown, false);\n        scope\n            .domElement\n            .addEventListener('wheel', onMouseWheel, false);\n\n        scope\n            .domElement\n            .addEventListener('touchstart', onTouchStart, false);\n        scope\n            .domElement\n            .addEventListener('touchend', onTouchEnd, false);\n        scope\n            .domElement\n            .addEventListener('touchmove', onTouchMove, false);\n\n        scope\n            .domElement\n            .addEventListener('keydown', onKeyDown, false);\n\n\n\n        this.update();\n\n    };\n\n    OrbitControls.prototype = Object.create(THREE.EventDispatcher.prototype);\n    OrbitControls.prototype.constructor = OrbitControls;\n\n    Object.defineProperties(OrbitControls.prototype, {\n\n        center: {\n\n            get: function () {\n\n                console.warn('THREE.OrbitControls: .center has been renamed to .target');\n                return this.target;\n\n            }\n\n        },\n\n        // backward compatibility\n\n        noZoom: {\n\n            get: function () {\n\n                console.warn('THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.');\n                return !this.enableZoom;\n\n            },\n\n            set: function (value) {\n\n                console.warn('THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.');\n                this.enableZoom = !value;\n\n            }\n\n        },\n\n        noRotate: {\n\n            get: function () {\n\n                console.warn('THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.');\n                return !this.enableRotate;\n\n            },\n\n            set: function (value) {\n\n                console.warn('THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.');\n                this.enableRotate = !value;\n\n            }\n\n        },\n\n        noPan: {\n\n            get: function () {\n\n                console.warn('THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.');\n                return !this.enablePan;\n\n            },\n\n            set: function (value) {\n\n                console.warn('THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.');\n                this.enablePan = !value;\n\n            }\n\n        },\n\n        noKeys: {\n\n            get: function () {\n\n                console.warn('THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.');\n                return !this.enableKeys;\n\n            },\n\n            set: function (value) {\n\n                console.warn('THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.');\n                this.enableKeys = !value;\n\n            }\n\n        },\n\n        staticMoving: {\n\n            get: function () {\n\n                console.warn('THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping inste' +\n                    'ad.');\n                return !this.enableDamping;\n\n            },\n\n            set: function (value) {\n\n                console.warn('THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping inste' +\n                    'ad.');\n                this.enableDamping = !value;\n\n            }\n\n        },\n\n        dynamicDampingFactor: {\n\n            get: function () {\n\n                console.warn('THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor ' +\n                    'instead.');\n                return this.dampingFactor;\n\n            },\n\n            set: function (value) {\n\n                console.warn('THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor ' +\n                    'instead.');\n                this.dampingFactor = value;\n\n            }\n\n        }\n\n    });\n\n    return OrbitControls;\n};","/*implements the new version of view cube*/\n\nimport * as THREE from \"three\";\n\nvar OrbitControls = require('./utils/OrbitControls.js')(THREE);\n\nexport default class viewerHelper {\n    constructor(_canvas_id, _controls) {\n        this.canvas = document.getElementById(_canvas_id);\n        this.externalControls = _controls;\n\n        this.scene = new THREE.Scene();\n        this.camera = new THREE.PerspectiveCamera(45, this.canvas.offsetWidth / this.canvas.offsetHeight, 0.1, 10000);\n        this.camera.position.set(0, 10, -30)\n        this.camera.lookAt(new THREE.Vector3());\n\n        var renderer = new THREE.WebGLRenderer({ canvas: this.canvas, antialias: false, alpha: true });\n        renderer.setSize(this.canvas.offsetWidth, this.canvas.offsetHeight);\n        renderer.setClearColor(0x000000, 0.0);\n        renderer.setPixelRatio(window.devicePixelRatio);\n\n        this.renderer = renderer;\n\n        this.controls = new OrbitControls(this.camera);\n        this.controls.enableZoom = false;\n        this.controls.enablePan = false;\n\n        var cubeScale = 12;\n        var geometry = new THREE.BoxGeometry(cubeScale, cubeScale, cubeScale);\n        var material = new THREE.MeshBasicMaterial({ color: 0x0000FF });\n        var cube = new THREE.Mesh(geometry, material);\n        cube.name = \"cube1\";\n        //this.scene.add(cube);\n\n        var geometry = new THREE.CylinderGeometry(0.25, 0.25, 10, 6);\n        var material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });\n        var cylinder = new THREE.Mesh(geometry, material);\n        this.scene.add(cylinder);\n\n        var geometry = new THREE.CylinderGeometry(0.25, 0.25, 10, 6);\n        var material = new THREE.MeshBasicMaterial({ color: 0xFF0000 });\n        var cylinder = new THREE.Mesh(geometry, material);\n        this.scene.add(cylinder);\n\n        var geometry = new THREE.CylinderGeometry(0.25, 0.25, 10, 6);\n        var material = new THREE.MeshBasicMaterial({ color: 0x0000FF });\n        var cylinder = new THREE.Mesh(geometry, material);\n        this.scene.add(cylinder);\n\n        this.animate = this.animate.bind(this);\n        this.animate();\n    }\n\n    animate() {\n        requestAnimationFrame(this.animate);\n\n        // update the picking ray with the camera and mouse position\n        //raycaster.setFromCamera(mouse, camera);\n\n        // calculate objects intersecting the picking ray\n        //var intersects = raycaster.intersectObjects(interactiveObjects.children);\n        /*\n                // if there is one (or more) intersections\n                if (intersects.length) {\n                    if (intersects[0].object != INTERSECTED) {\n                        INTERSECTED = intersects[0].object;\n                        if (INTERSECTED) {\n                            //INTERSECTED.currentHex = INTERSECTED.material.color.getHex();\n                            //INTERSECTED.material.color.setHex(0xffff00);\n                        }\n                        else\n                            INTERSECTED = null;\n                    }\n                }\n                else {\n                    if (INTERSECTED)\n                        INTERSECTED = null;\n                }\n        \n                if (INTERSECTED_box) {\n                    INTERSECTED_box.update();\n                }\n        */\n        //console.log(\"angles\", this.externalControls.getAngles());\n        let { phi, theta } = this.externalControls.getAngles();\n        this.controls.setAngles(phi, theta);\n\n        this.renderer.render(this.scene, this.camera);\n    }\n}","import * as THREE from 'three';\n\nimport Sky from \"./sky\";\nimport ViewerHelper from \"./viewerHelper\";\n\nimport store, { toggleMenu, updateScene, updateSelectedObject } from \"../store\";\n\nvar OrbitControls = require('./utils/OrbitControls.js')(THREE);\n\nvar OBJLoader = require('three-obj-loader');\nOBJLoader(THREE);\n\nvar scene = new THREE.Scene();\nvar camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 10000);\ncamera.position.set(0, 10, -30)\ncamera.lookAt(new THREE.Vector3());\nvar canvas = document.getElementById(\"3d-env\");\nvar renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true });\nrenderer.setSize(window.innerWidth, window.innerHeight);\nrenderer.setClearColor(0x000000, 0.0);\nrenderer.setPixelRatio(window.devicePixelRatio);\n\n/* --- for ambiente occlusions\ncomposer = new THREE.EffectComposer( renderer );\n\t\t\t\trenderPass = new THREE.RenderPass( scene, camera );\n\t\t\t\tcomposer.addPass( renderPass );\n\t\t\t\tsaoPass = new THREE.SAOPass( scene, camera, false, true );\n\t\t\t\tsaoPass.renderToScreen = true;\n\t\t\t\tcomposer.addPass( saoPass );\n*/\n\nvar interactiveObjects = new THREE.Group();\nscene.add(interactiveObjects);\n\nvar geometry = new THREE.BoxGeometry(10, 10, 10);\nvar material = new THREE.MeshBasicMaterial({ color: 0x000000 });\nvar cube = new THREE.Mesh(geometry, material);\ncube.name = \"cube1\";\ninteractiveObjects.add(cube);\n\nvar geometry = new THREE.BoxGeometry(5, 5, 5);\nvar material = new THREE.MeshBasicMaterial({ color: 0x00ffFF });\nvar cube = new THREE.Mesh(geometry, material);\ncube.position.y = 7.5;\ncube.name = \"cube2\";\ninteractiveObjects.add(cube);\n\nvar geometry = new THREE.BoxGeometry(5, 5, 5);\nvar material = new THREE.MeshBasicMaterial({ color: 0x00ffFF });\nvar cube = new THREE.Mesh(geometry, material);\ncube.position.y = 15;\ncube.name = \"cube3\";\ninteractiveObjects.add(cube);\n\n//scene.add(cube);\n\nvar controls = new OrbitControls(camera);\nlet sky = new Sky();\nscene.add(sky.getObject(THREE));\n\n//cubeview\nlet viewerHelper = new ViewerHelper(\"viewer-helper\", controls);\n\nvar gridHelper = new THREE.GridHelper(100, 100, 0xaaaaaa, 0x666666);\nscene.add(gridHelper);\n\n//raycast\nvar raycaster = new THREE.Raycaster();\nvar mouse = new THREE.Vector2();\nvar INTERSECTED;\nvar INTERSECTED_box;\nvar INTERSECTED_selected;\n\nfunction onMouseMove(event) {\n    mouse.x = (event.clientX / renderer.domElement.clientWidth) * 2 - 1;\n    mouse.y = - (event.clientY / renderer.domElement.clientHeight) * 2 + 1;\n}\n\nfunction onMouseDown(event) {\n    if (INTERSECTED && event.button == 2) {\n        console.log(event);\n        console.log(INTERSECTED.name);\n    }\n    if (INTERSECTED && event.button == 0) {\n        updateSelectedObject(INTERSECTED);\n        console.log(store.getState().environment);\n        console.log(INTERSECTED.name);\n\n        INTERSECTED_selected = INTERSECTED;\n\n        if (INTERSECTED_box)\n            scene.remove(INTERSECTED_box)\n        INTERSECTED_box = new THREE.BoxHelper(INTERSECTED, 0x55ddff);\n\n        scene.add(INTERSECTED_box);\n    }\n}\n\nwindow.addEventListener('mousemove', onMouseMove, false);\nwindow.addEventListener('mousedown', onMouseDown, false);\n\nfunction animate() {\n    requestAnimationFrame(animate);\n    // update the picking ray with the camera and mouse position\n    raycaster.setFromCamera(mouse, camera);\n\n    // calculate objects intersecting the picking ray\n    var intersects = raycaster.intersectObjects(interactiveObjects.children);\n\n    // if there is one (or more) intersections\n    if (intersects.length) {\n        if (intersects[0].object != INTERSECTED) {\n            INTERSECTED = intersects[0].object;\n            if (INTERSECTED) {\n                //INTERSECTED.currentHex = INTERSECTED.material.color.getHex();\n                //INTERSECTED.material.color.setHex(0xffff00);\n            }\n            else\n                INTERSECTED = null;\n        }\n    }\n    else {\n        if (INTERSECTED)\n            INTERSECTED = null;\n    }\n\n    if (INTERSECTED_box) {\n        INTERSECTED_box.update();\n    }\n\n    renderer.render(scene, camera);\n}\n\n//load obj\n// instantiate a loader\nvar loader = new THREE.OBJLoader();\n/*\n// load a resource\nloader.load(\n    // resource URL\n    'models/monster.obj',\n    // called when resource is loaded\n    function (object) {\n\n        scene.add(object);\n\n    },\n    // called when loading is in progresses\n    function (xhr) {\n\n        console.log((xhr.loaded / xhr.total * 100) + '% loaded');\n\n    },\n    // called when loading has errors\n    function (error) {\n\n        console.log('An error happened');\n\n    }\n);\n*/\nanimate();\n","import React, { Component } from \"react\";\nimport ReactDOM from 'react-dom';\nimport { AppContainer } from 'react-hot-loader';\nimport { Provider } from \"react-redux\";\n\nimport App from \"./App.js\";\nimport \"./index.css\";\n\n\n//export let actions = new Actions(store);\nimport store from \"./store\";\n\nconst render = () => {\n    ReactDOM.render(\n        <AppContainer>\n            <Provider store={store}>\n                <App />\n            </Provider>\n        </AppContainer>,\n        window.document.getElementById('app'));\n}\nif (typeof window !== 'undefined') { render(); }\n\nif (module.hot) {\n    module.hot.accept(render);\n}\n\nwindow.focus();\n\n//execute the viewer\nimport './viewer/viewer.js';\n//let viewer = new Viewer(store);\n\n//Menu\nconst { remote } = require('electron');\nconst { Menu, MenuItem } = remote;\n\nconst menu = new Menu()\nmenu.append(new MenuItem({ label: 'MenuItem1', click() { console.log('item 1 clicked') } }))\nmenu.append(new MenuItem({ type: 'separator' }))\nmenu.append(new MenuItem({ label: 'MenuItem2', type: 'checkbox', checked: true }))\n\nwindow.addEventListener('contextmenu', (e) => {\n    e.preventDefault()\n    menu.popup({ window: remote.getCurrentWindow() })\n}, false);\n\n\n\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}