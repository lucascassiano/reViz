{"version":3,"sources":["store/index.js","controls/Slider2D.js","controls/LineEditor.js","controls/CircularSlider.js","controls/Collapsible.js","controls/index.js","App.js","viewer/sky.js","viewer/grid.js","viewer/utils/OrbitControls.js","viewer/viewerHelper.js","viewer/utils/TransformControls.js","viewer/viewer.js","index.js","../node_modules/parcel-bundler/src/builtins/bundle-url.js","../node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["defaultState","menuIsOpen","project","name","path","environment","selectedObject","scene","rootStore","state","action","type","Object","assign","object","store","toggleMenu","dispatch","updateScene","updateSelectedObject","Slider2D","props","canvas","paper","setup","colorLines","getBoundingClientRect","width","height","center","Point","pathY","Path","strokeColor","start","x","moveTo","lineTo","add","pathX","y","axisX","config","color3","axisY","tool1","Tool","pos","myCircle","Circle","fillColor","onMouseEnter","event","colorHigh","onMouseLeave","onMouseDrag","point","position","onChange","setState","view","draw","React","createRef","current","toFixed","Component","LineEditor","myPath","strokeWidth","strokeCap","points","step","length","circles","i","segment","segments","circle","target","onMouseUp","push","smooth","CircularSlider","radius","bgcircle","color1","circleSize","startPos","line","Line","through","to","arc","Arc","atan","Math","atan2","deg","PI","X","round","sin","Y","cos","halfX","halfY","throughPoint","toPoint","lastSegment","angle","Collapsible","open","container","content","onClickContainer","label","colorText","children","color0","color2","App","window","pos3d","console","log","mapStateToProps","menu","mapDispatchToProps","Sky","vertexShader","fragmentShader","uniforms","topColor","value","THREE","Color","bottomColor","offset","exponent","skyGeo","SphereBufferGeometry","skyMat","ShaderMaterial","side","BackSide","sky","Mesh","LabeledGrid","upVector","color","opacity","text","textColor","textLocation","Vector3","fromArray","marginSize","stepSubDivisions","_drawGrid","up","lookAt","gridGeometry","gridMaterial","mainGridZ","planeFragmentShader","planeGeometry","planeMaterial","subGridGeometry","subGridMaterial","subGridZ","Geometry","LineBasicMaterial","setHex","linewidth","transparent","centerBased","vertices","mainGrid","LineSegments","subGrid","offsetWidth","offsetLength","marginGeometry","strongGridMaterial","margin","_drawNumbering","toggle","traverse","child","visible","material","labels","location","max","remove","sizeLabel","sizeLabel2","xLabelsLeft","xLabelsRight","yLabelsBack","yLabelsFront","_labelStore","Object3D","numbering","labelsFront","labelsSideRight","drawTextOnPlane","clone","set","rotation","z","labelsSideLeft","labelsBack","textVisible","size","context","plane","texture","document","createElement","getContext","font","textAlign","fillStyle","fillText","strokeStyle","strokeText","Texture","needsUpdate","generateMipmaps","magFilter","LinearFilter","minFilter","MeshBasicMaterial","map","alphaTest","PlaneBufferGeometry","doubleSided","overdraw","module","exports","require","OrbitControls","domElement","updateExternal","undefined","enabled","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ORBIT","MOUSE","ZOOM","MIDDLE","PAN","target0","position0","zoom0","zoom","isExternallyControlled","setExternalControl","scope","changeEvent","startEvent","endEvent","STATE","NONE","ROTATE","DOLLY","TOUCH_ROTATE","TOUCH_DOLLY","TOUCH_PAN","EPS","spherical","Spherical","sphericalDelta","scale","panOffset","zoomChanged","theta","phi","phiDelta","thetaDelta","setEnable","enable","getAngles","getPolarAngle","getAzimuthalAngle","setPolarAngle","forceUpdate","setAzimuthalAngle","setPolarAngleNoForcing","update","setAzimuthalAngleNoForcing","setSyncRotationObject","syncObject","syncRotation","setAngles","updateControls","force","_phi","_theta","rotateLeft","rotateUp","setPhiDelta","setThetaDelta","panLeft","v","distance","te","matrix","elements","multiplyScalar","panUp","pan","deltaX","deltaY","screenWidth","screenHeight","PerspectiveCamera","sub","targetDistance","tan","fov","OrthographicCamera","right","left","top","bottom","warn","dollyIn","dollyScale","min","updateProjectionMatrix","dollyOut","reset","copy","dispatchEvent","quat","Quaternion","setFromUnitVectors","quatInverse","inverse","lastPosition","lastQuaternion","applyQuaternion","distanceToSquared","dot","quaternion","setFromVector3","getAutoRotationAngle","makeSafe","setFromSpherical","dispose","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onKeyDown","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","objectMatrix","setFromMatrixColumn","element","body","clientHeight","clientWidth","handleMouseDownRotate","clientX","clientY","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","subVectors","handleMouseMoveDolly","handleMouseMovePan","handleMouseUp","handleMouseWheel","handleKeyDown","keyCode","handleTouchStartRotate","touches","pageX","pageY","handleTouchStartDolly","dx","dy","sqrt","handleTouchStartPan","handleTouchMoveRotate","handleTouchMoveDolly","handleTouchMovePan","handleTouchEnd","preventDefault","button","addEventListener","stopPropagation","prototype","create","EventDispatcher","constructor","defineProperties","get","noZoom","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor","TWEEN","texture_top","texture_right","texture_left","texture_front","texture_back","texture_bottom","texture_shadow","viewerHelper","_canvas_id","_controls","callback","mouseMoving","listenExternal","rect","mouse","INTERSECTED","setViewAngle","createTexturedPlane","front","back","shadow","controllers","c0","createCornerCube","c1","c2","c3","c4","c5","c6","c7","e0","createEdgeCube","e1","e2","e3","e4","e5","e6","e7","e8","e9","e10","e11","f0","createFaceCube","f1","f2","f3","f4","f5","texturePath","DoubleSide","TextureLoader","load","geometry","PlaneGeometry","mesh","externalControls","original","coords","UpdateAngles","tween","Tween","easing","Easing","Quadratic","Out","onUpdate","hoverColor","getElementById","Scene","camera","offsetHeight","renderer","WebGLRenderer","antialias","alpha","preserveDrawingBuffer","failIfMajorPerformanceCaveat","setSize","setClearColor","setPixelRatio","devicePixelRatio","controls","cubeScale","BoxGeometry","cube","AxisSize","axisHelper","AxesHelper","createCube","raycaster","Raycaster","animate","bind","time","requestAnimationFrame","updateMatrixWorld","setFromCamera","intersects","intersectObjects","currentHex","currVisible","getHex","render","c_cube","sizex","sizey","sizez","_x","_y","_z","edgeCube","cornerCube","TransformControls","call","_gizmo","TransformControlsGizmo","_plane","TransformControlsPlane","defineProperty","mouseDownEvent","mouseUpEvent","mode","objectChangeEvent","ray","_tempVector","_tempVector2","_tempQuaternion","_unit","Z","_identityQuaternion","_alignVector","pointStart","pointEnd","rotationAxis","rotationAngle","cameraPosition","cameraQuaternion","cameraScale","parentPosition","parentQuaternion","parentScale","worldPositionStart","worldQuaternionStart","worldScaleStart","worldPosition","worldQuaternion","worldScale","eye","_positionStart","_quaternionStart","_scaleStart","onPointerDown","onPointerHover","onPointerMove","onPointerUp","onContext","attach","detach","axis","propName","defaultValue","propValue","parent","matrixWorld","decompose","normalize","pointerHover","pointer","dragging","intersect","picker","pointerDown","planeIntersect","space","snap","rotationSnap","pointerMove","search","translationSnap","setFromMatrixPosition","d","divide","multiply","ROTATION_SPEED","distanceTo","unit","cross","angleTo","setFromAxisAngle","pointerUp","getPointer","changedTouches","getMode","setMode","setTranslationSnap","setRotationSnap","setSpace","isTransformControls","gizmoMaterial","depthTest","depthWrite","fog","gizmoLineMaterial","matInvisible","matHelper","matRed","matGreen","matBlue","matWhiteTransperent","matYellowTransparent","matCyanTransparent","matMagentaTransparent","matYellow","matLineRed","matLineGreen","matLineBlue","matLineCyan","matLineMagenta","matLineYellow","matLineGray","matLineYellowTransparent","arrowGeometry","CylinderBufferGeometry","scaleHandleGeometry","BoxBufferGeometry","lineGeometry","BufferGeometry","addAttribute","Float32BufferAttribute","CircleGeometry","TranslateHelperGeometry","gizmoTranslate","XYZ","OctahedronBufferGeometry","XY","YZ","XZ","pickerTranslate","helperTranslate","START","END","DELTA","gizmoRotate","E","XYZE","helperRotate","AXIS","pickerRotate","TorusBufferGeometry","gizmoScale","XYZX","XYZY","XYZZ","pickerScale","helperScale","setupGizmo","gizmoMap","gizmo","tag","updateMatrix","tempGeometry","applyMatrix","tempVector","tempEuler","Euler","alignVector","zeroVector","lookAtMatrix","Matrix4","tempQuaternion","tempQuaternion2","identityQuaternion","unitX","unitY","unitZ","helper","handles","concat","handle","eyeDistance","setFromEuler","abs","setFromRotationMatrix","AXIS_HIDE_TRESHOLD","PLANE_HIDE_TRESHOLD","AXIS_FLIP_TRESHOLD","multiplyQuaternions","indexOf","showX","showY","showZ","_opacity","_color","lerp","split","some","a","isTransformControlsGizmo","wireframe","dirVector","tempMatrix","isTransformControlsPlane","OBJLoader","Viewer","getState","INTERSECTED_selected","INTERSECTED_box","BoxHelper","interactiveObjects","innerWidth","innerHeight","sortObjects","Group","tControl","getObject","ViewerHelper","gridHelper","Grid","onload","viewer","ReactDOM","hot","accept","focus","remote","Menu","MenuItem"],"mappings":"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","file":"src.e31bb0bc.map","sourceRoot":"../../src","sourcesContent":["/* ------------\n\n--------------- */\n\nlet defaultState = {\n    menuIsOpen: true,\n    project: {\n        name: null,\n        path: null\n    },\n    environment: {\n        selectedObject: null,\n        scene: null\n    }\n}\n\nlet rootStore = (state = defaultState, action) => {\n    switch (action.type) {\n        case 'TOGGLE_MENU':\n            let menuIsOpen = !state.menuIsOpen;\n            return Object.assign({}, state, { menuIsOpen });\n\n        case 'UPDATE_SCENE':\n            var environment = Object.assign({}, state.environment, { scene: action.scene });\n            return Object.assign({}, state, { environment });\n\n        case 'UPDATE_SELECTED_OBJECT':\n            var environment = Object.assign({}, state.environment, { selectedObject: action.object });\n            return Object.assign({}, state, { environment });\n        default:\n            return state\n    }\n}\n\nimport { createStore } from \"redux\";\nlet store = createStore(rootStore);\n\n\n/*actions*/\nexport let toggleMenu = () => {\n    store.dispatch({ type: 'TOGGLE_MENU' });\n}\n\nexport let updateScene = (scene) => {\n    store.dispatch({ type: 'UPDATE_SCENE', scene });\n}\n\nexport let updateSelectedObject = (object) => {\n    store.dispatch({ type: 'UPDATE_SELECTED_OBJECT', object });\n}\n//export the store at the end\nexport default store;","import React, { Component } from \"react\";\nimport paper from \"paper\";\nimport { config } from './index';\n\nexport default class Slider2D extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            x: 0,\n            y: 0\n        }\n\n        this.canvas = React.createRef();\n        // this.draw();\n    }\n\n    componentDidMount() {\n        // window.addEventListener('mousemove', this.onMouseMove);\n        if (this.canvas.current)\n            this.draw(this.canvas.current);\n    }\n\n    // Create a Paper.js Path to draw a line into it:\n    draw = (canvas) => {\n        paper.setup(canvas);\n        let colorLines = 'rgba(0,0,0,0.1)';\n        let { width, height } = canvas.getBoundingClientRect();\n        let center = new paper.Point(width / 2, height / 2);\n\n        var pathY = new paper.Path();\n        pathY.strokeColor = colorLines;\n        var start = new paper.Point(center.x, 0);\n        pathY.moveTo(start);\n        pathY.lineTo(start.add([0, height]));\n\n        var pathX = new paper.Path();\n        pathX.strokeColor = colorLines;\n        var start = new paper.Point(0, center.y);\n        pathX.moveTo(start);\n        pathX.lineTo(start.add([width, 0]));\n\n        var axisX = new paper.Path();\n        axisX.strokeColor = config.color3;\n        var start = new paper.Point(0, center.y);\n        axisX.moveTo(start);\n        axisX.lineTo(start.add([width, 0]));\n\n        var axisY = new paper.Path();\n        axisY.strokeColor = config.color3;\n        var start = new paper.Point(center.x, 0);\n        axisY.moveTo(start);\n        axisY.lineTo(start.add([0, height]));\n\n        //myCircle.selected = true;\n        var tool1 = new paper.Tool();\n        let pos = center;\n        let myCircle = new paper.Path.Circle(pos, 5);\n        //myCircle.strokeColor = config.color3;\n        myCircle.fillColor = config.color3;\n\n        myCircle.onMouseEnter = (event) => {\n            myCircle.fillColor = config.colorHigh;\n            myCircle.strokeColor = config.color3;\n        }\n\n        myCircle.onMouseLeave = (event) => {\n            myCircle.fillColor = config.color3;\n            myCircle.strokeColor = config.color3;\n        }\n\n        myCircle.onMouseDrag = (event) => {\n            myCircle.fillColor = config.colorHigh;\n            //myCircle.strokeColor = config.color0;\n            pos = event.point;\n            if (pos.x <= 0)\n                pos.x = 0;\n            else if (pos.x >= width)\n                pos.x = width;\n            if (pos.y <= 0)\n                pos.y = 0;\n            else if (pos.y >= height)\n                pos.y = height;\n\n            myCircle.position = pos;\n            axisX.position.y = pos.y;\n            axisY.position.x = pos.x;\n\n            let x = pos.x / width - 0.5;\n            let y = 0.5 - (pos.y / height);\n            if (this.props.onChange)\n                this.props.onChange({ x, y, point: pos });\n\n            this.setState({ x, y });\n        }\n\n        paper.view.draw();\n    }\n    render() {\n        let { x, y } = this.state;\n        return <div className=\"slider-2d-container\">\n            <canvas className=\"slider-2d-canvas\" ref={this.canvas}></canvas>\n            <div>x: {x.toFixed(2)} </div>\n            <div>y: {y.toFixed(2)}</div>\n        </div>\n    }\n}","import React, { Component } from \"react\";\nimport paper from \"paper\";\nimport { config } from \"./index\";\n\nexport default class LineEditor extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            x: 0,\n            y: 0\n        }\n\n        this.canvas = React.createRef();\n        // this.draw();\n    }\n\n    componentDidMount() {\n        // window.addEventListener('mousemove', this.onMouseMove);\n        if (this.canvas.current)\n            this.draw(this.canvas.current);\n    }\n\n    // Create a Paper.js Path to draw a line into it:\n    draw = (canvas) => {\n        paper.setup(canvas);\n        let colorLines = 'rgba(0,0,0,0.1)';\n        let { width, height } = canvas.getBoundingClientRect();\n        let center = new paper.Point(width / 2, height / 2);\n\n\n        var myPath = new paper.Path({ strokeWidth: 2, strokeCap: 'round' });\n        myPath.strokeColor = config.color3;\n\n        let points = this.props.points || [];\n\n        let step = (width - 10) / (points.length - 1);\n        let circles = [];\n\n        for (var i = 0; i < points.length; i++) {\n            let point = new paper.Point(5 + i * step, height - points[i]);\n            myPath.add(point);\n            let segment = myPath.segments[i];\n\n            let circle = new paper.Path.Circle(point, 3)\n\n            circle.fillColor = 'rgba(0,0,0,0.25)';\n\n            circle.onMouseEnter = (event) => {\n                event.target.fillColor = config.colorHigh;\n            }\n\n            circle.onMouseLeave = (event) => {\n                event.target.fillColor = 'rgba(0,0,0,0.25)';\n            }\n\n            circle.onMouseUp = (event) => {\n                event.target.fillColor = 'rgba(0,0,0,0.25)';\n            }\n\n            circle.onMouseDrag = (event) => {\n                event.target.fillColor = config.colorHigh;\n                pos = event.point;\n\n                if (pos.y <= 0)\n                    pos.y = 0;\n                else if (pos.y >= height)\n                    pos.y = height;\n\n                event.target.position.y = pos.y;\n\n                segment.point.y = pos.y;\n                let x = pos.x / width - 0.5;\n                let y = 0.5 - (pos.y / height);\n\n                if (this.props.onChange)\n                    this.props.onChange({ x, y, point: pos, segments: myPath.segments });\n\n                this.setState({ x, y });\n            }\n\n            circles.push(circle);\n        }\n\n        myPath.smooth();\n        var tool1 = new paper.Tool();\n        let pos = center;\n\n\n        paper.view.draw();\n    }\n    render() {\n        let { x, y } = this.state;\n        return <div className=\"line-editor\">\n            <canvas className=\"line-editor-canvas\" ref={this.canvas} width={100}></canvas>\n        </div>\n    }\n}","import React, { Component } from \"react\";\nimport paper from \"paper\";\nimport { config } from \"./index\";\nimport { start } from \"repl\";\n\nexport default class CircularSlider extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            angle: 0\n        }\n\n        this.canvas = React.createRef();\n        // this.draw();\n    }\n\n    componentDidMount() {\n        // window.addEventListener('mousemove', this.onMouseMove);\n        if (this.canvas.current)\n            this.draw(this.canvas.current);\n    }\n\n    /*\n var mPos = {x: e.clientX-elPos.x, y: e.clientY-elPos.y};\n               var atan = Math.atan2(mPos.x-radius, mPos.y-radius);\n               deg = -atan/(Math.PI/180) + 180; // final (0-360 positive) degrees from mouse position \n                \n               X = Math.round(radius* Math.sin(deg*Math.PI/180));    \n               Y = Math.round(radius*  -Math.cos(deg*Math.PI/180));\n    */\n    // Create a Paper.js Path to draw a line into it:\n    draw = (canvas) => {\n        paper.setup(canvas);\n\n        let { width, height } = canvas.getBoundingClientRect();\n\n        let center = new paper.Point(width / 2, height / 2);\n        let radius = this.props.radius || height / 2 - 20;\n\n        let bgcircle = new paper.Path.Circle(center, radius)\n        bgcircle.strokeWidth = 5;\n        bgcircle.strokeColor = config.color1;\n\n        let circleSize = 6;\n        let startPos = new paper.Point(center.x, 14 + circleSize);\n\n        var line = new paper.Path.Line(center, startPos);\n        line.strokeColor = config.color1;\n        line.strokeCap = 'round';\n        line.strokeWidth = 5;\n\n        let circle = new paper.Path.Circle(startPos, circleSize);\n        circle.fillColor = config.color3;\n\n        var through = new paper.Point(60, 20);\n        var to = new paper.Point(80, 80);\n        var arc = new paper.Path.Arc(startPos, startPos, startPos);\n\n\n        //arc.add(startPos);\n        arc.strokeColor = 'black';\n\n        circle.onMouseEnter = (event) => {\n            event.target.fillColor = config.colorHigh;\n        }\n\n        circle.onMouseLeave = (event) => {\n            event.target.fillColor = config.color3;\n        }\n        circle.onMouseUp = (event) => {\n            event.target.fillColor = config.color3;\n        }\n\n        circle.onMouseDrag = (event) => {\n            event.target.fillColor = config.colorHigh;\n\n            let point = event.point;\n            var atan = Math.atan2(point.x - width / 2, point.y - height / 2);\n\n            var deg = -atan / (Math.PI / 180) + 180; // final (0-360 positive) degrees from mouse position \n            var X = Math.round(radius * Math.sin(deg * Math.PI / 180));\n            var Y = Math.round(radius * -Math.cos(deg * Math.PI / 180));\n            circle.position.x = X + center.x;\n            circle.position.y = Y + center.y;\n\n            var halfX = Math.round(radius * Math.sin((deg * 0.5) * Math.PI / 180));\n            var halfY = Math.round(radius * -Math.cos((deg * 0.5) * Math.PI / 180));\n            //arc\n            var throughPoint = new paper.Point(halfX + center.x, halfY + center.y);\n            var toPoint = new paper.Point(X + center.x, Y + center.y);\n\n            line.lastSegment.point = new paper.Point(circle.position.x, circle.position.y);\n            this.setState({ angle: deg });\n\n            if (this.props.onChange)\n                this.props.onChange(deg);\n        }\n\n        paper.view.draw();\n    }\n    render() {\n        let { x, y } = this.state;\n        return <div className=\"circular-slider\">\n            <canvas className=\"circular-slider-canvas\" ref={this.canvas}></canvas>\n            <div className=\"angle\">{this.state.angle.toFixed(2)}</div>\n        </div>\n    }\n}","import React, { Component } from \"react\";\nimport { config } from \"./index\";\n\nexport default class Collapsible extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            open: false\n        }\n\n        this.container = React.createRef();\n        this.content = React.createRef();\n    }\n\n    onClickContainer = () => {\n        this.setState({ open: !this.state.open });\n    }\n\n    componentDidMount() {\n\n    }\n\n    render() {\n        let { open } = this.state;\n\n\n\n        return <div className=\"collapsible\" ref={this.container} >\n            <div className=\"top\">\n                <div className=\"label\" onClick={this.onClickContainer}>{this.props.label || \"collapsible\"}\n                </div>\n                <div className={open ? \"arrow arrow-up\" : \"arrow\"} >\n                    <svg width='12' viewBox='0 0 79 40' xmlns='http://www.w3.org/2000/svg'>\n                        <g fill='none' fillRule='evenodd'>\n                            <polygon fill={config.colorText} points='0 0 79 0 39.5 39.5' />\n                        </g>\n                    </svg>\n                </div>\n            </div>\n            <div className={open ? \"content content-open\" : \"content content-closed\"} ref={this.container}>\n                {this.props.children}\n            </div>\n        </div >\n    }\n}","import Slider2D from \"./Slider2D\";\nimport LineEditor from \"./LineEditor\";\nimport CircularSlider from \"./CircularSlider\";\nimport Collapsible from \"./Collapsible\";\n\nimport \"./controls.less\";\n\nexport let config = {\n    color0: '#ffffff',\n    color1: '#eeeeee',\n    color2: '#888888',\n    color3: '#222222',\n    colorText: '#111',\n    colorHigh: '#00baff'\n};\nexport {\n    Slider2D,\n    LineEditor,\n    CircularSlider,\n    Collapsible\n};\n","import React, { Component } from \"react\";\nimport ReactDOM from 'react-dom';\nimport { AppContainer } from 'react-hot-loader';\nimport logo from \"./icons/logo.svg\";\nimport github from \"./icons/github.svg\";\nimport { shell } from 'electron';\n\nimport \"./app.css\";\nimport { connect } from 'react-redux';\nimport { toggleMenu } from \"./store\";\n\n//import Menu from \"./components/Menu\";\n\nimport { Slider2D, LineEditor, CircularSlider, Collapsible } from \"./controls\";\n//import \"./controls/controls.less\";\n\nclass App extends Component {\n    onChange = (event) => {\n        //console.log(\"chage\", event);\n        window.pos3d = { x: event.x, y: event.y };\n    }\n\n    render() {\n        console.log('props', this.props);\n        return (\n            <div className=\"controls-menu\">\n                <div className=\"panel\">\n                    <Slider2D onChange={this.onChange} />\n                    <LineEditor points={[0, 1, 2, 2, 5, 2]} />\n                    <Collapsible label=\"Circular Slider\">\n                        <CircularSlider />\n                    </Collapsible>\n                </div >\n            </div>\n        );\n    }\n\n}\n\nconst mapStateToProps = state => {\n    return { menu: state.menuIsOpen }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        toggleMenu: () => {\n            dispatch({ type: 'TOGGLE_MENU', open: null });\n        }\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(App)\n\n","import * as THREE from 'three';\n\nexport default class Sky {\n\n    getObject() {\n    \n        // SKYDOME\n        var vertexShader = `\n        varying vec3 vWorldPosition;\n\t\t\tvoid main() {\n\t\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\t\t\t\tvWorldPosition = worldPosition.xyz;\n\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n            }\n            `;\n        var fragmentShader = `\n        uniform vec3 topColor;\n\t\t\tuniform vec3 bottomColor;\n\t\t\tuniform float offset;\n\t\t\tuniform float exponent;\n\t\t\tvarying vec3 vWorldPosition;\n\t\t\tvoid main() {\n\t\t\t\tfloat h = normalize( vWorldPosition + offset ).y;\n\t\t\t\tgl_FragColor = vec4( mix( bottomColor, topColor, max( pow( max( h, 0.0 ), exponent ), 0.0 ) ), 1.0 );\n            }\n            `;\n        var uniforms = {\n            topColor: { type: \"c\", value: new THREE.Color(0x606060) },\n            bottomColor: { type: \"c\", value: new THREE.Color(0x212121) },\n            offset: { type: \"f\", value: 400 },\n            exponent: { type: \"f\", value: 1.0 }\n        };\n\n        var skyGeo = new THREE.SphereBufferGeometry(1000, 32, 15);\n\n        var skyMat = new THREE.ShaderMaterial({\n            uniforms: uniforms,\n            vertexShader: vertexShader,\n            fragmentShader: fragmentShader,\n            side: THREE.BackSide\n        });\n\n        var sky = new THREE.Mesh(skyGeo, skyMat);\n        return sky;\n    }\n}","// Source: https://github.com/usco/glView-helpers/blob/master/src/grids/LabeledGrid.js\nimport * as THREE from 'three';\n\n/*TODO:\n - refactor\n - use label helper\n*/\n\nexport default class LabeledGrid extends THREE.Object3D {\n    constructor(width = 200, length = 200, step = 10, upVector = [0, 1, 0], color = 0x00baff, opacity = 0.2, text = true, textColor = \"#ffffff\", textLocation = \"left\") {\n        super();\n\n        this.width = width;\n        this.length = length;\n        this.step = step;\n        this.color = color;\n        this.opacity = opacity;\n        this.text = text;\n        this.textColor = textColor;\n        this.textLocation = textLocation;\n        this.upVector = new THREE.Vector3().fromArray(upVector);\n\n        this.name = \"grid\";\n\n        //TODO: clean this up\n        this.marginSize = 10;\n        this.stepSubDivisions = 10;\n\n\n        this._drawGrid();\n\n        //default grid orientation is z up, rotate if not the case\n        //var upVector = this.upVector;\n        this.up = this.upVector;\n        this.lookAt(this.upVector);\n    }\n\n    _drawGrid() {\n        var gridGeometry, gridMaterial, mainGridZ, planeFragmentShader, planeGeometry, planeMaterial, subGridGeometry, subGridMaterial, subGridZ;\n\n        //offset to avoid z fighting\n        mainGridZ = -0.05;\n        gridGeometry = new THREE.Geometry();\n        gridMaterial = new THREE.LineBasicMaterial({\n            color: new THREE.Color().setHex(this.color),\n            opacity: this.opacity,\n            linewidth: 2,\n            transparent: true\n        });\n\n        subGridZ = -0.05;\n        subGridGeometry = new THREE.Geometry();\n        subGridMaterial = new THREE.LineBasicMaterial({\n            color: new THREE.Color().setHex(this.color),\n            opacity: this.opacity / 2,\n            transparent: true\n        });\n\n        var step = this.step;\n        var stepSubDivisions = this.stepSubDivisions;\n        var width = this.width;\n        var length = this.length;\n\n        var centerBased = true\n\n        if (centerBased) {\n            for (var i = 0; i <= width / 2; i += step / stepSubDivisions) {\n                subGridGeometry.vertices.push(new THREE.Vector3(-length / 2, i, subGridZ));\n                subGridGeometry.vertices.push(new THREE.Vector3(length / 2, i, subGridZ));\n\n                subGridGeometry.vertices.push(new THREE.Vector3(-length / 2, -i, subGridZ));\n                subGridGeometry.vertices.push(new THREE.Vector3(length / 2, -i, subGridZ));\n\n                if (i % step == 0) {\n                    gridGeometry.vertices.push(new THREE.Vector3(-length / 2, i, mainGridZ));\n                    gridGeometry.vertices.push(new THREE.Vector3(length / 2, i, mainGridZ));\n\n                    gridGeometry.vertices.push(new THREE.Vector3(-length / 2, -i, mainGridZ));\n                    gridGeometry.vertices.push(new THREE.Vector3(length / 2, -i, mainGridZ));\n                }\n            }\n            for (var i = 0; i <= length / 2; i += step / stepSubDivisions) {\n                subGridGeometry.vertices.push(new THREE.Vector3(i, -width / 2, subGridZ));\n                subGridGeometry.vertices.push(new THREE.Vector3(i, width / 2, subGridZ));\n\n                subGridGeometry.vertices.push(new THREE.Vector3(-i, -width / 2, subGridZ));\n                subGridGeometry.vertices.push(new THREE.Vector3(-i, width / 2, subGridZ));\n\n                if (i % step == 0) {\n                    gridGeometry.vertices.push(new THREE.Vector3(i, -width / 2, mainGridZ));\n                    gridGeometry.vertices.push(new THREE.Vector3(i, width / 2, mainGridZ));\n\n                    gridGeometry.vertices.push(new THREE.Vector3(-i, -width / 2, mainGridZ));\n                    gridGeometry.vertices.push(new THREE.Vector3(-i, width / 2, mainGridZ));\n                }\n            }\n        }\n        else {\n            for (var i = -width / 2; i <= width / 2; i += step / stepSubDivisions) {\n                subGridGeometry.vertices.push(new THREE.Vector3(-length / 2, i, subGridZ));\n                subGridGeometry.vertices.push(new THREE.Vector3(length / 2, i, subGridZ));\n\n                if (i % step == 0) {\n                    gridGeometry.vertices.push(new THREE.Vector3(-length / 2, i, mainGridZ));\n                    gridGeometry.vertices.push(new THREE.Vector3(length / 2, i, mainGridZ));\n                }\n            }\n            for (var i = -length / 2; i <= length / 2; i += step / stepSubDivisions) {\n                subGridGeometry.vertices.push(new THREE.Vector3(i, -width / 2, subGridZ));\n                subGridGeometry.vertices.push(new THREE.Vector3(i, width / 2, subGridZ));\n\n                if (i % step == 0) {\n                    gridGeometry.vertices.push(new THREE.Vector3(i, -width / 2, mainGridZ));\n                    gridGeometry.vertices.push(new THREE.Vector3(i, width / 2, mainGridZ));\n                }\n            }\n        }\n\n        this.mainGrid = new THREE.LineSegments(gridGeometry, gridMaterial);\n        //create sub grid geometry object\n        this.subGrid = new THREE.LineSegments(subGridGeometry, subGridMaterial);\n\n        //create margin\n        var offsetWidth = width + this.marginSize;\n        var offsetLength = length + this.marginSize;\n\n        var marginGeometry = new THREE.Geometry();\n        marginGeometry.vertices.push(new THREE.Vector3(-length / 2, -width / 2, subGridZ));\n        marginGeometry.vertices.push(new THREE.Vector3(length / 2, -width / 2, subGridZ));\n\n        marginGeometry.vertices.push(new THREE.Vector3(length / 2, -width / 2, subGridZ));\n        marginGeometry.vertices.push(new THREE.Vector3(length / 2, width / 2, subGridZ));\n\n        marginGeometry.vertices.push(new THREE.Vector3(length / 2, width / 2, subGridZ));\n        marginGeometry.vertices.push(new THREE.Vector3(-length / 2, width / 2, subGridZ));\n\n        marginGeometry.vertices.push(new THREE.Vector3(-length / 2, width / 2, subGridZ));\n        marginGeometry.vertices.push(new THREE.Vector3(-length / 2, -width / 2, subGridZ));\n\n\n        marginGeometry.vertices.push(new THREE.Vector3(-offsetLength / 2, -offsetWidth / 2, subGridZ));\n        marginGeometry.vertices.push(new THREE.Vector3(offsetLength / 2, -offsetWidth / 2, subGridZ));\n\n        marginGeometry.vertices.push(new THREE.Vector3(offsetLength / 2, -offsetWidth / 2, subGridZ));\n        marginGeometry.vertices.push(new THREE.Vector3(offsetLength / 2, offsetWidth / 2, subGridZ));\n\n        marginGeometry.vertices.push(new THREE.Vector3(offsetLength / 2, offsetWidth / 2, subGridZ));\n        marginGeometry.vertices.push(new THREE.Vector3(-offsetLength / 2, offsetWidth / 2, subGridZ));\n\n        marginGeometry.vertices.push(new THREE.Vector3(-offsetLength / 2, offsetWidth / 2, subGridZ));\n        marginGeometry.vertices.push(new THREE.Vector3(-offsetLength / 2, -offsetWidth / 2, subGridZ));\n\n\n        var strongGridMaterial = new THREE.LineBasicMaterial({\n            color: new THREE.Color().setHex(this.color),\n            opacity: this.opacity * 2,\n            linewidth: 2,\n            transparent: true\n        });\n        this.margin = new THREE.LineSegments(marginGeometry, strongGridMaterial);\n\n        //add all grids, subgrids, margins etc\n        this.add(this.mainGrid);\n        this.add(this.subGrid);\n        this.add(this.margin);\n\n        this._drawNumbering();\n    }\n\n    toggle(toggle) {\n        //apply visibility settings to all children \n        this.traverse(function (child) {\n            child.visible = toggle;\n        });\n    }\n\n    setOpacity(opacity) {\n        this.opacity = opacity;\n        this.mainGrid.material.opacity = opacity;\n        this.subGrid.material.opacity = opacity / 2;\n        this.margin.material.opacity = opacity * 2;\n    }\n\n    setColor(color) {\n        this.color = color;\n        this.mainGrid.material.color = new THREE.Color().setHex(this.color);\n        this.subGrid.material.color = new THREE.Color().setHex(this.color);\n        this.margin.material.color = new THREE.Color().setHex(this.color);\n    }\n\n    toggleText(toggle) {\n        this.text = toggle;\n        var labels = this.labels.children;\n        for (var i = 0; i < this.labels.children.length; i++) {\n            var label = labels[i];\n            label.visible = toggle;\n        }\n    }\n\n    setTextColor(color) {\n        this.textColor = color;\n        this._drawNumbering();\n    }\n\n    setTextLocation(location) {\n        this.textLocation = location;\n        return this._drawNumbering();\n    }\n\n    setUp(upVector) {\n        this.upVector = upVector;\n        this.up = upVector;\n        this.lookAt(upVector);\n    }\n\n    resize(width, length) {\n        if (width && length) {\n            var width = Math.max(width, 10);\n            this.width = width;\n\n            var length = Math.max(length, 10);\n            this.length = length;\n\n            this.step = Math.max(this.step, 5);\n\n            this.remove(this.mainGrid);\n            this.remove(this.subGrid);\n            this.remove(this.margin);\n            //this.remove(this.plane);\n            return this._drawGrid();\n        }\n    }\n\n    _drawNumbering() {\n        var label, sizeLabel, sizeLabel2, xLabelsLeft, xLabelsRight, yLabelsBack, yLabelsFront;\n        var step = this.step;\n\n        this._labelStore = {};\n\n        if (this.labels != null) {\n            this.mainGrid.remove(this.labels);\n        }\n        this.labels = new THREE.Object3D();\n\n\n        var width = this.width;\n        var length = this.length;\n        var numbering = this.numbering = \"centerBased\";\n\n        var labelsFront = new THREE.Object3D();\n        var labelsSideRight = new THREE.Object3D();\n\n        if (numbering == \"centerBased\") {\n            for (var i = 0; i <= width / 2; i += step) {\n                var sizeLabel = this.drawTextOnPlane(\"\" + i, 32);\n                var sizeLabel2 = sizeLabel.clone();\n\n                sizeLabel.position.set(length / 2, -i, 0.1);\n                sizeLabel.rotation.z = -Math.PI / 2;\n                labelsFront.add(sizeLabel);\n\n                sizeLabel2.position.set(length / 2, i, 0.1);\n                sizeLabel2.rotation.z = -Math.PI / 2;\n                labelsFront.add(sizeLabel2);\n            }\n\n            for (var i = 0; i <= length / 2; i += step) {\n                var sizeLabel = this.drawTextOnPlane(\"\" + i, 32);\n                var sizeLabel2 = sizeLabel.clone();\n\n                sizeLabel.position.set(-i, width / 2, 0.1);\n                //sizeLabel.rotation.z = -Math.PI / 2;\n                labelsSideRight.add(sizeLabel);\n\n                sizeLabel2.position.set(i, width / 2, 0.1);\n                //sizeLabel2.rotation.z = -Math.PI / 2;\n                labelsSideRight.add(sizeLabel2);\n            }\n\n            var labelsSideLeft = labelsSideRight.clone();\n            labelsSideLeft.rotation.z = -Math.PI;\n            //labelsSideLeft = labelsSideRight.clone().translateY(- width );\n\n            var labelsBack = labelsFront.clone();\n            labelsBack.rotation.z = -Math.PI;\n        }\n\n\n\n        /*if (this.textLocation === \"center\") {\n          yLabelsRight.translateY(- length/ 2);\n          xLabelsFront.translateX(- width / 2);\n        } else {\n          yLabelsLeft = yLabelsRight.clone().translateY( -width );\n          xLabelsBack = xLabelsFront.clone().translateX( -length );\n          \n          this.labels.add( yLabelsLeft );\n          this.labels.add( xLabelsBack) ;\n        }*/\n        //this.labels.add( yLabelsRight );\n        this.labels.add(labelsFront);\n        this.labels.add(labelsBack);\n\n        this.labels.add(labelsSideRight);\n        this.labels.add(labelsSideLeft);\n\n\n        //apply visibility settings to all labels\n        var textVisible = this.text;\n        this.labels.traverse(function (child) {\n            child.visible = textVisible;\n        });\n\n\n        this.mainGrid.add(this.labels);\n    }\n\n    drawTextOnPlane(text, size) {\n        var canvas, context, material, plane, texture;\n\n        if (size == null) {\n            size = 256;\n        }\n\n        canvas = document.createElement('canvas');\n        var size = 128;\n        canvas.width = size;\n        canvas.height = size;\n        context = canvas.getContext('2d');\n        context.font = \"18px sans-serif\";\n        context.textAlign = 'center';\n        context.fillStyle = this.textColor;\n        context.fillText(text, canvas.width / 2, canvas.height / 2);\n        context.strokeStyle = this.textColor;\n        context.strokeText(text, canvas.width / 2, canvas.height / 2);\n\n        texture = new THREE.Texture(canvas);\n        texture.needsUpdate = true;\n        texture.generateMipmaps = true;\n        texture.magFilter = THREE.LinearFilter;\n        texture.minFilter = THREE.LinearFilter;\n\n        material = new THREE.MeshBasicMaterial({\n            map: texture,\n            transparent: true,\n            color: 0xffffff,\n            alphaTest: 0.3\n        });\n        plane = new THREE.Mesh(new THREE.PlaneBufferGeometry(size / 8, size / 8), material);\n        plane.doubleSided = true\n        plane.overdraw = true\n\n        return plane;\n\n    }\n}\n\n\n  //export { LabeledGrid };\n  //module.exports = LabeledGrid;\n\n  //autoresize, disabled for now\n  /*\n  updateGridSize() {\n        var max, maxX, maxY, min, minX, minY, size, subchild, _getBounds, _i, _len, _ref,\n          _this = this;\n        minX = 99999;\n        maxX = -99999;\n        minY = 99999;\n        maxY = -99999;\n        _getBounds = function(mesh) {\n          var bBox, subchild, _i, _len, _ref, _results;\n          if (mesh instanceof THREE.Mesh) {\n            mesh.geometry.computeBoundingBox();\n            bBox = mesh.geometry.boundingBox;\n            minX = Math.min(minX, bBox.min.x);\n            maxX = Math.max(maxX, bBox.max.x);\n            minY = Math.min(minY, bBox.min.y);\n            maxY = Math.max(maxY, bBox.max.y);\n            _ref = mesh.children;\n            _results = [];\n            for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n              subchild = _ref[_i];\n              _results.push(_getBounds(subchild));\n            }\n            return _results;\n          }\n        };\n        if (this.rootAssembly != null) {\n          _ref = this.rootAssembly.children;\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            subchild = _ref[_i];\n            if (subchild.name !== \"renderSubs\" && subchild.name !== \"connectors\") {\n              _getBounds(subchild);\n            }\n          }\n        }\n        max = Math.max(Math.max(maxX, maxY), 100);\n        min = Math.min(Math.min(minX, minY), -100);\n        size = (Math.max(max, Math.abs(min))) * 2;\n        size = Math.ceil(size / 10) * 10;\n        if (size >= 200) {\n          return this.resize(size);\n        }\n  };\n  */\n\n","module.exports = function () {\n    /**\n     * @author qiao / https://github.com/qiao\n     * @author mrdoob / http://mrdoob.com\n     * @author alteredq / http://alteredqualia.com/\n     * @author WestLangley / http://github.com/WestLangley\n     * @author erich666 / http://erichaines.com\n     * @author lucascassiano / http://github.com/lucascassiano\n     */\n\n    // This set of controls performs orbiting, dollying (zooming), and panning.\n    // Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by\n    // default).\n    //\n    //    Orbit - left mouse / touch: one finger move    Zoom - middle mouse, or\n    // mousewheel / touch: two finger spread or squish    Pan - right mouse, or\n    // arrow keys / touch: three finter swipe\n\n    /* -- last edit comments\n    this script was changed to support better gets and sets of angles\n    */\n    const THREE = require(\"three\");\n\n    function OrbitControls(object, domElement, updateExternal) {\n\n        this.object = object;\n\n        this.domElement = (domElement !== undefined) ?\n            domElement :\n            document;\n\n        // Set to false to disable this control\n        this.enabled = true;\n\n        // \"target\" sets the location of focus, where the object orbits around\n        this.target = new THREE.Vector3();\n\n        // How far you can dolly in and out ( PerspectiveCamera only )\n        this.minDistance = 0;\n        this.maxDistance = Infinity;\n\n        // How far you can zoom in and out ( OrthographicCamera only )\n        this.minZoom = 0;\n        this.maxZoom = Infinity;\n\n        // How far you can orbit vertically, upper and lower limits. Range is 0 to\n        // Math.PI radians.\n        this.minPolarAngle = 0; // radians\n        this.maxPolarAngle = Math.PI; // radians\n\n        // How far you can orbit horizontally, upper and lower limits. If set, must be a\n        // sub-interval of the interval [ - Math.PI, Math.PI ].\n        this.minAzimuthAngle = -Infinity; // radians\n        this.maxAzimuthAngle = Infinity; // radians\n\n        // Set to true to enable damping (inertia) If damping is enabled, you must call\n        // controls.update() in your animation loop\n        this.enableDamping = false;\n        this.dampingFactor = 0.25;\n\n        // This option actually enables dollying in and out; left as \"zoom\" for\n        // backwards compatibility. Set to false to disable zooming\n        this.enableZoom = true;\n        this.zoomSpeed = 1.0;\n\n        // Set to false to disable rotating\n        this.enableRotate = true;\n        this.rotateSpeed = 1.0;\n\n        // Set to false to disable panning\n        this.enablePan = true;\n        this.keyPanSpeed = 7.0; // pixels moved per arrow key push\n\n        // Set to true to automatically rotate around the target If auto-rotate is\n        // enabled, you must call controls.update() in your animation loop\n        this.autoRotate = false;\n        this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n        // Set to false to disable use of the keys\n        this.enableKeys = true;\n\n        // The four arrow keys\n        this.keys = {\n            LEFT: 37,\n            UP: 38,\n            RIGHT: 39,\n            BOTTOM: 40\n        };\n\n        // Mouse buttons\n        this.mouseButtons = {\n            ORBIT: THREE.MOUSE.LEFT,\n            ZOOM: THREE.MOUSE.MIDDLE,\n            PAN: THREE.MOUSE.RIGHT\n        };\n\n        // for reset\n        this.target0 = this\n            .target\n            .clone();\n        this.position0 = this\n            .object\n            .position\n            .clone();\n        this.zoom0 = this.object.zoom;\n\n        this.updateExternal = updateExternal;\n        this.isExternallyControlled = false;\n\n        this.setExternalControl = function (value = false) {\n            this.isExternallyControlled = value;\n        }\n        //\n        // internals\n        //\n\n        var scope = this;\n\n        var changeEvent = {\n            type: 'change'\n        };\n        var startEvent = {\n            type: 'start'\n        };\n        var endEvent = {\n            type: 'end'\n        };\n\n        var STATE = {\n            NONE: -1,\n            ROTATE: 0,\n            DOLLY: 1,\n            PAN: 2,\n            TOUCH_ROTATE: 3,\n            TOUCH_DOLLY: 4,\n            TOUCH_PAN: 5\n        };\n\n        var state = STATE.NONE;\n\n        var EPS = 0.000001;\n\n        // current position in spherical coordinates\n        var spherical = new THREE.Spherical();\n        var sphericalDelta = new THREE.Spherical();\n\n        var scale = 1;\n        var panOffset = new THREE.Vector3();\n        var zoomChanged = false;\n\n        // Current position in spherical coordinate system.\n        var theta = 0;\n        var phi = 0;\n\n        // Pending changes\n        var phiDelta = 0;\n        var thetaDelta = 0;\n        var scale = 1;\n        var panOffset = new THREE.Vector3();\n        var zoomChanged = false;\n        //---\n        //\n        // public methods\n        //\n\n        this.setEnable = function (enable) {\n            this.enabled = enable;\n        }\n\n        this.getAngles = function () {\n            return { phi: spherical.phi, theta: spherical.theta };\n        }\n\n        this.getPolarAngle = function () {\n            return spherical.phi;\n        };\n\n        this.getAzimuthalAngle = function () {\n            return spherical.theta;\n        };\n\n        this.setPolarAngle = function (angle) {\n            phi = angle;\n            this.forceUpdate();\n        };\n\n        this.setAzimuthalAngle = function (angle) {\n            theta = angle;\n            this.forceUpdate();\n        };\n\n        this.setPolarAngleNoForcing = function (angle) {\n            phi = angle;\n            this.update();\n            //this.forceUpdate();\n        };\n\n        this.setAzimuthalAngleNoForcing = function (angle) {\n            theta = angle;\n            this.update();\n            //this.forceUpdate();\n        };\n\n        this.setSyncRotationObject = function (syncObject) {\n            this.syncObject;\n            if (this.syncObject.syncRotation) {\n                this.syncObject.syncRotation(this.setAngles);\n            }\n        }\n\n        /**\n         * update Orbit Controls\n         * @param {*} force \n         */\n        this.updateControls = function (force = false) {\n            if (force)\n                this.forceUpdate();\n            else\n                this.update();\n        }\n\n        this.setAngles = function (_phi, _theta) {\n            phi = _phi;\n            theta = _theta;\n            this.forceUpdate();\n        }\n\n        this.rotateLeft = function (angle) {\n\n            thetaDelta -= angle;\n        };\n\n        this.rotateUp = function (angle) {\n\n            phiDelta = angle;\n\n        };\n\n        this.setPhiDelta = function (angle) {\n            phiDelta = angle;\n            //this.forceUpdate();\n        };\n\n        this.setThetaDelta = function (angle) {\n            thetaDelta -= angle;\n            //this.forceUpdate();\n        };\n\n        // pass in distance in world space to move left\n        this.panLeft = function () {\n\n            var v = new THREE.Vector3();\n\n            return function panLeft(distance) {\n\n                var te = this.object.matrix.elements;\n\n                // get X column of matrix\n                v.set(te[0], te[1], te[2]);\n                v.multiplyScalar(-distance);\n\n                panOffset.add(v);\n\n            };\n\n        }();\n\n        // pass in distance in world space to move up\n        this.panUp = function () {\n\n            var v = new THREE.Vector3();\n\n            return function panUp(distance) {\n\n                var te = this.object.matrix.elements;\n\n                // get Y column of matrix\n                v.set(te[4], te[5], te[6]);\n                v.multiplyScalar(distance);\n\n                panOffset.add(v);\n\n            };\n\n        }();\n\n        // pass in x,y of change desired in pixel space, right and down are positive\n        this.pan = function (deltaX, deltaY, screenWidth, screenHeight) {\n\n            if (scope.object instanceof THREE.PerspectiveCamera) {\n\n                // perspective\n                var position = scope.object.position;\n                var offset = position\n                    .clone()\n                    .sub(scope.target);\n                var targetDistance = offset.length();\n\n                // half of the fov is center to top of screen\n                targetDistance *= Math.tan((scope.object.fov / 2) * Math.PI / 180.0);\n\n                // we actually don't use screenWidth, since perspective camera is fixed to\n                // screen height\n                scope.panLeft(2 * deltaX * targetDistance / screenHeight);\n                scope.panUp(2 * deltaY * targetDistance / screenHeight);\n\n            } else if (scope.object instanceof THREE.OrthographicCamera) {\n\n                // orthographic\n                scope.panLeft(deltaX * (scope.object.right - scope.object.left) / screenWidth);\n                scope.panUp(deltaY * (scope.object.top - scope.object.bottom) / screenHeight);\n\n            } else {\n\n                // camera neither orthographic or perspective\n                console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\n\n            }\n\n        };\n\n        this.dollyIn = function (dollyScale) {\n\n            if (scope.object instanceof THREE.PerspectiveCamera) {\n\n                scale /= dollyScale;\n\n            } else if (scope.object instanceof THREE.OrthographicCamera) {\n\n                scope.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom * dollyScale));\n                scope\n                    .object\n                    .updateProjectionMatrix();\n                zoomChanged = true;\n\n            } else {\n\n                console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabl' +\n                    'ed.');\n\n            }\n\n        };\n\n        this.dollyOut = function (dollyScale) {\n\n            if (scope.object instanceof THREE.PerspectiveCamera) {\n\n                scale *= dollyScale;\n\n            } else if (scope.object instanceof THREE.OrthographicCamera) {\n\n                scope.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom / dollyScale));\n                scope\n                    .object\n                    .updateProjectionMatrix();\n                zoomChanged = true;\n\n            } else {\n\n                console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabl' +\n                    'ed.');\n\n            }\n\n        };\n\n        this.reset = function () {\n\n            scope\n                .target\n                .copy(scope.target0);\n            scope\n                .object\n                .position\n                .copy(scope.position0);\n            scope.object.zoom = scope.zoom0;\n\n            scope\n                .object\n                .updateProjectionMatrix();\n            scope.dispatchEvent(changeEvent);\n\n            scope.update();\n\n            state = STATE.NONE;\n\n        };\n\n        this.forceUpdate = function () {\n\n            var offset = new THREE.Vector3();\n\n            // so camera.up is the orbit axis\n            var quat = new THREE\n                .Quaternion()\n                .setFromUnitVectors(object.up, new THREE.Vector3(0, 1, 0));\n            var quatInverse = quat\n                .clone()\n                .inverse();\n\n            var lastPosition = new THREE.Vector3();\n            var lastQuaternion = new THREE.Quaternion();\n\n            return function () {\n\n                var position = this.object.position;\n\n                offset\n                    .copy(position)\n                    .sub(this.target);\n\n                // rotate offset to \"y-axis-is-up\" space\n                offset.applyQuaternion(quat);\n\n                // restrict theta to be between desired limits\n                theta = Math.max(this.minAzimuthAngle, Math.min(this.maxAzimuthAngle, theta));\n\n                // restrict phi to be between desired limits\n                phi = Math.max(this.minPolarAngle, Math.min(this.maxPolarAngle, phi));\n\n                // restrict phi to be betwee EPS and PI-EPS\n                phi = Math.max(EPS, Math.min(Math.PI - EPS, phi));\n\n                var radius = offset.length() * scale;\n\n                // restrict radius to be between desired limits\n                radius = Math.max(this.minDistance, Math.min(this.maxDistance, radius));\n\n                // move target to panned location\n                this\n                    .target\n                    .add(panOffset);\n\n                offset.x = radius * Math.sin(phi) * Math.sin(theta);\n                offset.y = radius * Math.cos(phi);\n                offset.z = radius * Math.sin(phi) * Math.cos(theta);\n\n                // rotate offset back to \"camera-up-vector-is-up\" space\n                offset.applyQuaternion(quatInverse);\n\n                position\n                    .copy(this.target)\n                    .add(offset);\n\n                this\n                    .object\n                    .lookAt(this.target);\n\n                if (this.enableDamping === true) {\n\n                    thetaDelta *= (1 - this.dampingFactor);\n                    phiDelta *= (1 - this.dampingFactor);\n\n                } else {\n\n                    thetaDelta = 0;\n                    phiDelta = 0;\n\n                }\n\n                scale = 1;\n                panOffset.set(0, 0, 0);\n\n                //new\n                if (scope.updateExternal && !scope.isExternallyControlled) {\n                    scope.updateExternal(phi, theta);\n                }\n\n                // update condition is: min(camera displacement, camera rotation in radians)^2 >\n                // EPS using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n                if (zoomChanged || lastPosition.distanceToSquared(this.object.position) > EPS || 8 * (1 - lastQuaternion.dot(this.object.quaternion)) > EPS) {\n\n                    lastPosition.copy(this.object.position);\n                    lastQuaternion.copy(this.object.quaternion);\n                    zoomChanged = false;\n\n                    return true;\n\n                }\n\n                return false;\n\n            };\n\n        }();\n\n        // this method is exposed, but perhaps it would be better if we can make it\n        // private...\n        this.update = function () {\n\n            var offset = new THREE.Vector3();\n\n            // so camera.up is the orbit axis\n            var quat = new THREE\n                .Quaternion()\n                .setFromUnitVectors(object.up, new THREE.Vector3(0, 1, 0));\n            var quatInverse = quat\n                .clone()\n                .inverse();\n\n            var lastPosition = new THREE.Vector3();\n            var lastQuaternion = new THREE.Quaternion();\n\n            return function update() {\n\n                var position = scope.object.position;\n\n                offset\n                    .copy(position)\n                    .sub(scope.target);\n\n                // rotate offset to \"y-axis-is-up\" space\n                offset.applyQuaternion(quat);\n\n                // angle from z-axis around y-axis\n                spherical.setFromVector3(offset);\n\n                if (scope.autoRotate && state === STATE.NONE) {\n\n                    rotateLeft(getAutoRotationAngle());\n\n                }\n\n                spherical.theta += sphericalDelta.theta;\n                spherical.phi += sphericalDelta.phi;\n\n                // restrict theta to be between desired limits\n                spherical.theta = Math.max(scope.minAzimuthAngle, Math.min(scope.maxAzimuthAngle, spherical.theta));\n\n                // restrict phi to be between desired limits\n                spherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));\n\n                spherical.makeSafe();\n\n                spherical.radius *= scale;\n\n                // restrict radius to be between desired limits\n                spherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius));\n\n                // move target to panned location\n                scope\n                    .target\n                    .add(panOffset);\n\n                offset.setFromSpherical(spherical);\n\n                // rotate offset back to \"camera-up-vector-is-up\" space\n                offset.applyQuaternion(quatInverse);\n\n                position\n                    .copy(scope.target)\n                    .add(offset);\n\n                scope\n                    .object\n                    .lookAt(scope.target);\n\n                if (scope.enableDamping === true) {\n\n                    sphericalDelta.theta *= (1 - scope.dampingFactor);\n                    sphericalDelta.phi *= (1 - scope.dampingFactor);\n\n                } else {\n\n                    sphericalDelta.set(0, 0, 0);\n\n                }\n\n                scale = 1;\n                panOffset.set(0, 0, 0);\n\n                //new\n                if (scope.updateExternal && !scope.isExternallyControlled) {\n                    scope.updateExternal(spherical.phi, spherical.theta);\n                }\n\n                // update condition is: min(camera displacement, camera rotation in radians)^2 >\n                // EPS using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n                if (zoomChanged || lastPosition.distanceToSquared(scope.object.position) > EPS || 8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\n\n                    scope.dispatchEvent(changeEvent);\n\n                    lastPosition.copy(scope.object.position);\n                    lastQuaternion.copy(scope.object.quaternion);\n                    zoomChanged = false;\n\n                    return true;\n\n                }\n\n                return false;\n\n            };\n\n        }();\n\n        this.dispose = function () {\n\n            scope\n                .domElement\n                .removeEventListener('contextmenu', onContextMenu, false);\n            scope\n                .domElement\n                .removeEventListener('mousedown', onMouseDown, false);\n            scope\n                .domElement\n                .removeEventListener('wheel', onMouseWheel, false);\n\n            scope\n                .domElement\n                .removeEventListener('touchstart', onTouchStart, false);\n            scope\n                .domElement\n                .removeEventListener('touchend', onTouchEnd, false);\n            scope\n                .domElement\n                .removeEventListener('touchmove', onTouchMove, false);\n\n            scope\n                .domElement\n                .removeEventListener('mousemove', onMouseMove, false);\n            scope\n                .domElement\n                .removeEventListener('mouseup', onMouseUp, false);\n\n            scope\n                .domElement\n                .removeEventListener('keydown', onKeyDown, false);\n\n\n            //scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n        };\n\n        var rotateStart = new THREE.Vector2();\n        var rotateEnd = new THREE.Vector2();\n        var rotateDelta = new THREE.Vector2();\n\n        var panStart = new THREE.Vector2();\n        var panEnd = new THREE.Vector2();\n        var panDelta = new THREE.Vector2();\n\n        var dollyStart = new THREE.Vector2();\n        var dollyEnd = new THREE.Vector2();\n        var dollyDelta = new THREE.Vector2();\n\n        function getAutoRotationAngle() {\n\n            return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n        }\n\n        function getZoomScale() {\n\n            return Math.pow(0.95, scope.zoomSpeed);\n\n        }\n\n        function rotateLeft(angle) {\n\n            sphericalDelta.theta -= angle;\n            //new\n            if (scope.updateExternal && !scope.isExternallyControlled) {\n                scope.updateExternal(phi, theta);\n            }\n        }\n\n        function rotateUp(angle) {\n\n            sphericalDelta.phi -= angle;\n            //new\n            if (scope.updateExternal && !scope.isExternallyControlled) {\n                scope.updateExternal(phi, theta);\n            }\n        }\n\n        var panLeft = function () {\n\n            var v = new THREE.Vector3();\n\n            return function panLeft(distance, objectMatrix) {\n\n                v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\n                v.multiplyScalar(-distance);\n\n                panOffset.add(v);\n\n            };\n\n        }();\n\n        var panUp = function () {\n\n            var v = new THREE.Vector3();\n\n            return function panUp(distance, objectMatrix) {\n\n                v.setFromMatrixColumn(objectMatrix, 1); // get Y column of objectMatrix\n                v.multiplyScalar(distance);\n\n                panOffset.add(v);\n\n            };\n\n        }();\n\n        // deltaX and deltaY are in pixels; right and down are positive\n        var pan = function () {\n\n            var offset = new THREE.Vector3();\n\n            return function pan(deltaX, deltaY) {\n\n                var element = scope.domElement === document ?\n                    scope.domElement.body :\n                    scope.domElement;\n\n                if (scope.object instanceof THREE.PerspectiveCamera) {\n\n                    // perspective\n                    var position = scope.object.position;\n                    offset\n                        .copy(position)\n                        .sub(scope.target);\n                    var targetDistance = offset.length();\n\n                    // half of the fov is center to top of screen\n                    targetDistance *= Math.tan((scope.object.fov / 2) * Math.PI / 180.0);\n\n                    // we actually don't use screenWidth, since perspective camera is fixed to\n                    // screen height\n                    panLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);\n                    panUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);\n\n                } else if (scope.object instanceof THREE.OrthographicCamera) {\n\n                    // orthographic\n                    panLeft(deltaX * (scope.object.right - scope.object.left) / scope.object.zoom / element.clientWidth, scope.object.matrix);\n                    panUp(deltaY * (scope.object.top - scope.object.bottom) / scope.object.zoom / element.clientHeight, scope.object.matrix);\n\n                } else {\n\n                    // camera neither orthographic nor perspective\n                    console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\n                    scope.enablePan = false;\n\n                }\n\n            };\n\n        }();\n\n        function dollyIn(dollyScale) {\n\n            if (scope.object instanceof THREE.PerspectiveCamera) {\n\n                scale /= dollyScale;\n\n            } else if (scope.object instanceof THREE.OrthographicCamera) {\n\n                scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\n                scope\n                    .object\n                    .updateProjectionMatrix();\n                zoomChanged = true;\n\n            } else {\n\n                console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabl' +\n                    'ed.');\n                scope.enableZoom = false;\n\n            }\n\n        }\n\n        function dollyOut(dollyScale) {\n\n            if (scope.object instanceof THREE.PerspectiveCamera) {\n\n                scale *= dollyScale;\n\n            } else if (scope.object instanceof THREE.OrthographicCamera) {\n\n                scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\n                scope\n                    .object\n                    .updateProjectionMatrix();\n                zoomChanged = true;\n\n            } else {\n\n                console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabl' +\n                    'ed.');\n                scope.enableZoom = false;\n\n            }\n\n        }\n\n        //\n        // event callbacks - update the object state\n        //\n\n        function handleMouseDownRotate(event) {\n\n            console.log('handleMouseDownRotate');\n\n            rotateStart.set(event.clientX, event.clientY);\n\n        }\n\n        function handleMouseDownDolly(event) {\n\n            //console.log( 'handleMouseDownDolly' );\n\n            dollyStart.set(event.clientX, event.clientY);\n\n        }\n\n        function handleMouseDownPan(event) {\n\n            //console.log( 'handleMouseDownPan' );\n\n            panStart.set(event.clientX, event.clientY);\n\n        }\n\n        function handleMouseMoveRotate(event) {\n\n            //console.log('handleMouseMoveRotate');\n\n            rotateEnd.set(event.clientX, event.clientY);\n            rotateDelta.subVectors(rotateEnd, rotateStart);\n\n            var element = scope.domElement === document ?\n                scope.domElement.body :\n                scope.domElement;\n\n            // rotating across whole screen goes 360 degrees around\n            rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\n            // rotating up and down along whole screen attempts to go 360, but limited to\n            // 180\n            rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\n            rotateStart.copy(rotateEnd);\n\n            scope.update();\n\n        }\n\n        function handleMouseMoveDolly(event) {\n\n            //console.log( 'handleMouseMoveDolly' );\n\n            dollyEnd.set(event.clientX, event.clientY);\n\n            dollyDelta.subVectors(dollyEnd, dollyStart);\n\n            if (dollyDelta.y > 0) {\n\n                dollyIn(getZoomScale());\n\n            } else if (dollyDelta.y < 0) {\n\n                dollyOut(getZoomScale());\n\n            }\n\n            dollyStart.copy(dollyEnd);\n\n            scope.update();\n\n        }\n\n        function handleMouseMovePan(event) {\n\n            //console.log( 'handleMouseMovePan' );\n\n            panEnd.set(event.clientX, event.clientY);\n\n            panDelta.subVectors(panEnd, panStart);\n\n            pan(panDelta.x, panDelta.y);\n\n            panStart.copy(panEnd);\n\n            scope.update();\n\n        }\n\n        function handleMouseUp(event) {\n\n            //console.log( 'handleMouseUp' );\n\n        }\n\n        function handleMouseWheel(event) {\n\n            //console.log( 'handleMouseWheel' );\n\n            if (event.deltaY < 0) {\n\n                dollyOut(getZoomScale());\n\n            } else if (event.deltaY > 0) {\n\n                dollyIn(getZoomScale());\n\n            }\n\n            scope.update();\n\n        }\n\n        function handleKeyDown(event) {\n\n            //console.log( 'handleKeyDown' );\n\n            switch (event.keyCode) {\n\n                case scope.keys.UP:\n                    pan(0, scope.keyPanSpeed);\n                    scope.update();\n                    break;\n\n                case scope.keys.BOTTOM:\n                    pan(0, -scope.keyPanSpeed);\n                    scope.update();\n                    break;\n\n                case scope.keys.LEFT:\n                    pan(scope.keyPanSpeed, 0);\n                    scope.update();\n                    break;\n\n                case scope.keys.RIGHT:\n                    pan(-scope.keyPanSpeed, 0);\n                    scope.update();\n                    break;\n\n            }\n\n        }\n\n        function handleTouchStartRotate(event) {\n\n            //console.log( 'handleTouchStartRotate' );\n\n            rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n\n        }\n\n        function handleTouchStartDolly(event) {\n\n            //console.log( 'handleTouchStartDolly' );\n\n            var dx = event.touches[0].pageX - event.touches[1].pageX;\n            var dy = event.touches[0].pageY - event.touches[1].pageY;\n\n            var distance = Math.sqrt(dx * dx + dy * dy);\n\n            dollyStart.set(0, distance);\n\n        }\n\n        function handleTouchStartPan(event) {\n\n            //console.log( 'handleTouchStartPan' );\n\n            panStart.set(event.touches[0].pageX, event.touches[0].pageY);\n\n        }\n\n        function handleTouchMoveRotate(event) {\n\n            //console.log( 'handleTouchMoveRotate' );\n\n            rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n            rotateDelta.subVectors(rotateEnd, rotateStart);\n\n            var element = scope.domElement === document ?\n                scope.domElement.body :\n                scope.domElement;\n\n            // rotating across whole screen goes 360 degrees around\n            rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\n            // rotating up and down along whole screen attempts to go 360, but limited to\n            // 180\n            rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\n            rotateStart.copy(rotateEnd);\n\n            scope.update();\n\n        }\n\n        function handleTouchMoveDolly(event) {\n\n            //console.log( 'handleTouchMoveDolly' );\n\n            var dx = event.touches[0].pageX - event.touches[1].pageX;\n            var dy = event.touches[0].pageY - event.touches[1].pageY;\n\n            var distance = Math.sqrt(dx * dx + dy * dy);\n\n            dollyEnd.set(0, distance);\n\n            dollyDelta.subVectors(dollyEnd, dollyStart);\n\n            if (dollyDelta.y > 0) {\n\n                dollyOut(getZoomScale());\n\n            } else if (dollyDelta.y < 0) {\n\n                dollyIn(getZoomScale());\n\n            }\n\n            dollyStart.copy(dollyEnd);\n\n            scope.update();\n\n        }\n\n        function handleTouchMovePan(event) {\n\n            //console.log( 'handleTouchMovePan' );\n\n            panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n\n            panDelta.subVectors(panEnd, panStart);\n\n            pan(panDelta.x, panDelta.y);\n\n            panStart.copy(panEnd);\n\n            scope.update();\n\n        }\n\n        function handleTouchEnd(event) {\n\n            //console.log( 'handleTouchEnd' );\n\n        }\n\n        //\n        // event handlers - FSM: listen for events and reset state\n        //\n\n        function onMouseDown(event) {\n\n            if (scope.enabled == false)\n                return;\n\n            event.preventDefault();\n\n            if (event.button === scope.mouseButtons.ORBIT) {\n\n                if (scope.enableRotate === false)\n                    return;\n\n                handleMouseDownRotate(event);\n\n                state = STATE.ROTATE;\n\n            } else if (event.button === scope.mouseButtons.ZOOM) {\n\n                if (scope.enableZoom === false)\n                    return;\n\n                handleMouseDownDolly(event);\n\n                state = STATE.DOLLY;\n\n            } else if (event.button === scope.mouseButtons.PAN) {\n\n                if (scope.enablePan === false)\n                    return;\n\n                handleMouseDownPan(event);\n\n                state = STATE.PAN;\n\n            }\n\n            if (state !== STATE.NONE) {\n\n                scope\n                    .domElement\n                    .addEventListener('mousemove', onMouseMove, false);\n                scope\n                    .domElement\n                    .addEventListener('mouseup', onMouseUp, false);\n\n                scope.dispatchEvent(startEvent);\n\n            }\n\n        }\n\n        function onMouseMove(event) {\n\n            if (scope.enabled == false)\n                return;\n\n            event.preventDefault();\n\n            if (state === STATE.ROTATE) {\n\n                if (scope.enableRotate === false)\n                    return;\n\n                handleMouseMoveRotate(event);\n\n            } else if (state === STATE.DOLLY) {\n\n                if (scope.enableZoom === false)\n                    return;\n\n                handleMouseMoveDolly(event);\n\n            } else if (state === STATE.PAN) {\n\n                if (scope.enablePan === false)\n                    return;\n\n                handleMouseMovePan(event);\n\n            }\n\n        }\n\n        function onMouseUp(event) {\n\n            if (scope.enabled == false)\n                return;\n\n            handleMouseUp(event);\n\n            document.removeEventListener('mousemove', onMouseMove, false);\n            document.removeEventListener('mouseup', onMouseUp, false);\n\n            scope.dispatchEvent(endEvent);\n\n            state = STATE.NONE;\n\n        }\n\n        function onMouseWheel(event) {\n\n            if (scope.enabled === false || scope.enableZoom === false || (state !== STATE.NONE && state !== STATE.ROTATE))\n                return;\n\n            event.preventDefault();\n            event.stopPropagation();\n\n            handleMouseWheel(event);\n\n            scope.dispatchEvent(startEvent); // not sure why these are here...\n            scope.dispatchEvent(endEvent);\n\n        }\n\n        function onKeyDown(event) {\n\n            if (scope.enabled === false || scope.enableKeys === false || scope.enablePan === false)\n                return;\n\n            handleKeyDown(event);\n\n        }\n\n        function onTouchStart(event) {\n\n            if (scope.enabled === false)\n                return;\n\n            switch (event.touches.length) {\n\n                case 1: // one-fingered touch: rotate\n\n                    if (scope.enableRotate === false)\n                        return;\n\n                    handleTouchStartRotate(event);\n\n                    state = STATE.TOUCH_ROTATE;\n\n                    break;\n\n                case 2: // two-fingered touch: dolly\n\n                    if (scope.enableZoom === false)\n                        return;\n\n                    handleTouchStartDolly(event);\n\n                    state = STATE.TOUCH_DOLLY;\n\n                    break;\n\n                case 3: // three-fingered touch: pan\n\n                    if (scope.enablePan === false)\n                        return;\n\n                    handleTouchStartPan(event);\n\n                    state = STATE.TOUCH_PAN;\n\n                    break;\n\n                default:\n\n                    state = STATE.NONE;\n\n            }\n\n            if (state !== STATE.NONE) {\n\n                scope.dispatchEvent(startEvent);\n\n            }\n\n        }\n\n        function onTouchMove(event) {\n\n            if (scope.enabled === false)\n                return;\n\n            event.preventDefault();\n            event.stopPropagation();\n\n            switch (event.touches.length) {\n\n                case 1: // one-fingered touch: rotate\n\n                    if (scope.enableRotate === false)\n                        return;\n                    if (state !== STATE.TOUCH_ROTATE)\n                        return; // is this needed?...\n\n                    handleTouchMoveRotate(event);\n\n                    break;\n\n                case 2: // two-fingered touch: dolly\n\n                    if (scope.enableZoom === false)\n                        return;\n                    if (state !== STATE.TOUCH_DOLLY)\n                        return; // is this needed?...\n\n                    handleTouchMoveDolly(event);\n\n                    break;\n\n                case 3: // three-fingered touch: pan\n\n                    if (scope.enablePan === false)\n                        return;\n                    if (state !== STATE.TOUCH_PAN)\n                        return; // is this needed?...\n\n                    handleTouchMovePan(event);\n\n                    break;\n\n                default:\n\n                    state = STATE.NONE;\n\n            }\n\n        }\n\n        function onTouchEnd(event) {\n\n            if (scope.enabled === false)\n                return;\n\n            handleTouchEnd(event);\n\n            scope.dispatchEvent(endEvent);\n\n            state = STATE.NONE;\n\n        }\n\n        function onContextMenu(event) {\n\n            event.preventDefault();\n\n        }\n\n        //\n\n        scope\n            .domElement\n            .addEventListener('contextmenu', onContextMenu, false);\n\n        scope\n            .domElement\n            .addEventListener('mousedown', onMouseDown, false);\n        scope\n            .domElement\n            .addEventListener('wheel', onMouseWheel, false);\n\n        scope\n            .domElement\n            .addEventListener('touchstart', onTouchStart, false);\n        scope\n            .domElement\n            .addEventListener('touchend', onTouchEnd, false);\n        scope\n            .domElement\n            .addEventListener('touchmove', onTouchMove, false);\n\n        scope\n            .domElement\n            .addEventListener('keydown', onKeyDown, false);\n\n\n\n        this.update();\n\n    };\n\n    OrbitControls.prototype = Object.create(THREE.EventDispatcher.prototype);\n    OrbitControls.prototype.constructor = OrbitControls;\n\n    Object.defineProperties(OrbitControls.prototype, {\n\n        center: {\n\n            get: function () {\n\n                console.warn('THREE.OrbitControls: .center has been renamed to .target');\n                return this.target;\n\n            }\n\n        },\n\n        // backward compatibility\n\n        noZoom: {\n\n            get: function () {\n\n                console.warn('THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.');\n                return !this.enableZoom;\n\n            },\n\n            set: function (value) {\n\n                console.warn('THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.');\n                this.enableZoom = !value;\n\n            }\n\n        },\n\n        noRotate: {\n\n            get: function () {\n\n                console.warn('THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.');\n                return !this.enableRotate;\n\n            },\n\n            set: function (value) {\n\n                console.warn('THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.');\n                this.enableRotate = !value;\n\n            }\n\n        },\n\n        noPan: {\n\n            get: function () {\n\n                console.warn('THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.');\n                return !this.enablePan;\n\n            },\n\n            set: function (value) {\n\n                console.warn('THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.');\n                this.enablePan = !value;\n\n            }\n\n        },\n\n        noKeys: {\n\n            get: function () {\n\n                console.warn('THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.');\n                return !this.enableKeys;\n\n            },\n\n            set: function (value) {\n\n                console.warn('THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.');\n                this.enableKeys = !value;\n\n            }\n\n        },\n\n        staticMoving: {\n\n            get: function () {\n\n                console.warn('THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping inste' +\n                    'ad.');\n                return !this.enableDamping;\n\n            },\n\n            set: function (value) {\n\n                console.warn('THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping inste' +\n                    'ad.');\n                this.enableDamping = !value;\n\n            }\n\n        },\n\n        dynamicDampingFactor: {\n\n            get: function () {\n\n                console.warn('THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor ' +\n                    'instead.');\n                return this.dampingFactor;\n\n            },\n\n            set: function (value) {\n\n                console.warn('THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor ' +\n                    'instead.');\n                this.dampingFactor = value;\n\n            }\n\n        }\n\n    });\n\n    return OrbitControls;\n};","/*************************************************************************************************************\n@lucascassiano\nSimilar to CubeView from R1\nimplements the new version of a handler that helps rotate the camere to specific locations, e.g. TOP or Front\n**************************************************************************************************************/\n\nimport * as THREE from \"three\";\n\nvar OrbitControls = require('./utils/OrbitControls.js')(THREE);\nvar TWEEN = require('@tweenjs/tween.js');\n\n//Base64 images converted @ https://www.base64-image.de\nconst texture_top = 'data:image/png;base64,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';\nconst texture_right = 'data:image/png;base64,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';\nconst texture_left = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAAXNSR0IArs4c6QAABGZJREFUeAHtnb1KK1EUhU/MFQURRAux8yHS+VNoJYqthfgMsUjvM+QptLURfAB9BUUbC8FKtBAb0VwmkMCWYTkh15m5Wd9AMHv2yTlnrfU5ZEIgjU6n00sctg5M2SpHeN+BPwMf2u324Cl/DRzodrt9lVwBDMJWEgFAuWPQAwCDkJVEAFDuGPQAwCBkJREAlDsGPQAwCFlJBADljkEPAAxCVhIBQLlj0AMAg5CVRABQ7hj0AMAgZCURAJQ7Bj0AMAhZSQQA5Y5BDwAMQlYSAUC5Y9ADAIOQlUQAUO4Y9ADAIGQlEQCUOwY9ADAIWUkEAOWOQQ8ADEJWEgFAuWPQAwCDkJVEAFDuGPQAwCBkJREAlDsGPQAwCFlJBADljkEPAAxCVhIBQLlj0AMAg5CVRABQ7hj0AMAgZCURAJQ7Bj0AMAhZSQQA5Y5BDwAMQlYSAUC5Y9ADAIOQlUQAUO4Y9ADAIGQlEQCUOwY9ADAIWUkEAOWOQQ8ADEJWEgFAuWPQAwCDkJXE4W8GqUFl9M7OztL7+3s6OjpK09PTIy15e3ubrq+vR3pNNnhubi4dHBwMXzfYw/BEgScrKyvp6empwMj8IcvLy2l3dze/WcLZ2gBwd3eX3t7e0ufn58gAvLy8pAyCRqORpqaKX9QWFhaCxYM9NJvNcF4V2dj7+/vcIV9fX6nX68l9fXx85L62rJO1AeBfCF5bW0v7+/tjT3VycpJmZ2fHnufq6iqdn5+njY2NtLe3N/Z8vzFB8X+X31idOSt3AAAqj6DaDQBAtf5XvjoAVB5BtRsAgGr9r3x1AKg8gmo3MFG3gQ8PD+ni4qKwo1tbW7m3e5eXlz9+FpF95rCzs1N4rboOnCgAHh8fU/Yoeqyvr+cCkN2//3RkHwABwE8uldxvtVppe3u78Krz8/O5Y4+Pj9PMzExub9JOTtQVIPv0bmlpaeyMFhcXc68MY09cwwl4E1jDUMrcEgCU6XYN1wKAGoZS5pYAoEy3a7gWANQwlDK3BABlul3DtWp3G3h6epqKfiNndXU1bW5uDm29ublJr6+vw7rIk8PDw8LrFZnvfxtTOwCyEIse30F5fn5O2WOUI/vKlvPR6HQ6fQfa7bazD3bau91uXzPvAeyij4IBIPphVwGAXeRRMABEP+wqALCLPAoGgOiHXQUAdpFHwQAQ/bCrAMAu8igYAKIfdhUA2EUeBQNA9MOuAgC7yKNgAIh+2FUAYBd5FAwA0Q+7CgDsIo+CASD6YVcBgF3kUTAARD/sKgCwizwKBoDoh10FAHaRR8EAEP2wqwDALvIoGACiH3YVANhFHgUDQPTDrgIAu8ijYACIfthVAGAXeRQMANEPuwoA7CKPggEg+mFXAYBd5FEwAEQ/7CoAsIs8CgaA6IddBQB2kUfBABD9sKsAwC7yKBgAoh92FQDYRR4FA0D0w64CALvIo2AAiH7YVQBgF3kUDADRD7sKAOwij4IBIPphVw1/M2jwEyJ2DpgL5gpgDsBfeI905rJ3A+AAAAAASUVORK5CYII=';\nconst texture_front = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAAXNSR0IArs4c6QAACRxJREFUeAHtXVeLVE0QrdU1hzVHjJhRMQfEnHANmAPoqw8iruC++xNkQR8EHwRFxYDog5gDqJgxK4qKGbOimHU/TkMPd3fn1s6MU/vVbFeBzp2u7rpdp053V3cPbF5xcXEpmQSLQI1gPTfHHQL5HoeioiL/aJ8BIFBSUuK8tBkggGBzLhoBOHQC0BkBAggy56IRgEMnAJ0RIIAgcy4aATh0AtAZAQIIMueiEYBDJwCdESCAIHMuGgE4dALQGQECCDLnohGAQycAnREggCBzLhoBOHQC0BkBAggy56IRgEMnAJ0RIIAgcy4aATh0AtAZAQIIMueiEYBDJwCdESCAIHMuGgE4dALQGQECCDLnohGAQycAnREggCBzLhoBOHQC0BkBAggy56IRgEMnAJ0RIIAgcy4aATh0AtAZAQIIMueiEYBDJwCdESCAIHMuGgE4dALQGQECCDLnohGAQycAnREggCBzLhoBOHQC0BkBAggy56IRgEMnAJ0RIIAgcy4aATh0AtAZAQIIMueiEYBDJwCdESCAIHMuGgE4dALQGQECCDLnohGAQycAnREggCBzLhoBOHQC0AVLgK9fv9KnT5/oz58/AYQ53sXE3wyKr5KeZseOHQRw05EZM2ZQq1at6O7du3T27NlKm9atW5eaN29Obdq0ob59+1LNmjUrbfPz50+6ePEiXb9+nZ4+fUq/f/9OtGncuDH17t2bhg4dSh07dkyUJ3vYunUrwdaAAQNo0KBByaokLTt9+jTdu3ePxo0bR127diX/PWnlFApbt25N06dPT6EmXyXrBICTX758SSkovmvfv393jx8+fHAkyMvLoxo14ien6Kht2rSpA6J///7eXIXP169f05YtW+jVq1dOV79+ferWrRsh8E+ePHHl58+fpwsXLtCkSZNo8uTJFWz4AviH/j58+JA6derkiOh13OfLly+dbyAOBH25f/9+0iZ///6l0tJS4nD49etX0rbpFmadAL4Da9euJYzUTGTUqFE0a9as2KYIwLt37+jcuXOEwG3bto0aNmzoRlb5Rjdu3KCdO3fSjx8/3OgbNmwYtWjRokw16B4/fkx79+6lI0eOuBliyZIlVK9evTL1ol8wC2C2W7FihQtUVJfK87x5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';\nconst texture_back = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAAXNSR0IArs4c6QAACoVJREFUeAHtXddrlFsQn8TYsfeGvfcuWFAU+4OIXURRsYJ5Cb74IP4J0ScRFbsgNlAUUcTeC/aCvffeldz7Gzi5X5L9Tr7djTsn98zAZne/06b8zsycOQtJy8rKyiElbzWQ7q3kKjhrIMPoITMz03zUdw80kJ2dzVKqB/DA2DYRFQA27XjQpgDwwMg2ERUANu140KYA8MDINhEVADbteNCmAPDAyDYRFQA27XjQpgDwwMg2ERUANu140KYA8MDINhEVADbteNCmAPDAyDYRFQA27XjQpgDwwMg2ERUANu140KYA8MDINhEVADbteNCmAPDAyDYRFQA27XjQpgDwwMg2ERUANu140KYA8MDINhEVADbteNCmAPDAyDYRFQA27XjQpgDwwMg2ERUANu140KYA8MDINhEVADbteNCmAPDAyDYRFQA27XjQpgDwwMg2ERUANu140KYA8MDINhEVADbteNCmAPDAyDYRFQA27XjQpgDwwMg2ERUANu140KYA8MDINhEVADbteNCmAPDAyDYRFQA27XjQpgDwwMg2ERUANu140KYA8MDINhEVADbteNCmAPDAyDYRFQA27XjQpgCIYOTv37/Tx48fI/Qsfl1y/2dQqljfvHkzff361bpcuXLlqEKFClSzZk3q0KEDlS5d2to/2Pjnzx/asGED/f79m7p06UKdOnUKNkf6jDnOnTtHly5donv37tGvX794XMmSJal69erUpEkT6t+/P1WqVCl0PiPnlClTCOOi0KNHj2j//v2Uk5NDffv2pebNm0cZllSflAPg1q1b9PnzZypRokQo4zCAoZ07d7IyhgwZYh5Z369evUpXrlzhPu/fv48bANjp69atowcPHvAcAF+zZs2oRo0a9PbtW3r27BkdO3aMTp06Rb169aIRI0bElMXICVmiAODOnTu0evVq+vnzJw0fPjwlxoeAKQcAa/XfP4sXL6YyZcqYr3nef/z4Qe/evaMLFy6wsg8cOMDtUUBw4sQJSk9Pp9q1a9PTp08Ju6pBgwZ55g/7cvfuXVq/fj0DtHv37tSnTx+eJy0tLXcIduf58+dp3759dPToUfry5QtNnDgxtz2RDwDsxo0bCWAZM2YM9ejRI5FpEhrjZA6AXQcD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';\nconst texture_bottom = 'data:image/png;base64,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';\nconst texture_shadow = 'data:image/png;base64,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';\n\nexport default class viewerHelper {\n    constructor(_canvas_id, _controls, callback, color = 0x0078A4) {\n        this.hoverColor = color;\n\n        this.canvas = document.getElementById(_canvas_id);\n        this.externalControls = _controls;\n        this.listenExternal = true;\n\n        this.scene = new THREE.Scene();\n        this.camera = new THREE.PerspectiveCamera(45, this.canvas.offsetWidth / this.canvas.offsetHeight, 0.1, 10000);\n        this.camera.position.set(0, 10, -30)\n        this.camera.lookAt(new THREE.Vector3());\n\n        this.enabled = true;\n        var renderer = new THREE.WebGLRenderer({\n            canvas: this.canvas,\n            antialias: true,\n            alpha: true,\n            //performance improvements\n            preserveDrawingBuffer: false,\n            failIfMajorPerformanceCaveat: true\n        });\n\n        renderer.setSize(this.canvas.offsetWidth, this.canvas.offsetHeight);\n        renderer.setClearColor(0x000000, 0.0);\n        renderer.setPixelRatio(window.devicePixelRatio);\n\n        this.renderer = renderer;\n\n        this.controls = new OrbitControls(this.camera, this.canvas);\n        this.controls.enableZoom = false;\n        this.controls.enablePan = false;\n\n        var cubeScale = 12;\n        var geometry = new THREE.BoxGeometry(cubeScale, cubeScale, cubeScale);\n        var material = new THREE.MeshBasicMaterial({ color: 0x0000FF });\n        var cube = new THREE.Mesh(geometry, material);\n        cube.name = \"cube1\";\n\n        let size = 12;\n\n        let AxisSize = size + 4;\n        var axisHelper = new THREE.AxesHelper(AxisSize);\n        axisHelper.position.set(-size / 2 - 0.25, -size / 2 - 0.25, -size / 2 - 0.25);\n        this.scene.add(axisHelper);\n\n        //creates the main cube\n        this.createCube(size);\n\n        //User Interactions\n        this.mouseMoving = false;\n        this.mouse = new THREE.Vector2(-100000, -100000);\n        this.raycaster = new THREE.Raycaster();\n\n        this.canvas.addEventListener('mousemove', this.onMouseMove);\n        this.canvas.addEventListener('mousedown', this.onMouseDown);\n        this.canvas.addEventListener('mouseup', this.onMouseUp);\n\n        this.animate = this.animate.bind(this);\n        this.animate();\n    }\n\n    onMouseDown = (event) => {\n        if (!this.enabled) return;\n\n        this.mouseMoving = false;\n        this.listenExternal = false;\n    }\n\n    onMouseMove = (event) => {\n        if (!this.enabled) return;\n\n        this.mouseMoving = true;\n        var rect = this.canvas.getBoundingClientRect();\n        this.mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;\n        this.mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;\n    }\n\n    //this identifies if the click was stable or the user was just orbiting the cube\n    onMouseUp = (event) => {\n        if (!this.enabled) return;\n\n        if (this.mouseMoving == false) {\n            if (this.INTERSECTED) {\n                this.setViewAngle(this.INTERSECTED.name);\n            }\n        } else if (this.mouseMoving = true) {\n            console.log('drag');\n        }\n\n        this.listenExternal = true;\n    }\n\n    animate(time) {\n        requestAnimationFrame(this.animate);\n        TWEEN.update(time);\n\n        this.camera.updateMatrixWorld();\n\n        this.raycaster.setFromCamera(this.mouse, this.camera);\n        var intersects = this.raycaster.intersectObjects(this.controllers.children);\n\n        if (intersects.length > 0) {\n            if (this.INTERSECTED != intersects[0].object) {\n                if (this.INTERSECTED) {\n                    this.INTERSECTED.material.color.setHex(this.INTERSECTED.currentHex); //<--putback\n                    this.INTERSECTED.material.visible = this.INTERSECTED.currVisible;\n                }\n\n                this.INTERSECTED = intersects[0].object;\n                this.INTERSECTED.currentHex = this.INTERSECTED.material.color.getHex(); //<-putback\n\n                this.INTERSECTED.currVisible = this.INTERSECTED.material.visible;\n\n                //INTERSECTED.material.color.setHex(hoverColor);\n                this.INTERSECTED.material.visible = true;\n            }\n        } else {\n            if (this.INTERSECTED) {\n                this.INTERSECTED.material.color.setHex(this.INTERSECTED.currentHex); //<-putback\n                this.INTERSECTED.material.visible = this.INTERSECTED.currVisible;\n            }\n\n            this.INTERSECTED = null;\n\n            this.controls.update();\n        }\n\n        //console.log(\"angles\", this.externalControls.getAngles());\n\n\n\n        if (this.listenExternal) {\n            let { phi, theta } = this.externalControls.getAngles();\n            this.controls.setAngles(phi, theta);\n        }\n        else {\n            let { phi, theta } = this.controls.getAngles();\n            this.externalControls.setPolarAngle(phi);\n            this.externalControls.setAzimuthalAngle(theta);\n            this.externalControls.update();\n        }\n\n        this.renderer.render(this.scene, this.camera);\n    }\n\n    createCube = (size) => {\n        var top = this.createTexturedPlane(size, texture_top);\n        top.position.y = size / 2;\n        top.rotation.x = -Math.PI / 2;\n        this.scene.add(top);\n\n        var front = this.createTexturedPlane(size, texture_front);\n        front.position.z = size / 2;\n        this.scene.add(front);\n\n        var right = this.createTexturedPlane(size, texture_right);\n        right.position.x = size / 2;\n        right.rotation.y = Math.PI / 2;\n        this.scene.add(right);\n\n        var left = this.createTexturedPlane(size, texture_left);\n        left.position.x = -size / 2;\n        left.rotation.y = -Math.PI / 2;\n        this.scene.add(left);\n\n        var back = this.createTexturedPlane(size, texture_back);\n        back.position.z = -size / 2;\n        back.rotation.y = Math.PI;\n        this.scene.add(back);\n\n        var bottom = this.createTexturedPlane(size, texture_bottom);\n        bottom.position.y = -size / 2;\n        bottom.rotation.x = Math.PI / 2;\n        this.scene.add(bottom);\n\n        var shadow = this.createTexturedPlane(size + 1.5, texture_shadow, false);\n        shadow.position.y = -size / 2 - 0.4;\n        shadow.rotation.x = -Math.PI / 2;\n        this.scene.add(shadow);\n\n        this.controllers = new THREE.Object3D();\n\n        //FRONT,TOP,RIGHT\n        var c0 = this.createCornerCube(size, 1, 1, 1);\n        c0.name = 'c0';\n        this.controllers.add(c0);\n\n        //FRONT,BOTTOM,RIGHT\n        var c1 = this.createCornerCube(size, 1, -1, 1);\n        c1.name = 'c1';\n        this.controllers.add(c1);\n\n        //FRONT,BOTTOM,lEFT\n        var c2 = this.createCornerCube(size, -1, -1, 1);\n        c2.name = 'c2';\n        this.controllers.add(c2);\n\n        //FRONT,TOP,lEFT\n        var c3 = this.createCornerCube(size, -1, 1, 1);\n        c3.name = 'c3';\n        this.controllers.add(c3);\n\n        //BACK,TOP,RIGHT\n        var c4 = this.createCornerCube(size, 1, 1, -1);\n        c4.name = 'c4';\n        this.controllers.add(c4);\n\n        //BACK,BOTTOM,RIGHT\n        var c5 = this.createCornerCube(size, 1, -1, -1);\n        c5.name = 'c5';\n        this.controllers.add(c5);\n\n        //BACK,BOTTOM,LEFT\n        var c6 = this.createCornerCube(size, -1, -1, -1);\n        c6.name = 'c6';\n        this.controllers.add(c6);\n\n        //BACK,TOP,LEFT\n        var c7 = this.createCornerCube(size, -1, 1, -1);\n        c7.name = 'c7';\n        this.controllers.add(c7);\n\n        //TOP,FRONT\n        var e0 = this.createEdgeCube(size, 0, 1, 1);\n        e0.name = 'e0';\n        this.controllers.add(e0);\n\n        //TOP,BOTTOM\n        var e1 = this.createEdgeCube(size, 0, -1, 1);\n        e1.name = 'e1';\n        this.controllers.add(e1);\n\n        //TOP,BACK\n        var e2 = this.createEdgeCube(size, 0, 1, -1);\n        e2.name = 'e2';\n        this.controllers.add(e2);\n\n        //BOTTOM,BACK\n        var e3 = this.createEdgeCube(size, 0, -1, -1);\n        e3.name = 'e3';\n        this.controllers.add(e3);\n\n        //FRONT,RIGHT\n        var e4 = this.createEdgeCube(size, 1, 0, 1);\n        e4.name = 'e4';\n        this.controllers.add(e4);\n\n        //FRONT,LEFT\n        var e5 = this.createEdgeCube(size, -1, 0, 1);\n        e5.name = 'e5';\n        this.controllers.add(e5);\n\n        //BACK,LEFT\n        var e6 = this.createEdgeCube(size, 1, 0, -1);\n        e6.name = 'e6';\n        this.controllers.add(e6);\n\n        //BACK,LEFT\n        var e7 = this.createEdgeCube(size, -1, 0, -1);\n        e7.name = 'e7';\n        this.controllers.add(e7);\n\n        //BACK,LEFT\n        var e8 = this.createEdgeCube(size, 1, 1, 0);\n        e8.name = 'e8';\n        this.controllers.add(e8);\n\n        //TOP,RIGHT\n        var e9 = this.createEdgeCube(size, -1, 1, 0);\n        e9.name = 'e9';\n        this.controllers.add(e9);\n\n        //BOTTOM,RIGHT\n        var e10 = this.createEdgeCube(size, 1, -1, 0);\n        e10.name = 'e10';\n        this.controllers.add(e10);\n\n        //BOTTOM,LEFT\n        var e11 = this.createEdgeCube(size, -1, -1, 0);\n        e11.name = 'e11';\n        this.controllers.add(e11);\n\n        //RIGHT\n        var f0 = this.createFaceCube(size, 1, 0, 0);\n        f0.name = 'f0';\n        this.controllers.add(f0);\n\n        //TOP\n        var f1 = this.createFaceCube(size, 0, 1, 0);\n        f1.name = 'f1';\n        this.controllers.add(f1);\n\n        //FRONT\n        var f2 = this.createFaceCube(size, 0, 0, 1);\n        f2.name = 'f2';\n        this.controllers.add(f2);\n\n        //LEFT\n        var f3 = this.createFaceCube(size, -1, 0, 0);\n        f3.name = 'f3';\n        this.controllers.add(f3);\n\n        //BOTTOM\n        var f4 = this.createFaceCube(size, 0, -1, 0);\n        f4.name = 'f4';\n        this.controllers.add(f4);\n\n        //BACK\n        var f5 = this.createFaceCube(size, 0, 0, -1);\n        f5.name = 'f5';\n        this.controllers.add(f5);\n\n        this.scene.add(this.controllers);\n    }\n\n    createTexturedPlane = (size, texturePath, side = THREE.DoubleSide) => {\n        var texture = new THREE.TextureLoader().load(texturePath);\n        var material = new THREE.MeshBasicMaterial({ map: texture, transparent: false, visible: true });\n        var geometry = new THREE.PlaneGeometry(size, size);\n        var mesh = new THREE.Mesh(geometry, material);\n        return mesh;\n    }\n\n    createFaceCube(size, x, y, z) {\n        var c_cube = size / 4; //corner cubes\n        var sizex = c_cube;\n        var sizey = c_cube;\n        var sizez = c_cube;\n\n        if (x == 0) {\n            sizey = size / 2;\n            sizez = size / 2;\n        }\n        if (y == 0) {\n            sizex = size / 2;\n            sizez = size / 2;\n        }\n        if (z == 0) {\n            sizex = size / 2;\n            sizey = size / 2;\n        }\n\n        var _x = x * 1.01;\n        var _y = y * 1.01;\n        var _z = z * 1.01;\n\n        var material = new THREE.MeshBasicMaterial({ color: this.hoverColor, transparent: true, opacity: 0.5, visible: false }); //change to false later\n        var geometry = new THREE.BoxGeometry(sizex, sizey, sizez);\n\n        var edgeCube = new THREE.Mesh(geometry, material);\n\n        if (x > 0) {\n            edgeCube.position.x = (size / 2) * _x - sizex / 2;\n        } else {\n            edgeCube.position.x = x == 0 ? 0 : (size / 2) * _x + sizex / 2;\n        }\n\n        if (y > 0) {\n            edgeCube.position.y = (size / 2) * _y - sizey / 2;\n        } else {\n            edgeCube.position.y = y == 0 ? 0 : (size / 2) * _y + sizey / 2;\n        }\n\n        if (z > 0) {\n            edgeCube.position.z = (size / 2) * _z - sizez / 2;\n        } else {\n            edgeCube.position.z = z == 0 ? 0 : (size / 2) * _z + sizez / 2;\n        }\n\n        return edgeCube;\n    }\n\n    createEdgeCube(size, x, y, z) {\n        var c_cube = size / 4; //corner cubes\n        var sizex = c_cube;\n        var sizey = c_cube;\n        var sizez = c_cube;\n\n        if (x == 0) {\n            sizex = size / 2;\n        }\n        if (y == 0) {\n            sizey = size / 2;\n        }\n        if (z == 0) {\n            sizez = size / 2;\n        }\n        var _x = x * 1.01;\n        var _y = y * 1.01;\n        var _z = z * 1.01;\n\n        var c_cube = size / 4; //corner cubes\n        //*creating small cubs\n        var material = new THREE.MeshBasicMaterial({ color: this.hoverColor, transparent: true, opacity: 0.5, visible: false }); //change to false later\n        var geometry = new THREE.BoxGeometry(sizex, sizey, sizez);\n        //this._createdOutlineCube(edgeCube);\n        var edgeCube = new THREE.Mesh(geometry, material);\n        if (x > 0) {\n            edgeCube.position.x = (size / 2) * _x - sizex / 2;\n        } else {\n            edgeCube.position.x = x == 0 ? 0 : (size / 2) * _x + sizex / 2;\n        }\n\n        if (y > 0) {\n            edgeCube.position.y = (size / 2) * _y - sizey / 2;\n        } else {\n            edgeCube.position.y = y == 0 ? 0 : (size / 2) * _y + sizey / 2;\n        }\n\n        if (z > 0) {\n            edgeCube.position.z = (size / 2) * _z - sizez / 2;\n        } else {\n            edgeCube.position.z = z == 0 ? 0 : (size / 2) * _z + sizez / 2;\n        }\n\n        return edgeCube;\n    }\n\n    createCornerCube(size, x, y, z) {\n        var _x = x * 1.01;\n        var _y = y * 1.01;\n        var _z = z * 1.01;\n        var c_cube = size / 4; //corner cubes\n        //*creating small cubs\n        var material = new THREE.MeshBasicMaterial({ color: this.hoverColor, transparent: true, opacity: 0.5, visible: false });\n        var geometry = new THREE.BoxGeometry(c_cube, c_cube, c_cube);\n\n        var cornerCube = new THREE.Mesh(geometry, material);\n        if (x > 0) {\n            cornerCube.position.x = (size / 2) * _x - c_cube / 2;\n        } else {\n            cornerCube.position.x = (size / 2) * _x + c_cube / 2;\n        }\n        if (y > 0) {\n            cornerCube.position.y = (size / 2) * _y - c_cube / 2;\n        } else {\n            cornerCube.position.y = (size / 2) * _y + c_cube / 2;\n        }\n        if (z > 0) {\n            cornerCube.position.z = (size / 2) * _z - c_cube / 2;\n        } else {\n            cornerCube.position.z = (size / 2) * _z + c_cube / 2;\n        }\n        return cornerCube;\n    }\n\n    setViewAngle = (name) => {\n        var phi, theta;\n\n        switch (name) {\n            //Faces\n            case 'f0': //RIGHT\n                phi = Math.PI * 0.5;\n                theta = Math.PI * 0.5;\n                break;\n            case 'f1': //TOP\n                phi = 0;\n                theta = 0;\n                break;\n            case 'f2': //FRONT\n                phi = Math.PI * 0.5;\n                theta = 0;\n                break;\n            case 'f3': //LEFT\n                phi = Math.PI * 0.5;\n                theta = -Math.PI * 0.5;\n                break;\n            case 'f4': //BOTTOM\n                phi = Math.PI;\n                theta = 0;\n                break;\n            case 'f5': //BACK\n                phi = Math.PI * 0.5;\n                theta = Math.PI;\n                break;\n            //corners\n            case 'c0': //FRONT,TOP,RIGHT\n                phi = Math.PI * 0.25;\n                theta = Math.PI * 0.25;\n                break;\n            case 'c1': //FRONT,BOTTOM, RIGHT\n                phi = Math.PI * 0.75;\n                theta = Math.PI * 0.25;\n                break;\n            case 'c2': //FRONT,BOTTOM,lEFT\n                phi = Math.PI * 0.75;\n                theta = -Math.PI * 0.25;\n                break;\n            case 'c3': //FRONT,TOP,lEFT\n                phi = Math.PI * 0.25;\n                theta = -Math.PI * 0.25;\n                break;\n            case 'c4': //BACK,TOP,RIGHT\n                phi = Math.PI * 0.25;\n                theta = Math.PI * 0.75;\n                break;\n            case 'c5': //BACK,BOTTOM,RIGHT\n                phi = Math.PI * 0.75;\n                theta = Math.PI * 0.75;\n                break;\n            case 'c6': //BACK,BOTTOM,LEFT\n                phi = Math.PI * 0.75;\n                theta = -Math.PI * 0.75;\n                break;\n            case 'c7': //BACK,TOP,LEFT\n                phi = Math.PI * 0.25;\n                theta = -Math.PI * 0.75;\n                break;\n            //Edges\n            case 'e0': //TOP,FRONT\n                phi = Math.PI * 0.25;\n                theta = 0;\n                break;\n            case 'e1': //TOP,BOTTOM\n                phi = Math.PI * 0.75;\n                theta = 0;\n                break;\n            case 'e2': //TOP,BACK\n                phi = Math.PI * 0.25;\n                theta = Math.PI;\n                break;\n            case 'e3': //BOTTOM,BACK\n                phi = Math.PI * 0.75;\n                theta = Math.PI;\n                break;\n            case 'e4': //FRONT,RIGHT\n                phi = Math.PI * 0.5;\n                theta = Math.PI * 0.25;\n                break;\n            case 'e5': //FRONT,LEFT\n                phi = Math.PI * 0.5;\n                theta = -Math.PI * 0.25;\n                break;\n            case 'e6': //BACK,RIGHT\n                phi = Math.PI * 0.5;\n                theta = Math.PI * 0.75;\n                break;\n            case 'e7': //BACK,LEFT\n                phi = Math.PI * 0.5;\n                theta = -Math.PI * 0.75;\n                break;\n            case 'e8': //BACK,LEFT\n                phi = Math.PI * 0.25;\n                theta = Math.PI * 0.5;\n                break;\n            case 'e9': //TOP,RIGHT\n                phi = Math.PI * 0.25;\n                theta = -Math.PI * 0.5;\n                break;\n            case 'e10': //BOTTOM,RIGHT\n                phi = Math.PI * 0.75;\n                theta = Math.PI * 0.5;\n                break;\n\n            case 'e11': //BOTTOM,LEFT\n                phi = Math.PI * 0.75;\n                theta = -Math.PI * 0.5;\n                break;\n            default:\n        }\n\n        if (this.externalControls) {\n            let original = this.externalControls.getAngles();\n\n            var coords = { x: original.phi, y: original.theta };\n\n            let update = this.UpdateAngles;\n\n            // console.log(\"coords---\", coords);\n            var tween = new TWEEN.Tween(coords) // Create a new tween that modifies 'coords'.\n                .to({ x: phi, y: theta }, 500) // Move to (300, 200) in 1 second.\n                .easing(TWEEN.Easing.Quadratic.Out) // Use an easing function to make the animation smooth.\n                .onUpdate(function () {\n                    //console.log(\"coords\", coords);\n                    update(coords.x, coords.y);\n                })\n                .start(); // Start the tween immediately.\n\n            // this.externalControls.setPolarAngle(phi);\n            // this.externalControls.setAzimuthalAngle(theta);\n            // this.externalControls.update();\n\n        }\n    }\n\n    UpdateAngles = (phi, theta) => {\n        this.externalControls.setPolarAngle(phi);\n        this.externalControls.setAzimuthalAngle(theta);\n        this.externalControls.update();\n    }\n}","/**\n * @author arodic / https://github.com/arodic\n * @author lucascassiano / https://github.com/lucascassiano \n * --added custom styled gizmos\n */\n\nmodule.exports = function () {\n    const THREE = require(\"three\");\n\n    var TransformControls = function (camera, domElement) {\n\n        THREE.Object3D.call(this);\n\n        domElement = (domElement !== undefined) ? domElement : document;\n\n        this.visible = false;\n\n        var _gizmo = new TransformControlsGizmo();\n        this.add(_gizmo);\n\n        var _plane = new TransformControlsPlane();\n        this.add(_plane);\n\n        var scope = this;\n\n        // Define properties with getters/setter\n        // Setting the defined property will automatically trigger change event\n        // Defined properties are passed down to gizmo and plane\n\n        defineProperty(\"camera\", camera);\n        defineProperty(\"object\", undefined);\n        defineProperty(\"enabled\", true);\n        defineProperty(\"axis\", null);\n        defineProperty(\"mode\", \"translate\");\n        defineProperty(\"translationSnap\", null);\n        defineProperty(\"rotationSnap\", null);\n        defineProperty(\"space\", \"world\");\n        defineProperty(\"size\", 1);\n        defineProperty(\"dragging\", false);\n        defineProperty(\"showX\", true);\n        defineProperty(\"showY\", true);\n        defineProperty(\"showZ\", true);\n\n        var changeEvent = { type: \"change\" };\n        var mouseDownEvent = { type: \"mouseDown\" };\n        var mouseUpEvent = { type: \"mouseUp\", mode: scope.mode };\n        var objectChangeEvent = { type: \"objectChange\" };\n\n        // Reusable utility variables\n\n        var ray = new THREE.Raycaster();\n\n        var _tempVector = new THREE.Vector3();\n        var _tempVector2 = new THREE.Vector3();\n        var _tempQuaternion = new THREE.Quaternion();\n        var _unit = {\n            X: new THREE.Vector3(1, 0, 0),\n            Y: new THREE.Vector3(0, 1, 0),\n            Z: new THREE.Vector3(0, 0, 1)\n        };\n        var _identityQuaternion = new THREE.Quaternion();\n        var _alignVector = new THREE.Vector3();\n\n        var pointStart = new THREE.Vector3();\n        var pointEnd = new THREE.Vector3();\n        var rotationAxis = new THREE.Vector3();\n        var rotationAngle = 0;\n\n        var cameraPosition = new THREE.Vector3();\n        var cameraQuaternion = new THREE.Quaternion();\n        var cameraScale = new THREE.Vector3();\n\n        var parentPosition = new THREE.Vector3();\n        var parentQuaternion = new THREE.Quaternion();\n        var parentScale = new THREE.Vector3();\n\n        var worldPositionStart = new THREE.Vector3();\n        var worldQuaternionStart = new THREE.Quaternion();\n        var worldScaleStart = new THREE.Vector3();\n\n        var worldPosition = new THREE.Vector3();\n        var worldQuaternion = new THREE.Quaternion();\n        var worldScale = new THREE.Vector3();\n\n        var eye = new THREE.Vector3();\n\n        var _positionStart = new THREE.Vector3();\n        var _quaternionStart = new THREE.Quaternion();\n        var _scaleStart = new THREE.Vector3();\n\n        // TODO: remove properties unused in plane and gizmo\n\n        defineProperty(\"parentQuaternion\", parentQuaternion);\n        defineProperty(\"worldPosition\", worldPosition);\n        defineProperty(\"worldPositionStart\", worldPositionStart);\n        defineProperty(\"worldQuaternion\", worldQuaternion);\n        defineProperty(\"worldQuaternionStart\", worldQuaternionStart);\n        defineProperty(\"cameraPosition\", cameraPosition);\n        defineProperty(\"cameraQuaternion\", cameraQuaternion);\n        defineProperty(\"pointStart\", pointStart);\n        defineProperty(\"pointEnd\", pointEnd);\n        defineProperty(\"rotationAxis\", rotationAxis);\n        defineProperty(\"rotationAngle\", rotationAngle);\n        defineProperty(\"eye\", eye);\n\n        {\n\n            domElement.addEventListener(\"mousedown\", onPointerDown, false);\n            domElement.addEventListener(\"touchstart\", onPointerDown, false);\n            domElement.addEventListener(\"mousemove\", onPointerHover, false);\n            domElement.addEventListener(\"touchmove\", onPointerHover, false);\n            document.addEventListener(\"mousemove\", onPointerMove, false);\n            domElement.addEventListener(\"touchmove\", onPointerMove, false);\n            document.addEventListener(\"mouseup\", onPointerUp, false);\n            domElement.addEventListener(\"touchend\", onPointerUp, false);\n            domElement.addEventListener(\"touchcancel\", onPointerUp, false);\n            domElement.addEventListener(\"touchleave\", onPointerUp, false);\n            domElement.addEventListener(\"contextmenu\", onContext, false);\n\n        }\n\n        this.dispose = function () {\n\n            domElement.removeEventListener(\"mousedown\", onPointerDown);\n            domElement.removeEventListener(\"touchstart\", onPointerDown);\n            domElement.removeEventListener(\"mousemove\", onPointerHover);\n            domElement.removeEventListener(\"touchmove\", onPointerHover);\n            document.removeEventListener(\"mousemove\", onPointerMove);\n            domElement.removeEventListener(\"touchmove\", onPointerMove);\n            document.removeEventListener(\"mouseup\", onPointerUp);\n            domElement.removeEventListener(\"touchend\", onPointerUp);\n            domElement.removeEventListener(\"touchcancel\", onPointerUp);\n            domElement.removeEventListener(\"touchleave\", onPointerUp);\n            domElement.removeEventListener(\"contextmenu\", onContext);\n\n        };\n\n        // Set current object\n        this.attach = function (object) {\n\n            this.object = object;\n            this.visible = true;\n\n        };\n\n        // Detatch from object\n        this.detach = function () {\n\n            this.object = undefined;\n            this.visible = false;\n            this.axis = null;\n\n        };\n\n        // Defined getter, setter and store for a property\n        function defineProperty(propName, defaultValue) {\n\n            var propValue = defaultValue;\n\n            Object.defineProperty(scope, propName, {\n\n                get: function () {\n\n                    return propValue !== undefined ? propValue : defaultValue;\n\n                },\n\n                set: function (value) {\n\n                    if (propValue !== value) {\n\n                        propValue = value;\n                        _plane[propName] = value;\n                        _gizmo[propName] = value;\n\n                        scope.dispatchEvent({ type: propName + \"-changed\", value: value });\n                        scope.dispatchEvent(changeEvent);\n\n                    }\n\n                }\n\n            });\n\n            scope[propName] = defaultValue;\n            _plane[propName] = defaultValue;\n            _gizmo[propName] = defaultValue;\n\n        }\n\n        // updateMatrixWorld  updates key transformation variables\n        this.updateMatrixWorld = function () {\n\n            if (this.object !== undefined) {\n\n                this.object.updateMatrixWorld();\n                this.object.parent.matrixWorld.decompose(parentPosition, parentQuaternion, parentScale);\n                this.object.matrixWorld.decompose(worldPosition, worldQuaternion, worldScale);\n\n            }\n\n            this.camera.updateMatrixWorld();\n            this.camera.matrixWorld.decompose(cameraPosition, cameraQuaternion, cameraScale);\n\n            if (this.camera instanceof THREE.PerspectiveCamera) {\n\n                eye.copy(cameraPosition).sub(worldPosition).normalize();\n\n            } else if (this.camera instanceof THREE.OrthographicCamera) {\n\n                eye.copy(cameraPosition).normalize();\n\n            }\n\n            THREE.Object3D.prototype.updateMatrixWorld.call(this);\n\n        };\n\n        this.pointerHover = function (pointer) {\n\n            if (this.object === undefined || this.dragging === true || (pointer.button !== undefined && pointer.button !== 0)) return;\n\n            ray.setFromCamera(pointer, this.camera);\n\n            var intersect = ray.intersectObjects(_gizmo.picker[this.mode].children, true)[0] || false;\n\n            if (intersect) {\n\n                this.axis = intersect.object.name;\n\n            } else {\n\n                this.axis = null;\n\n            }\n\n        };\n\n        this.pointerDown = function (pointer) {\n\n            if (this.object === undefined || this.dragging === true || (pointer.button !== undefined && pointer.button !== 0)) return;\n\n            if ((pointer.button === 0 || pointer.button === undefined) && this.axis !== null) {\n\n                ray.setFromCamera(pointer, this.camera);\n\n                var planeIntersect = ray.intersectObjects([_plane], true)[0] || false;\n\n                if (planeIntersect) {\n\n                    var space = this.space;\n\n                    if (this.mode === 'scale') {\n\n                        space = 'local';\n\n                    } else if (this.axis === 'E' || this.axis === 'XYZE' || this.axis === 'XYZ') {\n\n                        space = 'world';\n\n                    }\n\n                    if (space === 'local' && this.mode === 'rotate') {\n\n                        var snap = this.rotationSnap;\n\n                        if (this.axis === 'X' && snap) this.object.rotation.x = Math.round(this.object.rotation.x / snap) * snap;\n                        if (this.axis === 'Y' && snap) this.object.rotation.y = Math.round(this.object.rotation.y / snap) * snap;\n                        if (this.axis === 'Z' && snap) this.object.rotation.z = Math.round(this.object.rotation.z / snap) * snap;\n\n                    }\n\n                    this.object.updateMatrixWorld();\n                    this.object.parent.updateMatrixWorld();\n\n                    _positionStart.copy(this.object.position);\n                    _quaternionStart.copy(this.object.quaternion);\n                    _scaleStart.copy(this.object.scale);\n\n                    this.object.matrixWorld.decompose(worldPositionStart, worldQuaternionStart, worldScaleStart);\n\n                    pointStart.copy(planeIntersect.point).sub(worldPositionStart);\n\n                    if (space === 'local') pointStart.applyQuaternion(worldQuaternionStart.clone().inverse());\n\n                }\n\n                this.dragging = true;\n                mouseDownEvent.mode = this.mode;\n                this.dispatchEvent(mouseDownEvent);\n\n            }\n\n        };\n\n        this.pointerMove = function (pointer) {\n\n            var axis = this.axis;\n            var mode = this.mode;\n            var object = this.object;\n            var space = this.space;\n\n            if (mode === 'scale') {\n\n                space = 'local';\n\n            } else if (axis === 'E' || axis === 'XYZE' || axis === 'XYZ') {\n\n                space = 'world';\n\n            }\n\n            if (object === undefined || axis === null || this.dragging === false || (pointer.button !== undefined && pointer.button !== 0)) return;\n\n            ray.setFromCamera(pointer, this.camera);\n\n            var planeIntersect = ray.intersectObjects([_plane], true)[0] || false;\n\n            if (planeIntersect === false) return;\n\n            pointEnd.copy(planeIntersect.point).sub(worldPositionStart);\n\n            if (space === 'local') pointEnd.applyQuaternion(worldQuaternionStart.clone().inverse());\n\n            if (mode === 'translate') {\n\n                if (axis.search('X') === -1) {\n                    pointEnd.x = pointStart.x;\n                }\n                if (axis.search('Y') === -1) {\n                    pointEnd.y = pointStart.y;\n                }\n                if (axis.search('Z') === -1) {\n                    pointEnd.z = pointStart.z;\n                }\n\n                // Apply translate\n\n                if (space === 'local') {\n                    object.position.copy(pointEnd).sub(pointStart).applyQuaternion(_quaternionStart);\n                } else {\n                    object.position.copy(pointEnd).sub(pointStart);\n                }\n\n                object.position.add(_positionStart);\n\n                // Apply translation snap\n\n                if (this.translationSnap) {\n\n                    if (space === 'local') {\n\n                        object.position.applyQuaternion(_tempQuaternion.copy(_quaternionStart).inverse());\n\n                        if (axis.search('X') !== -1) {\n                            object.position.x = Math.round(object.position.x / this.translationSnap) * this.translationSnap;\n                        }\n\n                        if (axis.search('Y') !== -1) {\n                            object.position.y = Math.round(object.position.y / this.translationSnap) * this.translationSnap;\n                        }\n\n                        if (axis.search('Z') !== -1) {\n                            object.position.z = Math.round(object.position.z / this.translationSnap) * this.translationSnap;\n                        }\n\n                        object.position.applyQuaternion(_quaternionStart);\n\n                    }\n\n                    if (space === 'world') {\n\n                        if (object.parent) {\n                            object.position.add(_tempVector.setFromMatrixPosition(object.parent.matrixWorld));\n                        }\n\n                        if (axis.search('X') !== -1) {\n                            object.position.x = Math.round(object.position.x / this.translationSnap) * this.translationSnap;\n                        }\n\n                        if (axis.search('Y') !== -1) {\n                            object.position.y = Math.round(object.position.y / this.translationSnap) * this.translationSnap;\n                        }\n\n                        if (axis.search('Z') !== -1) {\n                            object.position.z = Math.round(object.position.z / this.translationSnap) * this.translationSnap;\n                        }\n\n                        if (object.parent) {\n                            object.position.sub(_tempVector.setFromMatrixPosition(object.parent.matrixWorld));\n                        }\n\n                    }\n\n                }\n\n            } else if (mode === 'scale') {\n\n                if (axis.search('XYZ') !== -1) {\n\n                    var d = pointEnd.length() / pointStart.length();\n\n                    if (pointEnd.dot(pointStart) < 0) d *= -1;\n\n                    _tempVector.set(d, d, d);\n\n                } else {\n\n                    _tempVector.copy(pointEnd).divide(pointStart);\n\n                    if (axis.search('X') === -1) {\n                        _tempVector.x = 1;\n                    }\n                    if (axis.search('Y') === -1) {\n                        _tempVector.y = 1;\n                    }\n                    if (axis.search('Z') === -1) {\n                        _tempVector.z = 1;\n                    }\n\n                }\n\n                // Apply scale\n\n                object.scale.copy(_scaleStart).multiply(_tempVector);\n\n            } else if (mode === 'rotate') {\n\n                var ROTATION_SPEED = 20 / worldPosition.distanceTo(_tempVector.setFromMatrixPosition(this.camera.matrixWorld));\n\n                var quaternion = this.space === \"local\" ? worldQuaternion : _identityQuaternion;\n\n                var unit = _unit[axis];\n\n                if (axis === 'E') {\n\n                    _tempVector.copy(pointEnd).cross(pointStart);\n                    rotationAxis.copy(eye);\n                    rotationAngle = pointEnd.angleTo(pointStart) * (_tempVector.dot(eye) < 0 ? 1 : -1);\n\n                } else if (axis === 'XYZE') {\n\n                    _tempVector.copy(pointEnd).sub(pointStart).cross(eye).normalize();\n                    rotationAxis.copy(_tempVector);\n                    rotationAngle = pointEnd.sub(pointStart).dot(_tempVector.cross(eye)) * ROTATION_SPEED;\n\n                } else if (axis === 'X' || axis === 'Y' || axis === 'Z') {\n\n                    _alignVector.copy(unit).applyQuaternion(quaternion);\n\n                    rotationAxis.copy(unit);\n\n                    _tempVector = unit.clone();\n                    _tempVector2 = pointEnd.clone().sub(pointStart);\n                    if (space === 'local') {\n                        _tempVector.applyQuaternion(quaternion);\n                        _tempVector2.applyQuaternion(worldQuaternionStart);\n                    }\n                    rotationAngle = _tempVector2.dot(_tempVector.cross(eye).normalize()) * ROTATION_SPEED;\n\n                }\n\n                // Apply rotation snap\n\n                if (this.rotationSnap) rotationAngle = Math.round(rotationAngle / this.rotationSnap) * this.rotationSnap;\n\n                this.rotationAngle = rotationAngle;\n\n                // Apply rotate\n\n                if (space === 'local') {\n\n                    object.quaternion.copy(_quaternionStart);\n                    object.quaternion.multiply(_tempQuaternion.setFromAxisAngle(rotationAxis, rotationAngle));\n\n                } else {\n\n                    object.quaternion.copy(_tempQuaternion.setFromAxisAngle(rotationAxis, rotationAngle));\n                    object.quaternion.multiply(_quaternionStart);\n\n                }\n\n            }\n\n            this.dispatchEvent(changeEvent);\n            this.dispatchEvent(objectChangeEvent);\n\n        };\n\n        this.pointerUp = function (pointer) {\n\n            if (pointer.button !== undefined && pointer.button !== 0) return;\n\n            if (this.dragging && (this.axis !== null)) {\n\n                mouseUpEvent.mode = this.mode;\n                this.dispatchEvent(mouseUpEvent);\n\n            }\n\n            this.dragging = false;\n\n            if (pointer.button === undefined) this.axis = null;\n\n        };\n\n        // normalize mouse / touch pointer and remap {x,y} to view space.\n\n        function getPointer(event) {\n\n            var pointer = event.changedTouches ? event.changedTouches[0] : event;\n\n            var rect = domElement.getBoundingClientRect();\n\n            return {\n                x: (pointer.clientX - rect.left) / rect.width * 2 - 1,\n                y: - (pointer.clientY - rect.top) / rect.height * 2 + 1,\n                button: event.button\n            };\n\n        }\n\n        // mouse / touch event handlers\n\n        function onContext(event) {\n\n            event.preventDefault();\n\n        }\n\n        function onPointerHover(event) {\n\n            if (!scope.enabled) return;\n\n            scope.pointerHover(getPointer(event));\n\n        }\n\n        function onPointerDown(event) {\n\n            if (!scope.enabled) return;\n\n            event.preventDefault();\n\n            scope.pointerHover(getPointer(event));\n            scope.pointerDown(getPointer(event));\n            //scope.dispatchEvent(mouseDownEvent);\n\n        }\n\n        function onPointerMove(event) {\n\n            if (!scope.enabled) return;\n\n            event.preventDefault();\n\n            scope.pointerMove(getPointer(event));\n\n        }\n\n        function onPointerUp(event) {\n\n            if (!scope.enabled) return;\n\n            event.preventDefault(); // Prevent MouseEvent on mobile\n\n            scope.pointerUp(getPointer(event));\n\n        }\n\n        // TODO: depricate\n\n        this.getMode = function () {\n\n            return scope.mode;\n\n        };\n\n        this.setMode = function (mode) {\n\n            scope.mode = mode;\n\n        };\n\n        this.setTranslationSnap = function (translationSnap) {\n\n            scope.translationSnap = translationSnap;\n\n        };\n\n        this.setRotationSnap = function (rotationSnap) {\n\n            scope.rotationSnap = rotationSnap;\n\n        };\n\n        this.setSize = function (size) {\n\n            scope.size = size;\n\n        };\n\n        this.setSpace = function (space) {\n\n            scope.space = space;\n\n        };\n\n        this.update = function () {\n\n            console.warn('THREE.TransformControls: update function has been depricated.');\n\n        };\n\n    };\n\n    TransformControls.prototype = Object.assign(Object.create(THREE.Object3D.prototype), {\n\n        constructor: TransformControls,\n\n        isTransformControls: true\n\n    });\n\n\n    var TransformControlsGizmo = function () {\n\n        'use strict';\n\n        THREE.Object3D.call(this);\n\n        this.type = 'TransformControlsGizmo';\n\n        // shared materials\n\n        var gizmoMaterial = new THREE.MeshBasicMaterial({\n            depthTest: false,\n            depthWrite: false,\n            transparent: true,\n            side: THREE.DoubleSide,\n            fog: false\n        });\n\n        var gizmoLineMaterial = new THREE.LineBasicMaterial({\n            depthTest: false,\n            depthWrite: false,\n            transparent: true,\n            linewidth: 1,\n            fog: false\n        });\n\n        // Make unique material for each axis/color\n\n        var matInvisible = gizmoMaterial.clone();\n        matInvisible.opacity = 0.15;\n\n        var matHelper = gizmoMaterial.clone();\n        matHelper.opacity = 0.33;\n\n        var matRed = gizmoMaterial.clone();\n        matRed.color.set(0xff0000);\n\n        var matGreen = gizmoMaterial.clone();\n        matGreen.color.set(0x00ff00);\n\n        var matBlue = gizmoMaterial.clone();\n        matBlue.color.set(0x0000ff);\n\n        var matWhiteTransperent = gizmoMaterial.clone();\n        matWhiteTransperent.opacity = 0.25;\n\n        var matYellowTransparent = matWhiteTransperent.clone();\n        matYellowTransparent.color.set(0xffff00);\n\n        var matCyanTransparent = matWhiteTransperent.clone();\n        matCyanTransparent.color.set(0x00ffff);\n\n        var matMagentaTransparent = matWhiteTransperent.clone();\n        matMagentaTransparent.color.set(0xff00ff);\n\n        var matYellow = gizmoMaterial.clone();\n        matYellow.color.set(0xffff00);\n\n        var matLineRed = gizmoLineMaterial.clone();\n        matLineRed.color.set(0xff0000);\n\n        var matLineGreen = gizmoLineMaterial.clone();\n        matLineGreen.color.set(0x00ff00);\n\n        var matLineBlue = gizmoLineMaterial.clone();\n        matLineBlue.color.set(0x0000ff);\n\n        var matLineCyan = gizmoLineMaterial.clone();\n        matLineCyan.color.set(0x00ffff);\n\n        var matLineMagenta = gizmoLineMaterial.clone();\n        matLineMagenta.color.set(0xff00ff);\n\n        var matLineYellow = gizmoLineMaterial.clone();\n        matLineYellow.color.set(0xffff00);\n\n        var matLineGray = gizmoLineMaterial.clone();\n        matLineGray.color.set(0x787878);\n\n        var matLineYellowTransparent = matLineYellow.clone();\n        matLineYellowTransparent.opacity = 0.25;\n\n        // reusable geometry\n\n        var arrowGeometry = new THREE.CylinderBufferGeometry(0, 0.05, 0.2, 12, 1, false);\n\n        var scaleHandleGeometry = new THREE.BoxBufferGeometry(0.125, 0.125, 0.125);\n\n        var lineGeometry = new THREE.BufferGeometry();\n        lineGeometry.addAttribute('position', new THREE.Float32BufferAttribute([0, 0, 0, 1, 0, 0], 3));\n\n        var CircleGeometry = function (radius, arc) {\n\n            var geometry = new THREE.BufferGeometry();\n            var vertices = [];\n\n            for (var i = 0; i <= 64 * arc; ++i) {\n\n                vertices.push(0, Math.cos(i / 32 * Math.PI) * radius, Math.sin(i / 32 * Math.PI) * radius);\n\n            }\n\n            geometry.addAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));\n\n            return geometry;\n\n        };\n\n        // Special geometry for transform helper. If scaled with position vector it spans from [0,0,0] to position\n\n        var TranslateHelperGeometry = function (radius, arc) {\n\n            var geometry = new THREE.BufferGeometry()\n\n            geometry.addAttribute('position', new THREE.Float32BufferAttribute([0, 0, 0, 1, 1, 1], 3));\n\n            return geometry;\n\n        };\n\n        // Gizmo definitions - custom hierarchy definitions for setupGizmo() function\n\n        var gizmoTranslate = {\n            X: [\n                [new THREE.Mesh(arrowGeometry, matRed), [1, 0, 0], [0, 0, -Math.PI / 2], null, 'fwd'],\n                [new THREE.Mesh(arrowGeometry, matRed), [1, 0, 0], [0, 0, Math.PI / 2], null, 'bwd'],\n                [new THREE.Line(lineGeometry, matLineRed)]\n            ],\n            Y: [\n                [new THREE.Mesh(arrowGeometry, matGreen), [0, 1, 0], null, null, 'fwd'],\n                [new THREE.Mesh(arrowGeometry, matGreen), [0, 1, 0], [Math.PI, 0, 0], null, 'bwd'],\n                [new THREE.Line(lineGeometry, matLineGreen), null, [0, 0, Math.PI / 2]]\n            ],\n            Z: [\n                [new THREE.Mesh(arrowGeometry, matBlue), [0, 0, 1], [Math.PI / 2, 0, 0], null, 'fwd'],\n                [new THREE.Mesh(arrowGeometry, matBlue), [0, 0, 1], [-Math.PI / 2, 0, 0], null, 'bwd'],\n                [new THREE.Line(lineGeometry, matLineBlue), null, [0, -Math.PI / 2, 0]]\n            ],\n            XYZ: [\n                [new THREE.Mesh(new THREE.OctahedronBufferGeometry(0.1, 0), matWhiteTransperent), [0, 0, 0], [0, 0, 0]]\n            ],\n            XY: [\n                [new THREE.Mesh(new THREE.PlaneBufferGeometry(0.295, 0.295), matYellowTransparent), [0.15, 0.15, 0]],\n                [new THREE.Line(lineGeometry, matLineYellow), [0.18, 0.3, 0], null, [0.125, 1, 1]],\n                [new THREE.Line(lineGeometry, matLineYellow), [0.3, 0.18, 0], [0, 0, Math.PI / 2], [0.125, 1, 1]]\n            ],\n            YZ: [\n                [new THREE.Mesh(new THREE.PlaneBufferGeometry(0.295, 0.295), matCyanTransparent), [0, 0.15, 0.15], [0, Math.PI / 2, 0]],\n                [new THREE.Line(lineGeometry, matLineCyan), [0, 0.18, 0.3], [0, 0, Math.PI / 2], [0.125, 1, 1]],\n                [new THREE.Line(lineGeometry, matLineCyan), [0, 0.3, 0.18], [0, -Math.PI / 2, 0], [0.125, 1, 1]]\n            ],\n            XZ: [\n                [new THREE.Mesh(new THREE.PlaneBufferGeometry(0.295, 0.295), matMagentaTransparent), [0.15, 0, 0.15], [-Math.PI / 2, 0, 0]],\n                [new THREE.Line(lineGeometry, matLineMagenta), [0.18, 0, 0.3], null, [0.125, 1, 1]],\n                [new THREE.Line(lineGeometry, matLineMagenta), [0.3, 0, 0.18], [0, -Math.PI / 2, 0], [0.125, 1, 1]]\n            ]\n        };\n\n        var pickerTranslate = {\n            X: [\n                [new THREE.Mesh(new THREE.CylinderBufferGeometry(0.2, 0, 1, 4, 1, false), matInvisible), [0.6, 0, 0], [0, 0, -Math.PI / 2]]\n            ],\n            Y: [\n                [new THREE.Mesh(new THREE.CylinderBufferGeometry(0.2, 0, 1, 4, 1, false), matInvisible), [0, 0.6, 0]]\n            ],\n            Z: [\n                [new THREE.Mesh(new THREE.CylinderBufferGeometry(0.2, 0, 1, 4, 1, false), matInvisible), [0, 0, 0.6], [Math.PI / 2, 0, 0]]\n            ],\n            XYZ: [\n                [new THREE.Mesh(new THREE.OctahedronBufferGeometry(0.2, 0), matInvisible)]\n            ],\n            XY: [\n                [new THREE.Mesh(new THREE.PlaneBufferGeometry(0.4, 0.4), matInvisible), [0.2, 0.2, 0]]\n            ],\n            YZ: [\n                [new THREE.Mesh(new THREE.PlaneBufferGeometry(0.4, 0.4), matInvisible), [0, 0.2, 0.2], [0, Math.PI / 2, 0]]\n            ],\n            XZ: [\n                [new THREE.Mesh(new THREE.PlaneBufferGeometry(0.4, 0.4), matInvisible), [0.2, 0, 0.2], [-Math.PI / 2, 0, 0]]\n            ]\n        };\n\n        var helperTranslate = {\n            START: [\n                [new THREE.Mesh(new THREE.OctahedronBufferGeometry(0.01, 2), matHelper), null, null, null, 'helper']\n            ],\n            END: [\n                [new THREE.Mesh(new THREE.OctahedronBufferGeometry(0.01, 2), matHelper), null, null, null, 'helper']\n            ],\n            DELTA: [\n                [new THREE.Line(TranslateHelperGeometry(), matHelper), null, null, null, 'helper']\n            ],\n            X: [\n                [new THREE.Line(lineGeometry, matHelper.clone()), [-1e3, 0, 0], null, [1e6, 1, 1], 'helper']\n            ],\n            Y: [\n                [new THREE.Line(lineGeometry, matHelper.clone()), [0, -1e3, 0], [0, 0, Math.PI / 2], [1e6, 1, 1], 'helper']\n            ],\n            Z: [\n                [new THREE.Line(lineGeometry, matHelper.clone()), [0, 0, -1e3], [0, -Math.PI / 2, 0], [1e6, 1, 1], 'helper']\n            ]\n        };\n\n        var gizmoRotate = {\n            X: [\n                [new THREE.Line(CircleGeometry(1, 0.5), matLineRed)],\n                [new THREE.Mesh(new THREE.OctahedronBufferGeometry(0.04, 0), matRed), [0, 0, 0.99], null, [1, 3, 1]],\n            ],\n            Y: [\n                [new THREE.Line(CircleGeometry(1, 0.5), matLineGreen), null, [0, 0, -Math.PI / 2]],\n                [new THREE.Mesh(new THREE.OctahedronBufferGeometry(0.04, 0), matGreen), [0, 0, 0.99], null, [3, 1, 1]],\n            ],\n            Z: [\n                [new THREE.Line(CircleGeometry(1, 0.5), matLineBlue), null, [0, Math.PI / 2, 0]],\n                [new THREE.Mesh(new THREE.OctahedronBufferGeometry(0.04, 0), matBlue), [0.99, 0, 0], null, [1, 3, 1]],\n            ],\n            E: [\n                [new THREE.Line(CircleGeometry(1.25, 1), matLineYellowTransparent), null, [0, Math.PI / 2, 0]],\n                [new THREE.Mesh(new THREE.CylinderBufferGeometry(0.03, 0, 0.15, 4, 1, false), matLineYellowTransparent), [1.17, 0, 0], [0, 0, -Math.PI / 2], [1, 1, 0.001]],\n                [new THREE.Mesh(new THREE.CylinderBufferGeometry(0.03, 0, 0.15, 4, 1, false), matLineYellowTransparent), [-1.17, 0, 0], [0, 0, Math.PI / 2], [1, 1, 0.001]],\n                [new THREE.Mesh(new THREE.CylinderBufferGeometry(0.03, 0, 0.15, 4, 1, false), matLineYellowTransparent), [0, -1.17, 0], [Math.PI, 0, 0], [1, 1, 0.001]],\n                [new THREE.Mesh(new THREE.CylinderBufferGeometry(0.03, 0, 0.15, 4, 1, false), matLineYellowTransparent), [0, 1.17, 0], [0, 0, 0], [1, 1, 0.001]],\n            ],\n            XYZE: [\n                [new THREE.Line(CircleGeometry(1, 1), matLineGray), null, [0, Math.PI / 2, 0]]\n            ]\n        };\n\n        var helperRotate = {\n            AXIS: [\n                [new THREE.Line(lineGeometry, matHelper.clone()), [-1e3, 0, 0], null, [1e6, 1, 1], 'helper']\n            ]\n        };\n\n        var pickerRotate = {\n            X: [\n                [new THREE.Mesh(new THREE.TorusBufferGeometry(1, 0.1, 4, 24), matInvisible), [0, 0, 0], [0, -Math.PI / 2, -Math.PI / 2]],\n            ],\n            Y: [\n                [new THREE.Mesh(new THREE.TorusBufferGeometry(1, 0.1, 4, 24), matInvisible), [0, 0, 0], [Math.PI / 2, 0, 0]],\n            ],\n            Z: [\n                [new THREE.Mesh(new THREE.TorusBufferGeometry(1, 0.1, 4, 24), matInvisible), [0, 0, 0], [0, 0, -Math.PI / 2]],\n            ],\n            E: [\n                [new THREE.Mesh(new THREE.TorusBufferGeometry(1.25, 0.1, 2, 24), matInvisible)]\n            ],\n            XYZE: [\n                [new THREE.Mesh(new THREE.SphereBufferGeometry(0.7, 10, 8), matInvisible)]\n            ]\n        };\n\n        var gizmoScale = {\n            X: [\n                [new THREE.Mesh(scaleHandleGeometry, matRed), [0.8, 0, 0], [0, 0, -Math.PI / 2]],\n                [new THREE.Line(lineGeometry, matLineRed), null, null, [0.8, 1, 1]]\n            ],\n            Y: [\n                [new THREE.Mesh(scaleHandleGeometry, matGreen), [0, 0.8, 0]],\n                [new THREE.Line(lineGeometry, matLineGreen), null, [0, 0, Math.PI / 2], [0.8, 1, 1]]\n            ],\n            Z: [\n                [new THREE.Mesh(scaleHandleGeometry, matBlue), [0, 0, 0.8], [Math.PI / 2, 0, 0]],\n                [new THREE.Line(lineGeometry, matLineBlue), null, [0, -Math.PI / 2, 0], [0.8, 1, 1]]\n            ],\n            XY: [\n                [new THREE.Mesh(scaleHandleGeometry, matYellowTransparent), [0.85, 0.85, 0], null, [2, 2, 0.2]],\n                [new THREE.Line(lineGeometry, matLineYellow), [0.855, 0.98, 0], null, [0.125, 1, 1]],\n                [new THREE.Line(lineGeometry, matLineYellow), [0.98, 0.855, 0], [0, 0, Math.PI / 2], [0.125, 1, 1]]\n            ],\n            YZ: [\n                [new THREE.Mesh(scaleHandleGeometry, matCyanTransparent), [0, 0.85, 0.85], null, [0.2, 2, 2]],\n                [new THREE.Line(lineGeometry, matLineCyan), [0, 0.855, 0.98], [0, 0, Math.PI / 2], [0.125, 1, 1]],\n                [new THREE.Line(lineGeometry, matLineCyan), [0, 0.98, 0.855], [0, -Math.PI / 2, 0], [0.125, 1, 1]]\n            ],\n            XZ: [\n                [new THREE.Mesh(scaleHandleGeometry, matMagentaTransparent), [0.85, 0, 0.85], null, [2, 0.2, 2]],\n                [new THREE.Line(lineGeometry, matLineMagenta), [0.855, 0, 0.98], null, [0.125, 1, 1]],\n                [new THREE.Line(lineGeometry, matLineMagenta), [0.98, 0, 0.855], [0, -Math.PI / 2, 0], [0.125, 1, 1]]\n            ],\n            XYZX: [\n                [new THREE.Mesh(new THREE.BoxBufferGeometry(0.125, 0.125, 0.125), matWhiteTransperent), [1.1, 0, 0]],\n            ],\n            XYZY: [\n                [new THREE.Mesh(new THREE.BoxBufferGeometry(0.125, 0.125, 0.125), matWhiteTransperent), [0, 1.1, 0]],\n            ],\n            XYZZ: [\n                [new THREE.Mesh(new THREE.BoxBufferGeometry(0.125, 0.125, 0.125), matWhiteTransperent), [0, 0, 1.1]],\n            ]\n        };\n\n        var pickerScale = {\n            X: [\n                [new THREE.Mesh(new THREE.CylinderBufferGeometry(0.2, 0, 0.8, 4, 1, false), matInvisible), [0.5, 0, 0], [0, 0, -Math.PI / 2]]\n            ],\n            Y: [\n                [new THREE.Mesh(new THREE.CylinderBufferGeometry(0.2, 0, 0.8, 4, 1, false), matInvisible), [0, 0.5, 0]]\n            ],\n            Z: [\n                [new THREE.Mesh(new THREE.CylinderBufferGeometry(0.2, 0, 0.8, 4, 1, false), matInvisible), [0, 0, 0.5], [Math.PI / 2, 0, 0]]\n            ],\n            XY: [\n                [new THREE.Mesh(scaleHandleGeometry, matInvisible), [0.85, 0.85, 0], null, [3, 3, 0.2]],\n            ],\n            YZ: [\n                [new THREE.Mesh(scaleHandleGeometry, matInvisible), [0, 0.85, 0.85], null, [0.2, 3, 3]],\n            ],\n            XZ: [\n                [new THREE.Mesh(scaleHandleGeometry, matInvisible), [0.85, 0, 0.85], null, [3, 0.2, 3]],\n            ],\n            XYZX: [\n                [new THREE.Mesh(new THREE.BoxBufferGeometry(0.2, 0.2, 0.2), matInvisible), [1.1, 0, 0]],\n            ],\n            XYZY: [\n                [new THREE.Mesh(new THREE.BoxBufferGeometry(0.2, 0.2, 0.2), matInvisible), [0, 1.1, 0]],\n            ],\n            XYZZ: [\n                [new THREE.Mesh(new THREE.BoxBufferGeometry(0.2, 0.2, 0.2), matInvisible), [0, 0, 1.1]],\n            ]\n        };\n\n        var helperScale = {\n            X: [\n                [new THREE.Line(lineGeometry, matHelper.clone()), [-1e3, 0, 0], null, [1e6, 1, 1], 'helper']\n            ],\n            Y: [\n                [new THREE.Line(lineGeometry, matHelper.clone()), [0, -1e3, 0], [0, 0, Math.PI / 2], [1e6, 1, 1], 'helper']\n            ],\n            Z: [\n                [new THREE.Line(lineGeometry, matHelper.clone()), [0, 0, -1e3], [0, -Math.PI / 2, 0], [1e6, 1, 1], 'helper']\n            ]\n        };\n\n        // Creates an Object3D with gizmos described in custom hierarchy definition.\n\n        var setupGizmo = function (gizmoMap) {\n\n            var gizmo = new THREE.Object3D();\n\n            for (var name in gizmoMap) {\n\n                for (var i = gizmoMap[name].length; i--;) {\n\n                    var object = gizmoMap[name][i][0].clone();\n                    var position = gizmoMap[name][i][1];\n                    var rotation = gizmoMap[name][i][2];\n                    var scale = gizmoMap[name][i][3];\n                    var tag = gizmoMap[name][i][4];\n\n                    // name and tag properties are essential for picking and updating logic.\n                    object.name = name;\n                    object.tag = tag;\n\n                    if (position) {\n                        object.position.set(position[0], position[1], position[2]);\n                    }\n                    if (rotation) {\n                        object.rotation.set(rotation[0], rotation[1], rotation[2]);\n                    }\n                    if (scale) {\n                        object.scale.set(scale[0], scale[1], scale[2]);\n                    }\n\n                    object.updateMatrix();\n\n                    var tempGeometry = object.geometry.clone();\n                    tempGeometry.applyMatrix(object.matrix);\n                    object.geometry = tempGeometry;\n\n                    object.position.set(0, 0, 0);\n                    object.rotation.set(0, 0, 0);\n                    object.scale.set(1, 1, 1);\n\n                    gizmo.add(object);\n\n                }\n\n            }\n\n            return gizmo;\n\n        };\n\n        // Reusable utility variables\n\n        var tempVector = new THREE.Vector3(0, 0, 0);\n        var tempEuler = new THREE.Euler();\n        var alignVector = new THREE.Vector3(0, 1, 0);\n        var zeroVector = new THREE.Vector3(0, 0, 0);\n        var lookAtMatrix = new THREE.Matrix4();\n        var tempQuaternion = new THREE.Quaternion();\n        var tempQuaternion2 = new THREE.Quaternion();\n        var identityQuaternion = new THREE.Quaternion();\n\n        var unitX = new THREE.Vector3(1, 0, 0);\n        var unitY = new THREE.Vector3(0, 1, 0);\n        var unitZ = new THREE.Vector3(0, 0, 1);\n\n        // Gizmo creation\n\n        this.gizmo = {};\n        this.picker = {};\n        this.helper = {};\n\n        this.add(this.gizmo[\"translate\"] = setupGizmo(gizmoTranslate));\n        this.add(this.gizmo[\"rotate\"] = setupGizmo(gizmoRotate));\n        this.add(this.gizmo[\"scale\"] = setupGizmo(gizmoScale));\n        this.add(this.picker[\"translate\"] = setupGizmo(pickerTranslate));\n        this.add(this.picker[\"rotate\"] = setupGizmo(pickerRotate));\n        this.add(this.picker[\"scale\"] = setupGizmo(pickerScale));\n        this.add(this.helper[\"translate\"] = setupGizmo(helperTranslate));\n        this.add(this.helper[\"rotate\"] = setupGizmo(helperRotate));\n        this.add(this.helper[\"scale\"] = setupGizmo(helperScale));\n\n        // Pickers should be hidden always\n\n        this.picker[\"translate\"].visible = false;\n        this.picker[\"rotate\"].visible = false;\n        this.picker[\"scale\"].visible = false;\n\n        // updateMatrixWorld will update transformations and appearance of individual handles\n\n        this.updateMatrixWorld = function () {\n\n            var space = this.space;\n\n            if (this.mode === 'scale') space = 'local'; // scale always oriented to local rotation\n\n            var quaternion = space === \"local\" ? this.worldQuaternion : identityQuaternion;\n\n            // Show only gizmos for current transform mode\n\n            this.gizmo[\"translate\"].visible = this.mode === \"translate\";\n            this.gizmo[\"rotate\"].visible = this.mode === \"rotate\";\n            this.gizmo[\"scale\"].visible = this.mode === \"scale\";\n\n            this.helper[\"translate\"].visible = this.mode === \"translate\";\n            this.helper[\"rotate\"].visible = this.mode === \"rotate\";\n            this.helper[\"scale\"].visible = this.mode === \"scale\";\n\n\n            var handles = [];\n            handles = handles.concat(this.picker[this.mode].children);\n            handles = handles.concat(this.gizmo[this.mode].children);\n            handles = handles.concat(this.helper[this.mode].children);\n\n            for (var i = 0; i < handles.length; i++) {\n\n                var handle = handles[i];\n\n                // hide aligned to camera\n\n                handle.visible = true;\n                handle.rotation.set(0, 0, 0);\n                handle.position.copy(this.worldPosition);\n\n                var eyeDistance = this.worldPosition.distanceTo(this.cameraPosition);\n                handle.scale.set(1, 1, 1).multiplyScalar(eyeDistance * this.size / 7);\n\n                // TODO: simplify helpers and consider decoupling from gizmo\n\n                if (handle.tag === 'helper') {\n\n                    handle.visible = false;\n\n                    if (handle.name === 'AXIS') {\n\n                        handle.position.copy(this.worldPositionStart);\n                        handle.visible = !!this.axis;\n\n                        if (this.axis === 'X') {\n\n                            tempQuaternion.setFromEuler(tempEuler.set(0, 0, 0));\n                            handle.quaternion.copy(quaternion).multiply(tempQuaternion);\n\n                            if (Math.abs(alignVector.copy(unitX).applyQuaternion(quaternion).dot(this.eye)) > 0.9) {\n                                handle.visible = false;\n                            }\n\n                        }\n\n                        if (this.axis === 'Y') {\n\n                            tempQuaternion.setFromEuler(tempEuler.set(0, 0, Math.PI / 2));\n                            handle.quaternion.copy(quaternion).multiply(tempQuaternion);\n\n                            if (Math.abs(alignVector.copy(unitY).applyQuaternion(quaternion).dot(this.eye)) > 0.9) {\n                                handle.visible = false;\n                            }\n\n                        }\n\n                        if (this.axis === 'Z') {\n\n                            tempQuaternion.setFromEuler(tempEuler.set(0, Math.PI / 2, 0));\n                            handle.quaternion.copy(quaternion).multiply(tempQuaternion);\n\n                            if (Math.abs(alignVector.copy(unitZ).applyQuaternion(quaternion).dot(this.eye)) > 0.9) {\n                                handle.visible = false;\n                            }\n\n                        }\n\n                        if (this.axis === 'XYZE') {\n\n                            tempQuaternion.setFromEuler(tempEuler.set(0, Math.PI / 2, 0));\n                            alignVector.copy(this.rotationAxis);\n                            handle.quaternion.setFromRotationMatrix(lookAtMatrix.lookAt(zeroVector, alignVector, unitY));\n                            handle.quaternion.multiply(tempQuaternion);\n                            handle.visible = this.dragging;\n\n                        }\n\n                        if (this.axis === 'E') {\n\n                            handle.visible = false;\n\n                        }\n\n\n                    } else if (handle.name === 'START') {\n\n                        handle.position.copy(this.worldPositionStart);\n                        handle.visible = this.dragging;\n\n                    } else if (handle.name === 'END') {\n\n                        handle.position.copy(this.worldPosition);\n                        handle.visible = this.dragging;\n\n                    } else if (handle.name === 'DELTA') {\n\n                        handle.position.copy(this.worldPositionStart);\n                        handle.quaternion.copy(this.worldQuaternionStart);\n                        tempVector.set(1e-10, 1e-10, 1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1);\n                        tempVector.applyQuaternion(this.worldQuaternionStart.clone().inverse());\n                        handle.scale.copy(tempVector);\n                        handle.visible = this.dragging;\n\n                    } else {\n\n                        handle.quaternion.copy(quaternion);\n\n                        if (this.dragging) {\n\n                            handle.position.copy(this.worldPositionStart);\n\n                        } else {\n\n                            handle.position.copy(this.worldPosition);\n\n                        }\n\n                        if (this.axis) {\n\n                            handle.visible = this.axis.search(handle.name) !== -1;\n\n                        }\n\n                    }\n\n                    // If updating helper, skip rest of the loop\n                    continue;\n\n                }\n\n                // Align handles to current local or world rotation\n\n                handle.quaternion.copy(quaternion);\n\n                if (this.mode === 'translate' || this.mode === 'scale') {\n\n                    // Hide translate and scale axis facing the camera\n\n                    var AXIS_HIDE_TRESHOLD = 0.99;\n                    var PLANE_HIDE_TRESHOLD = 0.2;\n                    var AXIS_FLIP_TRESHOLD = -0.4;\n\n\n                    if (handle.name === 'X' || handle.name === 'XYZX') {\n                        if (Math.abs(alignVector.copy(unitX).applyQuaternion(quaternion).dot(this.eye)) > AXIS_HIDE_TRESHOLD) {\n                            handle.scale.set(1e-10, 1e-10, 1e-10);\n                            handle.visible = false;\n                        }\n                    }\n                    if (handle.name === 'Y' || handle.name === 'XYZY') {\n                        if (Math.abs(alignVector.copy(unitY).applyQuaternion(quaternion).dot(this.eye)) > AXIS_HIDE_TRESHOLD) {\n                            handle.scale.set(1e-10, 1e-10, 1e-10);\n                            handle.visible = false;\n                        }\n                    }\n                    if (handle.name === 'Z' || handle.name === 'XYZZ') {\n                        if (Math.abs(alignVector.copy(unitZ).applyQuaternion(quaternion).dot(this.eye)) > AXIS_HIDE_TRESHOLD) {\n                            handle.scale.set(1e-10, 1e-10, 1e-10);\n                            handle.visible = false;\n                        }\n                    }\n                    if (handle.name === 'XY') {\n                        if (Math.abs(alignVector.copy(unitZ).applyQuaternion(quaternion).dot(this.eye)) < PLANE_HIDE_TRESHOLD) {\n                            handle.scale.set(1e-10, 1e-10, 1e-10);\n                            handle.visible = false;\n                        }\n                    }\n                    if (handle.name === 'YZ') {\n                        if (Math.abs(alignVector.copy(unitX).applyQuaternion(quaternion).dot(this.eye)) < PLANE_HIDE_TRESHOLD) {\n                            handle.scale.set(1e-10, 1e-10, 1e-10);\n                            handle.visible = false;\n                        }\n                    }\n                    if (handle.name === 'XZ') {\n                        if (Math.abs(alignVector.copy(unitY).applyQuaternion(quaternion).dot(this.eye)) < PLANE_HIDE_TRESHOLD) {\n                            handle.scale.set(1e-10, 1e-10, 1e-10);\n                            handle.visible = false;\n                        }\n                    }\n\n                    // Flip translate and scale axis ocluded behind another axis\n\n                    if (handle.name.search('X') !== -1) {\n                        if (alignVector.copy(unitX).applyQuaternion(quaternion).dot(this.eye) < AXIS_FLIP_TRESHOLD) {\n                            if (handle.tag === 'fwd') {\n                                handle.visible = false;\n                            } else {\n                                handle.scale.x *= -1;\n                            }\n                        } else if (handle.tag === 'bwd') {\n                            handle.visible = false;\n                        }\n                    }\n\n                    if (handle.name.search('Y') !== -1) {\n                        if (alignVector.copy(unitY).applyQuaternion(quaternion).dot(this.eye) < AXIS_FLIP_TRESHOLD) {\n                            if (handle.tag === 'fwd') {\n                                handle.visible = false;\n                            } else {\n                                handle.scale.y *= -1;\n                            }\n                        } else if (handle.tag === 'bwd') {\n                            handle.visible = false;\n                        }\n                    }\n\n                    if (handle.name.search('Z') !== -1) {\n                        if (alignVector.copy(unitZ).applyQuaternion(quaternion).dot(this.eye) < AXIS_FLIP_TRESHOLD) {\n                            if (handle.tag === 'fwd') {\n                                handle.visible = false;\n                            } else {\n                                handle.scale.z *= -1;\n                            }\n                        } else if (handle.tag === 'bwd') {\n                            handle.visible = false;\n                        }\n                    }\n\n                } else if (this.mode === 'rotate') {\n\n                    // Align handles to current local or world rotation\n\n                    tempQuaternion2.copy(quaternion);\n                    alignVector.copy(this.eye).applyQuaternion(tempQuaternion.copy(quaternion).inverse());\n\n                    if (handle.name.search(\"E\") !== - 1) {\n\n                        handle.quaternion.setFromRotationMatrix(lookAtMatrix.lookAt(this.eye, zeroVector, unitY));\n\n                    }\n\n                    if (handle.name === 'X') {\n\n                        tempQuaternion.setFromAxisAngle(unitX, Math.atan2(-alignVector.y, alignVector.z));\n                        tempQuaternion.multiplyQuaternions(tempQuaternion2, tempQuaternion);\n                        handle.quaternion.copy(tempQuaternion);\n\n                    }\n\n                    if (handle.name === 'Y') {\n\n                        tempQuaternion.setFromAxisAngle(unitY, Math.atan2(alignVector.x, alignVector.z));\n                        tempQuaternion.multiplyQuaternions(tempQuaternion2, tempQuaternion);\n                        handle.quaternion.copy(tempQuaternion);\n\n                    }\n\n                    if (handle.name === 'Z') {\n\n                        tempQuaternion.setFromAxisAngle(unitZ, Math.atan2(alignVector.y, alignVector.x));\n                        tempQuaternion.multiplyQuaternions(tempQuaternion2, tempQuaternion);\n                        handle.quaternion.copy(tempQuaternion);\n\n                    }\n\n                }\n\n                // Hide disabled axes\n                handle.visible = handle.visible && (handle.name.indexOf(\"X\") === -1 || this.showX);\n                handle.visible = handle.visible && (handle.name.indexOf(\"Y\") === -1 || this.showY);\n                handle.visible = handle.visible && (handle.name.indexOf(\"Z\") === -1 || this.showZ);\n                handle.visible = handle.visible && (handle.name.indexOf(\"E\") === -1 || (this.showX && this.showY && this.showZ));\n\n                // highlight selected axis\n\n                handle.material._opacity = handle.material._opacity || handle.material.opacity;\n                handle.material._color = handle.material._color || handle.material.color.clone();\n\n                handle.material.color.copy(handle.material._color);\n                handle.material.opacity = handle.material._opacity;\n\n                if (!this.enabled) {\n\n                    handle.material.opacity *= 0.5;\n                    handle.material.color.lerp(new THREE.Color(1, 1, 1), 0.5);\n\n                } else if (this.axis) {\n\n                    if (handle.name === this.axis) {\n\n                        handle.material.opacity = 1.0;\n                        handle.material.color.lerp(new THREE.Color(1, 1, 1), 0.5);\n\n                    } else if (this.axis.split('').some(function (a) { return handle.name === a; })) {\n\n                        handle.material.opacity = 1.0;\n                        handle.material.color.lerp(new THREE.Color(1, 1, 1), 0.5);\n\n                    } else {\n\n                        handle.material.opacity *= 0.25;\n                        handle.material.color.lerp(new THREE.Color(1, 1, 1), 0.5);\n\n                    }\n\n                }\n\n            }\n\n            THREE.Object3D.prototype.updateMatrixWorld.call(this);\n\n        };\n\n    };\n\n    TransformControlsGizmo.prototype = Object.assign(Object.create(THREE.Object3D.prototype), {\n\n        constructor: TransformControlsGizmo,\n\n        isTransformControlsGizmo: true\n\n    });\n\n\n    var TransformControlsPlane = function () {\n\n        'use strict';\n\n        THREE.Mesh.call(this,\n            new THREE.PlaneBufferGeometry(100000, 100000, 2, 2),\n            new THREE.MeshBasicMaterial({ visible: false, wireframe: true, side: THREE.DoubleSide, transparent: true, opacity: 0.1 })\n        );\n\n        this.type = 'TransformControlsPlane';\n\n        var unitX = new THREE.Vector3(1, 0, 0);\n        var unitY = new THREE.Vector3(0, 1, 0);\n        var unitZ = new THREE.Vector3(0, 0, 1);\n\n        var tempVector = new THREE.Vector3();\n        var dirVector = new THREE.Vector3();\n        var alignVector = new THREE.Vector3();\n        var tempMatrix = new THREE.Matrix4();\n        var identityQuaternion = new THREE.Quaternion();\n\n        this.updateMatrixWorld = function () {\n\n            var space = this.space;\n\n            this.position.copy(this.worldPosition);\n\n            if (this.mode === 'scale') space = 'local'; // scale always oriented to local rotation\n\n            unitX.set(1, 0, 0).applyQuaternion(space === \"local\" ? this.worldQuaternion : identityQuaternion);\n            unitY.set(0, 1, 0).applyQuaternion(space === \"local\" ? this.worldQuaternion : identityQuaternion);\n            unitZ.set(0, 0, 1).applyQuaternion(space === \"local\" ? this.worldQuaternion : identityQuaternion);\n\n            // Align the plane for current transform mode, axis and space.\n\n            alignVector.copy(unitY);\n\n            switch (this.mode) {\n                case 'translate':\n                case 'scale':\n                    switch (this.axis) {\n                        case 'X':\n                            alignVector.copy(this.eye).cross(unitX);\n                            dirVector.copy(unitX).cross(alignVector);\n                            break;\n                        case 'Y':\n                            alignVector.copy(this.eye).cross(unitY);\n                            dirVector.copy(unitY).cross(alignVector);\n                            break;\n                        case 'Z':\n                            alignVector.copy(this.eye).cross(unitZ);\n                            dirVector.copy(unitZ).cross(alignVector);\n                            break;\n                        case 'XY':\n                            dirVector.copy(unitZ);\n                            break;\n                        case 'YZ':\n                            dirVector.copy(unitX);\n                            break;\n                        case 'XZ':\n                            alignVector.copy(unitZ);\n                            dirVector.copy(unitY);\n                            break;\n                        case 'XYZ':\n                        case 'E':\n                            dirVector.set(0, 0, 0);\n                            break;\n                    }\n                    break;\n                case 'rotate':\n                default:\n                    // special case for rotate\n                    dirVector.set(0, 0, 0);\n            }\n\n            if (dirVector.length() === 0) {\n\n                // If in rotate mode, make the plane parallel to camera\n                this.quaternion.copy(this.cameraQuaternion);\n\n            } else {\n\n                tempMatrix.lookAt(tempVector.set(0, 0, 0), dirVector, alignVector);\n\n                this.quaternion.setFromRotationMatrix(tempMatrix);\n\n            }\n\n            THREE.Object3D.prototype.updateMatrixWorld.call(this);\n\n        };\n\n    };\n\n    TransformControlsPlane.prototype = Object.assign(Object.create(THREE.Mesh.prototype), {\n\n        constructor: TransformControlsPlane,\n\n        isTransformControlsPlane: true\n\n    });\n\n    return TransformControls;\n}\n","import * as THREE from 'three';\nimport Stats from \"stats-js\";\n\nimport Sky from \"./sky\";\nimport Grid from \"./grid\";\nimport ViewerHelper from \"./viewerHelper\";\n\nimport store, { toggleMenu, updateScene, updateSelectedObject } from \"../store\";\n\nvar OrbitControls = require('./utils/OrbitControls.js')(THREE);\nvar OBJLoader = require('three-obj-loader');\nOBJLoader(THREE);\n\nvar TransformControls = require(\"./utils/TransformControls\")(THREE);\n\nclass Viewer {\n    constructor(antialias = true) {\n\n        this.scene = new THREE.Scene();\n        this.camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 10000);\n\n        this.camera.position.set(0, 10, -30)\n        this.camera.lookAt(new THREE.Vector3());\n\n        this.canvas = document.getElementById(\"3d-env\");\n        this.renderer = new THREE.WebGLRenderer({\n            canvas: this.canvas,\n            antialias: antialias,\n            alpha: false,\n            //performance improvements\n            preserveDrawingBuffer: true,\n            failIfMajorPerformanceCaveat: true\n        });\n\n        this.renderer.sortObjects = false;\n        this.renderer.setSize(window.innerWidth, window.innerHeight);\n        this.renderer.setClearColor(0x000000, 0.0);\n        this.renderer.setPixelRatio(window.devicePixelRatio);\n\n        this.interactiveObjects = new THREE.Group();\n        this.scene.add(this.interactiveObjects);\n        /* \n            var geometry = new THREE.BoxGeometry(10, 10, 10);\n            var material = new THREE.MeshBasicMaterial({ color: 0x000000 });\n            var cube = new THREE.Mesh(geometry, material);\n            cube.name = \"cube1\";\n            interactiveObjects.add(cube);\n    \n            var geometry = new THREE.BoxGeometry(5, 5, 5);\n            var material = new THREE.MeshBasicMaterial({ color: 0x00ffFF });\n            var cube = new THREE.Mesh(geometry, material);\n            cube.position.y = 7.5;\n            cube.name = \"cube2\";\n            interactiveObjects.add(cube);\n    \n            var geometry = new THREE.BoxGeometry(5, 5, 5);\n            var material = new THREE.MeshBasicMaterial({ color: 0x00ffFF });\n            var cube = new THREE.Mesh(geometry, material);\n            cube.position.y = 15;\n            cube.name = \"cube3\";\n            interactiveObjects.add(cube);\n        */\n        //scene.add(cube);\n        var tControl = new TransformControls(this.camera, this.renderer.domElement);\n        this.controls = new OrbitControls(this.camera, this.canvas);\n        let sky = new Sky();\n        this.scene.add(sky.getObject(THREE));\n\n        //cubeview\n        let viewerHelper = new ViewerHelper(\"viewer-helper\", this.controls);\n\n        this.controls.setPolarAngle(Math.PI * 0.25);\n        this.controls.setAzimuthalAngle(Math.PI * 0.25);\n        this.controls.update();\n\n        var gridHelper = new Grid();//new THREE.GridHelper(100, 100, 0xaaaaaa, 0x666666);\n        this.scene.add(gridHelper);\n\n        //raycast\n        this.raycaster = new THREE.Raycaster();\n        this.mouse = new THREE.Vector2();\n        this.INTERSECTED;\n        this.INTERSECTED_box;\n        this.INTERSECTED_selected;\n\n\n        window.addEventListener('mousemove', this.onMouseMove, false);\n        window.addEventListener('mousedown', this.onMouseDown, false);\n\n        var geometry = new THREE.BoxGeometry(1, 1, 1);\n        var material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });\n        this.cube = new THREE.Mesh(geometry, material);\n\n\n        //tControl.addEventListener('change', this.animate);\n\n        tControl.addEventListener('mouseDown', (event) => {\n            this.controls.enabled = false;\n            viewerHelper.enabled = false;\n        });\n\n        tControl.addEventListener('mouseUp', (event) => {\n            this.controls.enabled = true;\n            viewerHelper.enabled = true;\n        });\n\n        tControl.attach(this.cube);\n\n        this.scene.add(tControl);\n        this.scene.add(this.cube);\n\n    }\n\n    onMouseMove = (event) => {\n        this.mouse.x = (event.clientX / this.renderer.domElement.clientWidth) * 2 - 1;\n        this.mouse.y = - (event.clientY / this.renderer.domElement.clientHeight) * 2 + 1;\n    }\n\n    onMouseDown = (event) => {\n        if (this.INTERSECTED && event.button == 2) {\n            console.log(event);\n            console.log(this.INTERSECTED.name);\n        }\n        if (this.INTERSECTED && event.button == 0) {\n            this.updateSelectedObject(this.INTERSECTED);\n            console.log(store.getState().environment);\n            console.log(this.INTERSECTED.name);\n\n            this.INTERSECTED_selected = this.INTERSECTED;\n\n            if (this.INTERSECTED_box)\n                this.scene.remove(this.INTERSECTED_box)\n            this.INTERSECTED_box = new THREE.BoxHelper(this.INTERSECTED, 0x55ddff);\n\n            this.scene.add(this.INTERSECTED_box);\n        }\n    }\n\n    animate = () => {\n        requestAnimationFrame(this.animate);\n        // update the picking ray with the camera and mouse position\n        this.raycaster.setFromCamera(this.mouse, this.camera);\n\n        // calculate objects intersecting the picking ray\n        var intersects = this.raycaster.intersectObjects(this.interactiveObjects.children);\n\n        // if there is one (or more) intersections\n        if (intersects.length) {\n            if (intersects[0].object != this.INTERSECTED) {\n                this.INTERSECTED = intersects[0].object;\n                if (this.INTERSECTED) {\n                    //INTERSECTED.currentHex = INTERSECTED.material.color.getHex();\n                    //INTERSECTED.material.color.setHex(0xffff00);\n\n                }\n                else\n                    this.INTERSECTED = null;\n            }\n        }\n        else {\n            if (this.INTERSECTED)\n                this.INTERSECTED = null;\n        }\n\n        if (this.INTERSECTED_box) {\n            this.INTERSECTED_box.update();\n        }\n\n        if (this.controls.enabled)\n            this.controls.update();\n\n        //stats.begin();\n        this.cube.rotation.x = window.pos3d.x * 5;\n        this.cube.rotation.y = window.pos3d.y * 5;\n        // your code goes here\n        this.renderer.render(this.scene, this.camera);\n        //stats.end();\n    }\n\n}\n\nwindow.onload = function () {\n    var viewer = new Viewer();\n    viewer.animate();\n    window.viewer = viewer;\n};\n\n\n//load obj\n// instantiate a loader\n//var loader = new THREE.OBJLoader();\n/*\n// load a resource\nloader.load(\n    // resource URL\n    'models/monster.obj',\n    // called when resource is loaded\n    function (object) {\n\n        scene.add(object);\n\n    },\n    // called when loading is in progresses\n    function (xhr) {\n\n        console.log((xhr.loaded / xhr.total * 100) + '% loaded');\n\n    },\n    // called when loading has errors\n    function (error) {\n\n        console.log('An error happened');\n\n    }\n);\n*/\n\n","import React, { Component } from \"react\";\nimport ReactDOM from 'react-dom';\nimport { AppContainer } from 'react-hot-loader';\nimport { Provider } from \"react-redux\";\n\nimport App from \"./App.js\";\nimport \"./index.css\";\n\n//export let actions = new Actions(store);\nimport store from \"./store\";\n\nwindow.store = store;\n\nwindow.pos3d = { x: 0, y: 0 };\n\nconst render = () => {\n    ReactDOM.render(\n        <AppContainer>\n            <Provider store={store}>\n                <App />\n            </Provider>\n        </AppContainer>,\n        window.document.getElementById('app'));\n}\nif (typeof window !== 'undefined') { render(); }\n\nif (module.hot) {\n    module.hot.accept(render);\n}\n\nwindow.focus();\n\n//execute the viewer\nimport './viewer/viewer.js';\n//let viewer = new Viewer(store);\n\n//Menu\nconst { remote } = require('electron');\nconst { Menu, MenuItem } = remote;\n/*\nconst menu = new Menu()\nmenu.append(new MenuItem({ label: 'MenuItem1', click() { console.log('item 1 clicked') } }))\nmenu.append(new MenuItem({ type: 'separator' }))\nmenu.append(new MenuItem({ label: 'MenuItem2', type: 'checkbox', checked: true }))\n\nwindow.addEventListener('contextmenu', (e) => {\n    e.preventDefault()\n    menu.popup({ window: remote.getCurrentWindow() })\n}, false);\n*/\n\n\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}